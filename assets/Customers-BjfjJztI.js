import{r as s,a as T,u as _,j as e,C as g}from"./index-DrMvIKwq.js";import{ab as F,aa as D,ac as M,a0 as $}from"./index-y5yuKkc0.js";import{T as i}from"./Typography-BAti9wpa.js";import{B as r}from"./Box-tqBBETVs.js";import{G as E}from"./Grid-BqE4Oht1.js";import{C as z}from"./Card-locYS_tZ.js";import{C as G}from"./CardContent-CLprEiUl.js";import{B as l}from"./Button-xUQB_oWD.js";import{M as h}from"./Modal-CfkloFEy.js";import{T as p}from"./TextField-DvirranI.js";import{I as u}from"./IconButton-BGQYt6kH.js";import{D as H}from"./DataGrid-odPpneuv.js";import"./iconBase-BBLIWj70.js";import"./index-pDPmJGlT.js";import"./createSimplePaletteValueFilter-zjTMkHT-.js";import"./useTheme-CepysXf6.js";import"./useTheme-C3_UZ2QD.js";import"./Paper-C4BDKHkT.js";import"./CircularProgress-B5agUqRt.js";import"./Portal-BMjECl0g.js";import"./useSlot-BWhg9WXJ.js";import"./Select-DJdQC6kX.js";import"./Menu-ComLaOXz.js";import"./Grow-B1pBNw31.js";import"./List-BLDT_Zsz.js";import"./useControlled-Bio4-BJG.js";import"./createSvgIcon-CgYohZ5P.js";import"./isMuiElement-LlRumiQy.js";import"./index-COvJ5x3S.js";import"./Close-CZtWXSiP.js";import"./Badge-Dv4pCkXf.js";import"./Tooltip-BJxLh1tU.js";import"./Chip-BGAMkzyn.js";import"./ClickAwayListener-CKDzE_Pj.js";import"./MenuItem-8srXigvG.js";import"./listItemTextClasses--ZWm_3O6.js";import"./dividerClasses-CP17GPn_.js";import"./Toolbar-IXigYXsH.js";import"./ListItemText-CPFOLNaz.js";import"./InputAdornment-qRqOoZAt.js";import"./Divider-DKVgf2v9.js";import"./FormControlLabel-B2fud-Wt.js";import"./TableCell-Cv6TnrlD.js";import"./Skeleton-BNpbg8au.js";const L="https://rubertogo.com",O=g.create(r),We=()=>{const[c,x]=s.useState([]),[t,n]=s.useState(null),[B,j]=s.useState(!1),[R,f]=s.useState(!1),W=localStorage.getItem("accessToken"),[b,y]=s.useState(null),[A,v]=s.useState(!1),w=T(),{lang:C}=_();s.useEffect(()=>{(async()=>{try{const m=await(await fetch(`${L}/api/all-users`,{headers:{Authorization:`Bearer ${W}`}})).json();x(m)}catch(o){console.error("Failed to fetch customers:",o)}})()},[]);const S=a=>{y(a),v(!0)},N=()=>{y(null),v(!1)},k=a=>{n(a),j(!0)},I=a=>{n(a),f(!0)},d=()=>{j(!1),f(!1),n(null)},P=[{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:150},{field:"email",headerName:"Email",width:250},{field:"phone",headerName:"Phone",width:150},{field:"role",headerName:"Role",width:120},{field:"idDocumentFront",headerName:"ID Front",width:120,renderCell:a=>a.value?e.jsx(u,{color:"primary",onClick:()=>I(a.row),children:e.jsx(F,{})}):"N/A"},{field:"actions",headerName:"Actions",width:180,renderCell:a=>e.jsxs(r,{display:"flex",gap:1,children:[e.jsx(u,{color:"primary",onClick:()=>k(a.row),children:e.jsx(D,{})}),e.jsx(u,{color:"secondary",onClick:()=>x(c.filter(o=>o._id!==a.row._id)),children:e.jsx($,{})}),e.jsx(l,{variant:"outlined",color:"primary",startIcon:e.jsx(M,{className:"text-red-500"}),onClick:()=>w(`/${C}/admin/${a.row._id}`)})]})}];return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx(i,{variant:"h4",gutterBottom:!0,className:"text-white font-bold shadow-lg p-5 bg-red-600 text-center",children:"All Customers"}),e.jsx(r,{sx:{display:{xs:"none",md:"block"},height:500,width:"100%",boxShadow:0,bgcolor:"background.paper",borderRadius:2,overflow:"hidden"},children:e.jsx(H,{rows:c,columns:P,getRowId:a=>a._id,pageSize:5,rowsPerPageOptions:[5],disableSelectionOnClick:!0,sx:{"& .MuiDataGrid-columnHeaders":{bgcolor:"primary.main",color:"#000"},"& .MuiDataGrid-cell":{fontSize:"16px"}}})}),e.jsx(r,{sx:{display:{xs:"block",md:"none"},mt:4},children:e.jsx(E,{container:!0,spacing:2,children:c.map(a=>e.jsx(E,{item:!0,xs:12,children:e.jsx(z,{variant:"outlined",sx:{boxShadow:3},children:e.jsxs(G,{children:[e.jsxs(i,{variant:"h6",color:"primary",children:[a.firstName," ",a.lastName]}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Email: ",a.email]}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Phone: ",a.phone]}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Role: ",a.role]}),e.jsxs(r,{display:"flex",gap:2,mt:2,children:[e.jsx(l,{variant:"contained",color:"primary",startIcon:e.jsx(F,{}),onClick:()=>I(a),children:"View"}),e.jsx(l,{variant:"outlined",color:"primary",startIcon:e.jsx(D,{}),onClick:()=>k(a),children:"Edit"}),e.jsx(l,{variant:"outlined",color:"primary",startIcon:e.jsx(M,{className:"text-red-500"}),onClick:()=>w(`/${C}/admin/${a._id}`)})]})]})})},a._id))})}),e.jsx(h,{open:R,onClose:d,children:e.jsxs(O,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{maxWidth:800,mx:"auto",my:"8%",p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:3,height:"80vh",overflowY:"auto"},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",color:"primary",textAlign:"center",mb:3,children:"Customer Details"}),t&&e.jsxs(r,{display:"flex",flexDirection:"column",gap:4,p:2,children:[e.jsx(r,{display:"grid",gap:3,gridTemplateColumns:"repeat(2, 1fr)",bgcolor:"grey.100",p:3,borderRadius:2,boxShadow:2,children:[{label:"First Name",value:t==null?void 0:t.firstName},{label:"Last Name",value:t==null?void 0:t.lastName},{label:"Email",value:t==null?void 0:t.email},{label:"Phone",value:t==null?void 0:t.phone},{label:"Role",value:t==null?void 0:t.role},{label:"address",value:t==null?void 0:t.address}].map((a,o)=>e.jsxs(r,{children:[e.jsx(i,{variant:"body1",fontWeight:"bold",color:"textSecondary",children:a.label}),e.jsx(i,{variant:"body2",color:"textPrimary",children:a.value})]},o))}),e.jsxs(r,{display:"flex",flexDirection:"column",gap:4,children:[e.jsx(r,{display:"flex",justifyContent:"center",gap:4,children:["ID Front","ID Back"].map((a,o)=>e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"caption",color:"textSecondary",children:a}),e.jsx(g.img,{src:o===0?t.idDocumentFront:t.idDocumentBack,alt:a,style:{width:"250px",height:"120px",objectFit:"cover",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",border:"1px solid #ddd"},whileHover:{scale:1.05},transition:{duration:.3},onClick:()=>S(o===0?t.idDocumentFront:t.idDocumentBack)})]},o))}),e.jsx(r,{display:"flex",justifyContent:"center",gap:4,children:["License Front","License Back"].map((a,o)=>e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"caption",color:"textSecondary",children:a}),e.jsx(g.img,{src:o===0?t.licenseFront:t.licenseBack,alt:a,style:{width:"250px",height:"120px",objectFit:"cover",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",border:"1px solid #ddd"},whileHover:{scale:1.05},transition:{duration:.3},onClick:()=>S(o===0?t.licenseFront:t.licenseBack)})]},o))})]}),e.jsx(l,{variant:"contained",color:"primary",onClick:d,sx:{mt:4,alignSelf:"center"},children:"Close"})]})]})}),e.jsx(h,{open:B,onClose:d,children:e.jsxs(r,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{maxWidth:800,mx:"auto",my:"10%",p:4,bgcolor:"background.paper",borderRadius:2,boxShadow:3},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",color:"primary",textAlign:"center",mb:3,children:"Edit Customer"}),t&&e.jsxs("form",{onSubmit:a=>{a.preventDefault();const o=c.map(m=>m._id===t._id?{...t}:m);x(o),d()},children:[e.jsx(p,{label:"First Name",value:t.firstName||"",onChange:a=>n({...t,firstName:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Last Name",value:t.lastName||"",onChange:a=>n({...t,lastName:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Email",type:"email",value:t.email||"",onChange:a=>n({...t,email:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(p,{label:"Phone",type:"tel",value:t.phone||"",onChange:a=>n({...t,phone:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsxs(r,{display:"flex",justifyContent:"center",gap:2,mt:3,children:[e.jsx(l,{variant:"outlined",color:"secondary",onClick:d,children:"Cancel"}),e.jsx(l,{variant:"contained",color:"primary",type:"submit",children:"Save"})]})]})]})}),e.jsx(h,{open:A,onClose:N,children:e.jsxs(O,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)"},children:[e.jsx(l,{onClick:N,sx:{position:"absolute",top:16,right:16,zIndex:2,bgcolor:"white",color:"black",minWidth:"40px",height:"40px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.5rem","&:hover":{bgcolor:"gray.300"}},children:"âœ•"}),b&&e.jsx("img",{src:b,alt:"Enlarged",style:{maxWidth:"90%",maxHeight:"90%",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"}})]})})]})};export{We as default};
