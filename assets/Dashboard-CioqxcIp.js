import{r as e,l as a,j as t,bA as s,J as o,bB as l,z as n,G as i,aJ as d,bC as r}from"./vendor-Zgq9WbFI.js";const c="https://rubertogo.com",u=a(c);function x(){const[a,x]=e.useState({todayBooked:0,totalBookings:0,canceledBookings:0,completedBookings:0,availableVans:0,totalCustomers:0,revenue:0,averageBookingValue:0,totalActiveCustomers:0,dailyData:[],pendingBookings:0,refundedBookings:0,revenueToday:0,revenueThisMonth:0,totalEarnings:0,totalAvailableBalance:0,totalPendingEarnings:0});console.log(a);const[h,j]=e.useState(!0),[v,b]=e.useState("today"),[p,f]=e.useState({startDate:"",endDate:""});e.useEffect((()=>{(async()=>{try{const e="custom"===v&&p.startDate&&p.endDate?{type:v,...p}:{type:v},a=new URLSearchParams(e).toString(),t=await fetch(`${c}/api/dashboard/stats?${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),s=await t.json();x(s)}catch(e){console.error("Error fetching dashboard stats:",e)}finally{j(!1)}})()}),[v,p.startDate,p.endDate]),e.useEffect((()=>(u.on("updateDashboardStats",(e=>{x((a=>({...a,...e})))})),()=>{u.off("updateDashboardStats")})),[]);const y={labels:a.dailyData.map((e=>e.date)),datasets:[{label:"Revenue",data:a.dailyData.map((e=>e.revenue)),borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.2)",fill:!0},{label:"Accepted",data:a.dailyData.map((e=>e.accepted)),borderColor:"#2196f3",backgroundColor:"rgba(33, 150, 243, 0.2)",fill:!0},{label:"Canceled",data:a.dailyData.map((e=>e.canceled)),borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.2)",fill:!0},{label:"Pending",data:a.dailyData.map((e=>e.pending)),borderColor:"#ff9800",backgroundColor:"rgba(255, 152, 0, 0.2)",fill:!0}]};return h?t.jsx(m,{}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-r from-blue-50 to-blue-100 p-6",children:[t.jsxs("div",{className:"flex items-center  justify-between mb-8",children:[t.jsxs("h1",{className:"text-2xl flex items-center gap-2 font-semibold text-gray-800",children:[" ",t.jsx(s,{className:"text-red-300"})," Dashboard"]}),t.jsxs("div",{className:"flex items-center  space-x-4",children:[t.jsxs("select",{value:v,onChange:e=>b(e.target.value),className:"p-2 border rounded bg-white shadow",children:[t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"}),t.jsx("option",{value:"year",children:"This Year"}),t.jsx("option",{value:"custom",children:"Custom Date Range"})]}),"custom"===v&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"date",value:p.startDate,onChange:e=>f({...p,startDate:e.target.value}),className:"p-2 border rounded bg-white shadow"}),t.jsx("input",{type:"date",value:p.endDate,onChange:e=>f({...p,endDate:e.target.value}),className:"p-2 border rounded bg-white shadow"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsx(g,{title:"Available Blance",value:`CHF ${a.totalAvailableBalance.toFixed(2)}`,icon:t.jsx(o,{className:"text-green-500"})}),t.jsx(g,{title:"Total Pending Earnings:",value:`CHF ${a.totalPendingEarnings.toFixed(2)}`,icon:t.jsx(o,{className:"text-yellow-500"})}),t.jsx(g,{title:"Total Earnings:",value:a.totalEarnings.toFixed(2),icon:t.jsx(o,{className:"text-yellow-500"})}),t.jsx(g,{title:"Revenue Today",value:`$${a.revenueToday.toFixed(2)}`,icon:t.jsx(o,{className:"text-yellow-500"})}),t.jsx(g,{title:"Revenue This Month",value:`$${a.revenueThisMonth.toFixed(2)}`,icon:t.jsx(o,{className:"text-yellow-500"})}),t.jsx(g,{title:"Average Booking Value",value:`$${a.averageBookingValue}`,icon:t.jsx(o,{className:"text-yellow-500"})}),t.jsx(g,{title:"Today Booked",value:a.todayBooked,icon:t.jsx(l,{})}),t.jsx(g,{title:"Total Customers",value:a.totalCustomers,icon:t.jsx(n,{})}),t.jsx(g,{title:"Total Active Customers",value:a.totalActiveCustomers,icon:t.jsx(n,{})}),t.jsx(g,{title:"Total Bookings",value:a.totalBookings,icon:t.jsx(i,{})}),t.jsx(g,{title:"Canceled Bookings",value:a.canceledBookings,icon:t.jsx(i,{})}),t.jsx(g,{title:"Completed Bookings",value:a.completedBookings,icon:t.jsx(i,{})}),t.jsx(g,{title:"Available Vans",value:a.availableVans,icon:t.jsx(d,{})}),t.jsx(g,{title:"Pending Bookings",value:a.pendingBookings,icon:t.jsx(i,{})}),t.jsx(g,{title:"Refunded Bookings",value:a.refundedBookings,icon:t.jsx(i,{})})]}),t.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mt-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Revenue and Booking Trends"}),t.jsx(r,{data:y,options:{responsive:!0,plugins:{legend:{position:"top"}}}})]})]})}function g({title:e,value:a,icon:s}){return t.jsxs("div",{className:"flex items-center p-4 bg-white shadow rounded-lg",children:[t.jsx("div",{className:"p-4 bg-gray-200 text-2xl rounded-full",children:s}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:e}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function m(){return t.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-50",children:t.jsx("p",{children:"Loading..."})})}export{x as default};
