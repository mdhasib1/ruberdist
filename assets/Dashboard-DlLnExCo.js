import{r as n,l as k,j as e,bd as C,V as i,be as B,O as x,S as r,bf as D,bg as w,bh as N,bi as T,bj as S,bk as E,bl as F,bm as A,bn as $,bo as P,bp as R}from"./vendor-B56vuqgA.js";N.register(T,S,E,F,A,$,P,R);const h="https://www.rubertogo.com",m=k(h);function _(){const[a,d]=n.useState({todayBooked:0,totalBookings:0,canceledBookings:0,completedBookings:0,availableVans:0,totalCustomers:0,revenue:0,averageBookingValue:0,totalActiveCustomers:0,dailyData:[],pendingBookings:0,refundedBookings:0,revenueToday:0,revenueThisMonth:0,totalEarnings:0,totalAvailableBalance:0,totalPendingEarnings:0}),[c,b]=n.useState(!0),[l,j]=n.useState("today"),[o,g]=n.useState({startDate:"",endDate:""}),p=async()=>{try{const t=l==="custom"&&o.startDate&&o.endDate?{type:l,...o}:{type:l},u=new URLSearchParams(t).toString(),y=await(await fetch(`${h}/api/dashboard/stats?${u}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).json();d(y)}catch(t){console.error("Error fetching dashboard stats:",t)}finally{b(!1)}};n.useEffect(()=>{p()},[l,o.startDate,o.endDate]),n.useEffect(()=>(m.on("updateDashboardStats",t=>{d(u=>({...u,...t}))}),()=>{m.off("updateDashboardStats")}),[]);const v={labels:a.dailyData.map(t=>t.date),datasets:[{label:"Revenue",data:a.dailyData.map(t=>t.revenue),borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.2)",fill:!0},{label:"Accepted",data:a.dailyData.map(t=>t.accepted),borderColor:"#2196f3",backgroundColor:"rgba(33, 150, 243, 0.2)",fill:!0},{label:"Canceled",data:a.dailyData.map(t=>t.canceled),borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.2)",fill:!0},{label:"Pending",data:a.dailyData.map(t=>t.pending),borderColor:"#ff9800",backgroundColor:"rgba(255, 152, 0, 0.2)",fill:!0}]},f={responsive:!0,plugins:{legend:{position:"top"}}};return c?e.jsx(L,{}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-r from-blue-50 to-blue-100 p-6",children:[e.jsxs("div",{className:"flex items-center  justify-between mb-8",children:[e.jsxs("h1",{className:"text-2xl flex items-center gap-2 font-semibold text-gray-800",children:[" ",e.jsx(C,{className:"text-red-300"})," Dashboard"]}),e.jsxs("div",{className:"flex items-center  space-x-4",children:[e.jsxs("select",{value:l,onChange:t=>j(t.target.value),className:"p-2 border rounded bg-white shadow",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"year",children:"This Year"}),e.jsx("option",{value:"custom",children:"Custom Date Range"})]}),l==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:o.startDate,onChange:t=>g({...o,startDate:t.target.value}),className:"p-2 border rounded bg-white shadow"}),e.jsx("input",{type:"date",value:o.endDate,onChange:t=>g({...o,endDate:t.target.value}),className:"p-2 border rounded bg-white shadow"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(s,{title:"Available Blance",value:`CHF ${a.totalAvailableBalance.toFixed(2)}`,icon:e.jsx(i,{className:"text-green-500"})}),e.jsx(s,{title:"Total Pending Earnings:",value:`CHF ${a.totalPendingEarnings.toFixed(2)}`,icon:e.jsx(i,{className:"text-yellow-500"})}),e.jsx(s,{title:"Total Earnings:",value:a.totalEarnings.toFixed(2),icon:e.jsx(i,{className:"text-yellow-500"})}),e.jsx(s,{title:"Revenue Today",value:`$${a.revenueToday.toFixed(2)}`,icon:e.jsx(i,{className:"text-yellow-500"})}),e.jsx(s,{title:"Revenue This Month",value:`$${a.revenueThisMonth.toFixed(2)}`,icon:e.jsx(i,{className:"text-yellow-500"})}),e.jsx(s,{title:"Average Booking Value",value:`$${a.averageBookingValue}`,icon:e.jsx(i,{className:"text-yellow-500"})}),e.jsx(s,{title:"Today Booked",value:a.todayBooked,icon:e.jsx(B,{})}),e.jsx(s,{title:"Total Customers",value:a.totalCustomers,icon:e.jsx(x,{})}),e.jsx(s,{title:"Total Active Customers",value:a.totalActiveCustomers,icon:e.jsx(x,{})}),e.jsx(s,{title:"Total Bookings",value:a.totalBookings,icon:e.jsx(r,{})}),e.jsx(s,{title:"Canceled Bookings",value:a.canceledBookings,icon:e.jsx(r,{})}),e.jsx(s,{title:"Completed Bookings",value:a.completedBookings,icon:e.jsx(r,{})}),e.jsx(s,{title:"Available Vans",value:a.availableVans,icon:e.jsx(D,{})}),e.jsx(s,{title:"Pending Bookings",value:a.pendingBookings,icon:e.jsx(r,{})}),e.jsx(s,{title:"Refunded Bookings",value:a.refundedBookings,icon:e.jsx(r,{})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Revenue and Booking Trends"}),e.jsx(w,{data:v,options:f})]})]})}function s({title:a,value:d,icon:c}){return e.jsxs("div",{className:"flex items-center p-4 bg-white shadow rounded-lg",children:[e.jsx("div",{className:"p-4 bg-gray-200 text-2xl rounded-full",children:c}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:a}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:d})]})]})}function L(){return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-blue-50",children:e.jsx("p",{children:"Loading..."})})}export{_ as default};
