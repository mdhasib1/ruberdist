import{r,j as e,br as Ne,k as w,I as se,bH as Se,m as d,aO as $e,a9 as F,B as A,am as D,bm as ge,q as xe,cS as De,cT as Me,cU as Le,cy as Pe,cA as he,bY as Ye,a5 as ee,b as K,ce as Re,C as Oe,a as Te,cV as $,cW as H,as as te,z as fe,cX as re,ay as pe,cY as Ee,cZ as Fe,cQ as He,ct as We,D as Ue,b2 as ae,c_ as Ve,b3 as Ce,bl as _e,bn as qe,c$ as Ze,bp as be,bq as R,bo as Ge,d0 as Ke,cs as Je,d1 as ye,d2 as ie,d3 as Xe,ca as Qe,cc as et,cd as tt,f as O,u as st,c as at,ah as nt,d4 as le,d5 as ce,d6 as de,d7 as me,d8 as ot,aq as je,bI as rt}from"./vendor-C2yKzKC1.js";import{u as Be}from"./useDeviceType-DkIBX-9S.js";import{a as ue,u as it}from"./index-BaV-Bpz3.js";import{O as lt}from"./OTPModal-CAXfuiS0.js";const ct=({isOpen:t,onClose:s,booking:l,onSubmit:n})=>{const[x,g]=r.useState(0),[m,u]=r.useState(""),j=()=>{if(x<1||x>5){alert("Please provide a rating between 1 and 5.");return}n({bookingId:l._id,vanId:l.vanId._id,rating:x,comment:m}),g(0),u(""),s()};return e.jsx(Ne,{open:t,onClose:s,children:e.jsxs(w,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:400},bgcolor:"background.paper",borderRadius:"16px",boxShadow:24,p:4,textAlign:"center",overflow:"hidden"},children:[e.jsx(se,{onClick:s,sx:{position:"absolute",top:"8px",right:"8px",color:"#ff4e50",zIndex:10,"&:hover":{color:"#f9d423"}},children:e.jsx(Se,{})}),e.jsx(w,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"50px",background:"linear-gradient(to right, #ff4e50, #f9d423)",borderTopLeftRadius:"16px",borderTopRightRadius:"16px"}}),e.jsx(d,{variant:"h5",sx:{fontWeight:"bold",color:"#333",mt:6,mb:1},children:"Com'Ã© stata la tua esperienza?"}),e.jsxs(d,{variant:"body1",sx:{color:"text.secondary",mb:2},children:["Modello: ",e.jsx("b",{children:l?.vanId?.name?.en||"Van"})]}),e.jsx($e,{name:"rating",value:x,onChange:(I,S)=>g(S),size:"large",sx:{mb:4,"& .MuiRating-iconFilled":{color:"#ff4e50"}}}),e.jsx(F,{label:"Scrivi qui la tua recensione...",value:m,onChange:I=>u(I.target.value),fullWidth:!0,multiline:!0,rows:3,variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx(A,{variant:"contained",onClick:j,sx:{width:"100%",py:1.5,fontSize:"1rem",fontWeight:"bold",color:"#fff",background:"linear-gradient(to right, #ff4e50, #f9d423)",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)",borderRadius:"8px","&:hover":{background:"linear-gradient(to right, #f9d423, #ff4e50)"}},children:"Invia recensione"})]})})},dt=({initialUserData:t})=>{const[s,l]=r.useState({firstName:"",lastName:"",email:"",phone:"",address:"",preferredLanguage:"",idDocumentFront:"",idDocumentBack:"",licenseFront:"",licenseBack:""}),[n,x]=r.useState(!1);r.useEffect(()=>{t&&l({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phone||"",address:t.address||"",preferredLanguage:t.preferredLanguage||"",idDocumentFront:t.idDocumentFront||"",idDocumentBack:t.idDocumentBack||"",licenseFront:t.licenseFront||"",licenseBack:t.licenseBack||""})},[t]);const g=j=>{const{name:I,value:S}=j.target;l(i=>({...i,[I]:S}))},m=()=>{x(!n)},u=j=>{j.preventDefault(),console.log("Updated user data:",s),x(!1)};return e.jsx(w,{component:D.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"sm:max-w-full max-w-lg mx-auto sm:py-0 py-5",children:e.jsxs(ge,{elevation:4,className:"p-8 rounded-xl shadow-md bg-white",children:[e.jsx(d,{variant:"h4",className:"text-[#ff0707] font-bold mb-4",children:"Account Settings"}),e.jsx(d,{variant:"body1",className:"text-gray-600 mb-6",children:"Update your account information here."}),e.jsx(xe,{className:"mb-6"}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsx(F,{label:"First Name",name:"firstName",value:s.firstName,onChange:g,fullWidth:!0,disabled:!n,variant:"outlined",color:"secondary",className:"mb-4",InputProps:{style:{backgroundColor:n?"#f9f9f9":"transparent"}}}),e.jsx(F,{label:"Last Name",name:"lastName",value:s.lastName,onChange:g,fullWidth:!0,disabled:!n,variant:"outlined",color:"secondary",className:"mb-4",InputProps:{style:{backgroundColor:n?"#f9f9f9":"transparent"}}}),e.jsx(F,{label:"Email",name:"email",type:"email",value:s.email,onChange:g,fullWidth:!0,disabled:!n,variant:"outlined",color:"secondary",className:"mb-4",InputProps:{style:{backgroundColor:n?"#f9f9f9":"transparent"}}}),e.jsx(F,{label:"Phone Number",name:"phone",value:s.phone,onChange:g,fullWidth:!0,disabled:!n,variant:"outlined",color:"secondary",className:"mb-4",InputProps:{style:{backgroundColor:n?"#f9f9f9":"transparent"}}}),e.jsx(F,{label:"Address",name:"address",value:s.address,onChange:g,fullWidth:!0,disabled:!n,variant:"outlined",color:"secondary",className:"mb-4",InputProps:{style:{backgroundColor:n?"#f9f9f9":"transparent"}}}),e.jsx(F,{label:"Preferred Language",name:"preferredLanguage",value:s.preferredLanguage,onChange:g,fullWidth:!0,disabled:!n,variant:"outlined",color:"secondary",className:"mb-4",InputProps:{style:{backgroundColor:n?"#f9f9f9":"transparent"}}}),e.jsx(xe,{className:"mb-6"}),n?e.jsxs(w,{className:"flex justify-end gap-4",children:[e.jsx(A,{variant:"contained",color:"success",type:"submit",startIcon:e.jsx(De,{}),children:"Save Changes"}),e.jsx(A,{variant:"outlined",color:"error",startIcon:e.jsx(Me,{}),onClick:m,children:"Cancel"})]}):e.jsx(w,{className:"flex justify-end",children:e.jsx(se,{onClick:m,color:"primary",children:e.jsx(Le,{})})})]})]})})},mt="https://www.rubertogo.com",xt=()=>{const t=[];for(let s=0;s<=23;s++)t.push(`${s<10?"0":""}${s}:00`);return t},Ae=xt(),gt=(t,s)=>{const l=[],n=new Date(t);for(let x=0;x<s;x++){const g=new Date(n);l.push({date:ee(g).format("YYYY-MM-DD"),displayDate:g.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),slots:Ae}),n.setDate(n.getDate()+1)}return l},ut=({van:t,isOpen:s,onClose:l,booking:n})=>{const[x,g]=r.useState([]),[m,u]=r.useState([]),[j,I]=r.useState(0),S=r.useMemo(()=>gt(new Date,7),[]);r.useEffect(()=>{s&&n&&(async()=>{try{const N=await K.get(`${mt}/api/${n._id}`);console.log(N);const p=N.data.selectedSlots||[];u(p),g(p)}catch(N){console.error(N)}})()},[s,n]),r.useEffect(()=>{s||(g(m),I(0))},[s,m]);const i=v=>{const N=v.sort((k,C)=>k.date===C.date?k.time.localeCompare(C.time):k.date.localeCompare(C.date)),p=[];let T=null;return N.forEach((k,C)=>{if(T){const o=ee(`${k.date} ${k.time}`).diff(ee(`${T.date} ${T.time}`),"hour");if(o>1)for(let b=1;b<o;b++){const h=ee(T.time).add(b,"hour").format("HH:mm");p.push({...T,time:h})}}p.push(k),T=k}),p},M=v=>{if(!x.some(N=>N.date===v.date&&N.time===v.time)){const N=[...x,v],p=i(N);g(p)}},z=()=>x.length*t.pricePerHour;return s?Pe.createPortal(e.jsx(D.div,{className:"relative",children:e.jsx(D.div,{className:"fixed inset-0 bg-gray-800 bg-opacity-70 flex items-center justify-center z-50 px-2 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(D.div,{className:"bg-white p-8 rounded-2xl shadow-2xl w-full container h-[90vh] overflow-y-auto relative",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.5},children:[e.jsx("button",{onClick:l,className:"absolute z-40 top-4 right-4 text-red-500 text-2xl rounded-full shadow-md hover:bg-gray-100 p-2",children:e.jsx(he,{})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-green-700 mb-6",children:"Extend Booking Time"}),e.jsx("p",{className:"text-center mb-4",children:"Select additional slots to extend your booking time."}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:S.slice(j,j+7).map((v,N)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 bg-gray-200 p-2 rounded-md",children:v.displayDate}),e.jsx("div",{className:"grid sm:grid-cols-4 grid-cols-2 gap-2 mt-2",children:Ae.map((p,T)=>{const k=x.some(o=>o.date===v.date&&o.time===p),C=m.some(o=>o.date===v.date&&o.time===p);return e.jsxs(D.button,{onClick:()=>M({date:v.date,time:p}),className:`p-2 rounded-lg text-center transition-all ${k?"bg-green-500 text-white":C?"bg-gray-400 text-white":"bg-gray-300 text-gray-700"}`,children:[p,k&&e.jsx(Ye,{className:"text-white"}),C&&e.jsx(he,{className:"text-white"})]},T)})})]},N))}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx(A,{variant:"contained",color:"secondary",onClick:l,children:"Cancel"}),e.jsxs(A,{variant:"contained",color:"primary",onClick:()=>alert(`Total Price: $${z()}`),children:["Proceed - $",z()]})]})]})})}),document.body):null},ht=({isBookingActive:t,bookingId:s,onClose:l,currentContractImages:n,vanId:x})=>{const[g,m]=r.useState(!1),[u,j]=r.useState([]),[I,S]=r.useState(!1),{translations:i}=ue(),M="https://www.rubertogo.com",z=localStorage.getItem("accessToken"),v=async()=>{try{await K.post(`${M}/api/booking/${s}/accept-all-damage-images`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`}}),l(),window.location.reload()}catch(o){console.error("Error saving acknowledgment:",o)}},N=()=>{j([...u,{damageType:"",description:"",imageUrl:""}])},p=(o,b,h)=>{const B=[...u];B[o][b]=h,j(B)},T=o=>{j(u.filter((b,h)=>h!==o))},k=async(o,b)=>{try{const h=new FormData;h.append("file",o),S(!0);const P=(await K.post(`${M}/api/upload`,h,{headers:{"Content-Type":"multipart/form-data"}})).data.imageURL;p(b,"imageUrl",P)}catch(h){console.error("Error uploading image:",h)}finally{S(!1)}},C=async()=>{try{const o=u.map(h=>({damageType:h.damageType,description:h.description,image:h.imageUrl})),b=await K.post(`${M}/api/vans/${x}/contracts`,o,{headers:{Authorization:`Bearer ${z}`}});j([]),m(!1),window.location.reload()}catch(o){console.error("Error saving damages:",o)}};return e.jsx(Ne,{open:t,onClose:l,children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50 px-4 sm:px-0",children:e.jsxs("div",{className:"w-full max-w-5xl bg-white rounded-xl shadow-2xl sm:p-8 p-6 relative min-h-[70vh] max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx(d,{variant:"h5",className:"text-2xl font-bold text-green-900 tracking-wide border-b-2 border-gray-200 pb-2",children:"Danni presenti: ne vedi altri?"}),e.jsx(se,{onClick:l,className:"absolute top-0 right-4 bg-gray-200 hover:bg-gray-300 rounded-full",children:e.jsx(Se,{size:20})})]}),g?e.jsxs("div",{children:[e.jsx("div",{className:"overflow-y-auto max-h-72 space-y-4",children:u.map((o,b)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center bg-gray-100 p-4 rounded-lg shadow-md",children:[e.jsx(F,{label:"Posizione danno",variant:"outlined",value:o.damageType,onChange:h=>p(b,"damageType",h.target.value),className:"w-full"}),e.jsx(F,{label:"Descrizione del danno",variant:"outlined",value:o.description,onChange:h=>p(b,"description",h.target.value),className:"w-full"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs(A,{variant:"outlined",className:"text-blue-500 border-blue-500 hover:bg-blue-100 hover:border-blue-700",component:"label",children:["Carica immagine",e.jsx("input",{type:"file",hidden:!0,onChange:h=>{h.target.files[0]&&k(h.target.files[0],b)}})]}),o.imageUrl&&e.jsx("img",{src:o.imageUrl,alt:"Damage",className:"w-16 h-16 object-cover rounded-md mt-2 shadow-md"})]}),e.jsx(se,{onClick:()=>T(b),className:"text-red-500 hover:bg-red-100",children:e.jsx(Re,{size:20})})]},b))}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(A,{variant:"outlined",className:"border-gray-500 text-gray-600 hover:bg-gray-100 px-6 py-2 rounded-lg font-medium transition-all duration-300",onClick:()=>m(!1),children:"Indietro"}),e.jsx(A,{variant:"contained",className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-lg shadow-lg hover:shadow-xl font-medium transition-all duration-300",onClick:N,children:"Aggiungi danno"}),e.jsx(A,{variant:"contained",className:"bg-gradient-to-r from-green-500 to-green-700 text-white px-6 py-2 rounded-lg shadow-lg hover:shadow-xl font-medium transition-all duration-300",onClick:C,disabled:I,children:I?e.jsx(Oe,{size:20,color:"inherit"}):"Salva"})]})]}):e.jsxs(e.Fragment,{children:[n&&n.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-4 flex-wrap",children:n.map((o,b)=>e.jsx("div",{className:"w-24 h-24 overflow-hidden rounded-lg shadow-md transform hover:scale-105 transition-transform duration-300",children:e.jsx("img",{src:o.image,alt:`Damage ${b+1}`,className:"w-full h-full object-cover"})},b))})}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(A,{variant:"outlined",className:"border-green-500 text-green-600 hover:bg-green-100 font-medium px-6 py-2 rounded-lg transition-all duration-300",onClick:v,children:"Confermo i danni presenti"}),e.jsx(A,{variant:"contained",className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-lg shadow-lg hover:shadow-xl font-medium transition-all duration-300",onClick:()=>m(!0),children:"Aggiungi danno"})]})]})]})})})};ee.extend(Ve);const ve=H(w)(({theme:t})=>({padding:"3rem",background:"linear-gradient(135deg, #ffffff, #f9fafc)",borderRadius:"1rem",boxShadow:"0px 10px 15px rgba(0, 0, 0, 0.1)",[t.breakpoints.down("sm")]:{padding:"1rem"}})),W=H(w)(({theme:t})=>({display:"flex",alignItems:"center",padding:"0.4rem 0",borderBottom:"1px solid #e5e7eb",":last-child":{borderBottom:"none"}})),U=H(w)(({theme:t})=>({color:"#ff4b2b",fontSize:"1.5rem",marginRight:"0.75rem"})),V=H(d)(({theme:t})=>({fontWeight:500,color:"#333"})),_=H("span")(({theme:t})=>({color:"#555",fontWeight:400,marginLeft:"0.5rem"})),ft=H(ae)(({theme:t})=>({borderRadius:"1.5rem",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",overflow:"hidden",maxWidth:"100%",margin:"auto",[t.breakpoints.down("sm")]:{margin:"0.5rem",borderRadius:"1rem"}})),pt=H(w)(({theme:t})=>({display:"flex",alignItems:"center",background:"linear-gradient(90deg, #ff4b2b, #ff416c)"})),bt=H(w)(({theme:t})=>({padding:"0.5rem",backgroundColor:"#f9fafb",textAlign:"center"}));H(w)(({theme:t})=>({padding:"1rem",display:"flex",justifyContent:"center",[t.breakpoints.down("sm")]:{padding:"0.75rem"}}));const ke=({bookingData:t})=>{const[s,l]=r.useState(null),[n,x]=r.useState(null),[g,m]=r.useState(!1),[u,j]=r.useState(!1),[I,S]=r.useState(!1),{translations:i}=ue(),{lang:M}=Te(),[z,v]=r.useState(null),[N,p]=r.useState(0),[T,k]=r.useState(!1);r.useEffect(()=>{if(t){const f=setInterval(()=>{const Y=$(),y=t?.currentBooking?.timeZone,q=$.tz(t?.currentBooking?.startTime,"YYYY-MM-DDTHH:mm:ss",y),X=$.tz(t?.currentBooking?.endTime,"YYYY-MM-DDTHH:mm:ss",y),Q=q.diff(Y,"milliseconds"),a=X.diff(Y,"milliseconds");if(l(Q),x(a),Q<=0&&a>0?(j(!0),t?.currentBooking?.damageImagesAccepted===!1&&k(!0)):j(!1),t?.upcomingBooking?.startTime){const c=$.tz(t?.upcomingBooking?.startTime,"YYYY-MM-DDTHH:mm:ss",y);p(c.diff(Y,"milliseconds"))}},1e3);return()=>clearInterval(f)}},[t]);const C=f=>{const Y=Math.floor(f/1e3);if(Y<=0)return"Time's up";const y=Math.floor(Y/3600),q=Math.floor(Y%3600/60),X=Y%60;return`${String(y).padStart(2,"0")}h ${String(q).padStart(2,"0")}m ${String(X).padStart(2,"0")}s`},o=(f,Y)=>{Y!=="clickaway"&&m(!1)},b=Array.isArray(t?.upcomingBooking)?t.upcomingBooking.map(f=>({id:f._id,vanName:f.vanId.name.en,plateNumber:f.vanId.plateNumber,startTime:f.startTime,amount:`${f.totalPrice} CHF`,status:f.status})):[],h=[{field:"vanName",headerName:"Van Name",width:200},{field:"plateNumber",headerName:"Plate Number",width:150},{field:"startTime",headerName:"Booking Start Time",width:200,renderCell:f=>$(f.value).utc().format("DD-MM-YYYY HH:mm")},{field:"status",headerName:"Booking Status",width:150,renderCell:f=>e.jsx("span",{className:`font-semibold ${f.value==="accepted"?"text-green-500":f.value==="pending"?"text-yellow-500":"text-red-500"}`,children:f.value})},{field:"amount",headerName:"Amount",width:150,align:"right"}],B=()=>{S(!1)},P=()=>{k(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center w-full ",children:[e.jsx(D.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full",children:e.jsxs(ft,{children:[e.jsxs(pt,{children:[e.jsx(te,{size:40,className:"text-white mr-4 ml-5 p-2"}),e.jsx(d,{variant:"h5",className:"font-bold text-white p-2",children:i.myAccount.currentbooking})]}),e.jsx(bt,{children:t?e.jsx(e.Fragment,{children:u?e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"h4",className:"font-bold text-gray-800 mb-2",children:i.booking.timeRemaining}),e.jsx(d,{variant:"h2",className:"font-extrabold text-red-600",children:C(n)}),e.jsx(d,{variant:"body2",className:"text-gray-500",children:i.booking.enjoyBooking})]}):s>0?e.jsxs("div",{className:"p-4",children:[e.jsx(d,{variant:"h4",className:"font-bold text-gray-800 mb-2",children:"Starts In"}),e.jsx(d,{variant:"h3",className:"font-extrabold text-red-600",children:C(s)}),e.jsx(d,{variant:"body2",className:"text-gray-500",children:i.booking.getReady})]}):e.jsxs(w,{className:"text-center p-6 ",children:[e.jsx(d,{variant:"h4",className:"font-bold text-gray-800 mb-2",children:i.booking.noActiveBooking}),e.jsx(d,{variant:"body2",className:"text-gray-500 mb-4",children:i.booking.noActiveBookingDescription}),e.jsx(fe,{to:`/${M}/vans`,className:"text-white rounded-lg text-lg font-semibold shadow-md hover:shadow-lg transition-shadow",children:e.jsx(A,{variant:"contained",color:"primary",children:i.booking.exploreVans})})]})}):e.jsxs(w,{className:"text-center",children:[e.jsx(d,{variant:"h4",className:"font-bold text-gray-800 mb-2",children:i.booking.noBookingData}),e.jsx(d,{variant:"body2",className:"text-gray-500 mb-4",children:i.booking.noBookingDataDescription}),e.jsx(fe,{to:`/${M}/vans`,className:"text-white rounded-lg text-lg font-semibold shadow-md hover:shadow-lg transition-shadow",children:e.jsx(A,{variant:"contained",color:"primary",children:i.booking.exploreVans})})]})}),z&&z?.startTime&&e.jsx(ve,{children:e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(re,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.upcomingBookingStartTime,":"," ",e.jsx(_,{children:z.startTime})]})]})}),t&&t?.currentBooking&&e.jsxs(ve,{children:[e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(te,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.vanName,":"," ",e.jsx(_,{children:t?.currentBooking?.vanId?.name.en})]})]}),e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(pe,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.pickupLocation,":"," ",e.jsx(_,{children:t?.currentBooking?.vanId?.location?.address})]})]}),e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(pe,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.dropLocation,":"," ",e.jsx(_,{children:t?.currentBooking?.vanId?.location?.address})]})]}),e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(re,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.startDateTime,":",e.jsx(_,{children:$(t?.currentBooking?.startTime).utc().format("DD-MM-YYYY HH:mm")})]})]}),e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(re,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.endDateTime,":",e.jsx(_,{children:$(t?.currentBooking?.endTime).utc().format("DD-MM-YYYY HH:mm")})]})]}),e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(Ee,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.totalPrice,":",e.jsxs(_,{children:[t?.currentBooking?.totalPrice," CHF"]})]})]}),e.jsxs(W,{children:[e.jsx(U,{children:e.jsx(Fe,{})}),e.jsxs(V,{variant:"body1",children:[i.booking.status,":"," ",e.jsx(_,{children:t?.currentBooking?.status})]})]})]})]})}),e.jsx(He,{open:g,autoHideDuration:6e3,onClose:o,children:e.jsx(We,{onClose:o,severity:"success",sx:{width:"100%"},children:i.booking.bookingExtendedSuccess})})]}),e.jsxs("div",{className:"w-full border-2 p-5 rounded-md border-red-200 mt-5 ",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:i.booking.upcomingBookings}),e.jsx("div",{className:"block md:hidden",children:b.map(f=>e.jsxs("div",{className:"mb-4 p-4 bg-white shadow-md rounded-lg border border-red-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-2",children:[i.booking.van,": ",f.vanName]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsxs("span",{className:"font-bold",children:[i.booking.plateNumber,":"]})," ",f.plateNumber]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsxs("span",{className:"font-bold",children:[i.booking.bookingStartTime,":"]})," ",$(f.startTime).utc().format("DD-MM-YYYY HH:mm")]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsxs("span",{className:"font-bold",children:[i.booking.bookingStartTime,":"]})," ",f.amount," CHF"]}),e.jsxs("p",{className:`text-sm font-bold ${f.status==="accepted"?"text-green-500":f.status==="pending"?"text-yellow-500":"text-red-500"}`,children:["Status: ",f.status]})]},f.id))}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"h-[calc(80vh-200px)]  w-full bg-white shadow-md rounded-lg border border-gray-200",children:e.jsx(Ue,{rows:b,columns:h,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,disableSelectionOnClick:!0,sx:{height:"100%",width:"100%",padding:"1rem"}})})})]}),e.jsx(ut,{booking:t?.currentBooking,van:t?.currentBooking?.vanId,isOpen:I,onClose:B}),e.jsx(ht,{isBookingActive:T,bookingId:t?.currentBooking?._id,onClose:P,currentContractImages:t?.currentBooking?.vanId?.contractImages,vanId:t?.currentBooking?.vanId?._id})]})},yt=({bookingHistory:t})=>{const s=Be();return!t||t.length===0?e.jsxs("div",{className:"p-6 bg-gradient-to-br from-red-600 to-red-600 rounded-lg shadow-lg",children:[e.jsx(d,{variant:"h3",className:"text-2xl font-bold text-white mb-4",children:"Booking History"}),e.jsx(d,{variant:"body2",style:{marginBottom:"1rem"},className:"text-white mb-4",children:"No booking history available."})]}):e.jsxs("div",{className:"p-6 bg-gradient-to-br from-red-600 to-red-600 rounded-lg shadow-lg",children:[e.jsx(d,{variant:"h4",className:"text-2xl font-bold text-white mb-4",children:"Booking History"}),e.jsx(d,{variant:"body2",style:{marginBottom:"1rem"},className:"text-white mb-4",children:"Your previous bookings will be displayed here."}),["mobile","tablet","small-desktop"].includes(s.deviceType)?e.jsx("div",{className:"space-y-4",children:t.map(l=>e.jsx(ae,{className:"bg-white text-gray-800 shadow-md rounded-lg overflow-hidden",variant:"outlined",children:e.jsxs(Ce,{children:[e.jsxs(d,{variant:"h6",className:"font-semibold text-red-500 mb-2",children:["Van Name: ",l.vanId?.name?.en||"N/A"]}),e.jsxs(d,{variant:"body2",className:"text-gray-700",children:[e.jsx("strong",{children:"Booking Date:"})," ",l.startDate]}),e.jsxs(d,{variant:"body2",className:"text-gray-700",children:[e.jsx("strong",{children:"Return Date:"})," ",l.endDate]}),e.jsxs(d,{variant:"body2",className:"text-gray-700",children:[e.jsx("strong",{children:"Status:"})," ",l.status]}),e.jsxs(d,{variant:"body2",className:"text-gray-700",children:[e.jsx("strong",{children:"Amount:"})," $",l.totalPrice]})]})},l._id))}):e.jsx(_e,{component:ge,className:"mt-4 rounded-lg overflow-hidden",children:e.jsxs(qe,{children:[e.jsx(Ze,{children:e.jsxs(be,{children:[e.jsx(R,{sx:{color:"#000",textAlign:"left"},className:" text-white font-semibold",children:"Van Name"}),e.jsx(R,{sx:{color:"#000",textAlign:"center"},className:" text-white font-semibold",children:"Booking Date"}),e.jsx(R,{sx:{color:"#000",textAlign:"center"},className:" text-white font-semibold",children:"Return Date"}),e.jsx(R,{sx:{color:"#000",textAlign:"center"},className:" text-white font-semibold",children:"Status"}),e.jsx(R,{sx:{color:"#000",textAlign:"center"},className:" text-white font-semibold",children:"Amount"})]})}),e.jsx(Ge,{children:t.map(l=>e.jsxs(be,{className:"hover:bg-red-200 transition duration-300",children:[e.jsx(R,{sx:{color:"#000",textAlign:"left"},children:l.vanId?.name?.en||"N/A"}),e.jsx(R,{sx:{color:"#000",textAlign:"center"},children:l.startDate}),e.jsx(R,{children:l.endDate}),e.jsx(R,{sx:{color:"#fff",textAlign:"center"},className:`text-center text-white ${l.status==="completed"?"bg-green-500":"bg-red-500"}`,children:l.status}),e.jsxs(R,{sx:{color:"#000",textAlign:"center"},children:["$",l.totalPrice]})]},l._id))})]})})]})},jt=({bookings:t,onPay:s})=>{const l=Ke(),n=Je(l.breakpoints.down("sm"));if(!t.length)return e.jsx(w,{textAlign:"center",mt:4,px:2,children:e.jsx(d,{variant:"h6",color:"textSecondary",children:"No pending bookings found."})});const x=g=>{s&&s(g)};return e.jsx("div",{className:`overflow-y-auto ${n?"h-[50vh]":"h-[60vh]"}`,children:e.jsxs(w,{py:2,px:n?1:3,children:[e.jsx(d,{variant:n?"h6":"h4",gutterBottom:!0,color:"warning",textAlign:"center",sx:{borderBottom:"2px solid #ff0707",display:"inline-block",padding:"0 1rem",marginBottom:"1rem",fontWeight:"bold",fontSize:n?"1.25rem":"1.5rem",color:"#ff0707"},children:"Pending Bookings"}),e.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,ease:"easeOut"},children:t.map(g=>{const m=new Date(g.startTime),u=new Date(g.endTime),j=String(m.getUTCDate()).padStart(2,"0"),I=String(m.getUTCMonth()+1).padStart(2,"0"),S=m.getUTCFullYear(),i=String(u.getUTCDate()).padStart(2,"0"),M=String(u.getUTCMonth()+1).padStart(2,"0"),z=u.getUTCFullYear(),v=`${j}-${I}-${S}`,N=`${i}-${M}-${z}`,p=m.toISOString().split("T")[1].split(".")[0],T=u.toISOString().split("T")[1].split(".")[0];return e.jsx(D.div,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},className:"mb-4",children:e.jsx(ae,{elevation:n?2:3,sx:{background:"linear-gradient(145deg, #ffffff, #f0f0f0)",borderRadius:"16px",overflow:"hidden",boxShadow:n?"0px 2px 6px rgba(0, 0, 0, 0.15)":"0px 4px 12px rgba(0, 0, 0, 0.2)"},children:e.jsx(Ce,{children:e.jsxs(w,{display:"flex",flexDirection:n?"column":"row",justifyContent:"space-between",alignItems:n?"flex-start":"center",children:[e.jsxs(w,{children:[e.jsx(d,{variant:"h6",color:"textPrimary",sx:{fontWeight:"bold",fontSize:n?"1rem":"1.25rem"},children:`Van: ${g.vanId.name.en}`}),e.jsxs(d,{variant:"body2",color:"textSecondary",sx:{fontSize:n?"0.85rem":"1rem",marginBottom:n?"0.5rem":"0"},children:["Start:"," ",e.jsxs("span",{style:{color:"#ff0707"},children:[v," ",p]})]}),e.jsxs(d,{variant:"body2",color:"textSecondary",sx:{fontSize:n?"0.85rem":"1rem",marginBottom:n?"0.5rem":"0"},children:["End:"," ",e.jsxs("span",{style:{color:"#ff0707"},children:[N," ",T]})]})]}),e.jsx(A,{variant:"contained",size:n?"small":"large",onClick:()=>x(g._id),sx:{background:"linear-gradient(90deg, #ff0707, #e60000)",color:"white",fontWeight:"bold",boxShadow:"0px 4px 12px rgba(255, 7, 7, 0.5)","&:hover":{background:"linear-gradient(90deg, #e60000, #990000)",boxShadow:"0px 6px 16px rgba(230, 0, 0, 0.6)"},borderRadius:"8px",paddingX:n?2:3,marginTop:n?"1rem":"0",alignSelf:n?"center":"flex-start"},children:"Pay Now"})]})})})},g._id)})})]})})},we="https://www.rubertogo.com";function vt({bookingData:t}){const[s,l]=r.useState(!0),[n,x]=r.useState(!1),[g,m]=r.useState(!1),[u,j]=r.useState(!1),[I,S]=r.useState(!1),[i,M]=r.useState(null),[z,v]=r.useState(!1),[N,p]=r.useState(""),[T,k]=r.useState(!1),C=localStorage.getItem("accessToken");r.useEffect(()=>{if(t&&t.currentBooking){const B=t.currentBooking.timeZone||"UTC",P=$().tz(B);if(t.currentBooking.startTime){const Y=$.tz(t.currentBooking.startTime,"YYYY-MM-DDTHH:mm:ss",B).clone().subtract(20,"minutes");v(P.isSameOrAfter(Y))}else v(!1)}else v(!1)},[t]),r.useEffect(()=>{t?.currentBooking?.vanLock?.isLocked!==null&&l(t?.currentBooking?.vanLock?.isLocked)},[t]);const o=async()=>{if(!z){O.error("Booking has not started yet.");return}S(!0);try{const B=await K.post(`${we}/api/fleet2track/lock-unlock`,{vanId:t?.currentBooking?.vanId?._id,plate:t?.currentBooking?.vanId?.plateNumber,enableLock:!s,bookingId:t?.currentBooking?._id},{headers:{Authorization:`Bearer ${C}`}});B.data.message==="OTP sent to your email."?(j(!0),x(!0)):(M(B.data.isLocked),m(!0),k(!0),setTimeout(()=>k(!1),3e4),setTimeout(()=>confirmLockUnlock(!1),6e4))}catch(B){O.error(B.response?.data?.error||"Failed to process lock/unlock request.")}finally{S(!1)}},b=async B=>{S(!0);try{const P=await K.post(`${we}/api/fleet2track/lock-unlock`,{vanId:t?.currentBooking?.vanId?._id,plate:t?.currentBooking?.vanId?.plateNumber,enableLock:!s,bookingId:t?.currentBooking?._id,otp:B},{headers:{Authorization:`Bearer ${C}`}});P.data.isLocked!==void 0?(l(P.data.isLocked),M(P.data.isLocked),O.success(P.data.message),x(!1),m(!0)):O.error("OTP verification failed. Please try again.")}catch(P){O.error(P.response?.data?.error||"Failed to verify OTP. Try again.")}finally{S(!1)}};r.useEffect(()=>{setTimeout(()=>{m(!1)},1e5)},[g]);const h=async B=>{m(!1),B?o():(l(i),O.success(`Furgone ${s?"sbloccato":"bloccato"} con successo.`))};return console.log("isLocked",s),e.jsxs(w,{component:D.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"max-w-md sm:max-w-full mx-auto",children:[e.jsxs(ge,{elevation:4,className:"p-8 rounded-xl shadow-lg bg-white",children:[e.jsx(d,{variant:"h5",className:"text-[#ff0707] font-bold mb-4",children:"Blocco/Sblocco furgone"}),e.jsx(d,{variant:"body1",className:"text-gray-600 mb-6",style:{marginBottom:"1rem"},children:"Utilizza questa schermata per gestire il blocco e sblocca del furgone prenotato."}),e.jsx(xe,{className:"mb-6"}),e.jsxs(w,{className:"flex flex-col sm:flex-row items-center sm:items-start sm:justify-between justify-center p-6 mb-4 rounded-2xl shadow-xl ",sx:{background:s?"rgba(255, 230, 230, 0.7)":"rgba(230, 255, 237, 0.7)",backdropFilter:"blur(10px)",border:`2px solid ${s?"#ff7070":"#70ffb3"}`,borderRadius:"20px",boxShadow:`0 10px 20px ${s?"rgba(255, 0, 0, 0.3)":"rgba(0, 191, 165, 0.3)"}`,transition:"background 0.3s ease, border 0.3s ease, box-shadow 0.3s ease",maxWidth:"900px",margin:"0 auto"},children:[e.jsxs(d,{variant:"h4",className:"text-center sm:text-left",sx:{fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.5rem",md:"2rem"},background:s?"linear-gradient(90deg, #ff4d4d, #c70000)":"linear-gradient(90deg, #70ffb3, #009f8b)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:{xs:"1rem",sm:0},transition:"background 0.3s ease",marginTop:"1rem"},children:["Stato corrente: ",s?"Bloccato":"Sbloccato"]}),e.jsx(D.div,{initial:{scale:1},animate:{scale:1.1},whileHover:{scale:1.2,rotate:s?-5:5},transition:{type:"spring",stiffness:300,damping:10},style:{marginTop:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(se,{"aria-label":s?"Van is Locked":"Van is Unlocked",size:"large",sx:{backgroundColor:s?"#ff7070":"#70ffb3",color:"#fff",boxShadow:`0 5px 15px ${s?"rgba(255, 0, 0, 0.5)":"rgba(0, 191, 165, 0.5)"}`,transition:"transform 0.3s ease, background-color 0.3s ease","&:hover":{backgroundColor:s?"#c70000":"#009f8b",transform:"scale(1.15)"}},children:s?e.jsx(ye,{fontSize:"inherit"}):e.jsx(ie,{fontSize:"inherit"})})})]}),I&&e.jsx(D.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"50px",height:"50px",margin:"auto",border:"4px solid #ccc",borderTop:"4px solid #ff0707",borderRadius:"50%"}}),e.jsx(A,{onClick:o,variant:"contained",color:s?"primary":"secondary",startIcon:s?e.jsx(Xe,{}):e.jsx(ie,{}),fullWidth:!0,disabled:!z||I,sx:{marginTop:"1rem",paddingY:1.5,backgroundColor:s?"#ff0707":"#00bfa5","&:hover":{backgroundColor:s?"#c70000":"#009f8b"}},children:s?"Sblocca furgone":"Blocca furgone"})]}),e.jsx(lt,{open:n,handleClose:()=>x(!1),onVerify:b,onResendOtp:o}),e.jsxs(Qe,{open:g,onClose:()=>m(!1),children:[e.jsxs(et,{sx:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"2rem"},children:[e.jsx(D.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:100},className:"flex items-center justify-center",style:{width:"100px",height:"100px",borderRadius:"50%",background:i?"#ff0707":"#00bfa5"},children:i?e.jsx(ye,{fontSize:"large",style:{color:"#fff"}}):e.jsx(ie,{fontSize:"large",style:{color:"#fff"}})}),e.jsxs(d,{variant:"h6",sx:{marginTop:2,color:i?"#ff0707":"#00bfa5"},children:["Il furgone dovrebbe essere ",i?"Bloccato":"Sbloccato","!"]}),e.jsx(d,{variant:"body2",sx:{marginTop:1},children:"Vuoi riprovare?"})]}),e.jsxs(tt,{sx:{display:"flex",justifyContent:"center",gap:"1rem",paddingBottom:"1rem"},children:[e.jsx(A,{onClick:()=>h(!1),color:"secondary",variant:"outlined",children:"No"}),e.jsxs(A,{onClick:()=>h(!0),variant:"outlined",children:["Riprova (",T?"30s":"",")"]})]})]})]})}const G="https://www.rubertogo.com",kt=rt("pk_live_51PwWTGDCK8rR2FJAZlmM7KPakXDO09KCBJRjUT5QRFNRRTvlctb9KG8D9bxZ38RRsG6np5RYrJmVG2AeP22KXq7P00rQKtFDnq"),Ct=()=>{const t=Be(),s=st(),l=at(),{lang:n}=Te(),[x,g]=r.useState(!0),m=localStorage.getItem("accessToken"),[u,j]=r.useState(null),[I,S]=r.useState([]),[i,M]=r.useState(null),[z,v]=r.useState([]),{logout:N}=it(),[p,T]=r.useState(null),[k,C]=r.useState(!1),{translations:o}=ue(),b=()=>{if(!u?.currentBooking)return!0;const a=u?.currentBooking?.vanId?.trackingDevice,c=u.currentBooking.startTime,L=u.currentBooking.endTime,Z=u.currentBooking.vanLock;if(console.log(a),!a||a?.type!=="fleet2track"||!Z)return!0;const E=u.currentBooking.timeZone||"UTC",J=$().tz(E),ne=$.tz(c,"YYYY-MM-DDTHH:mm:ss",E),oe=$.tz(L,"YYYY-MM-DDTHH:mm:ss",E),Ie=ne.clone().subtract(20,"minutes"),ze=oe.clone().subtract(20,"minutes");return!!(J.isBefore(Ie)||J.isSameOrAfter(ze))},h=()=>{if(!u?.currentBooking)return o.vanlockMessages.noBooking;const{trackingDevice:a,startTime:c,endTime:L}=u.currentBooking,Z=u.currentBooking.timeZone||"UTC",E=$().tz(Z),J=$.tz(c,"YYYY-MM-DDTHH:mm:ss",Z),ne=$.tz(L,Z),oe=J.clone().subtract(20,"minutes");return E.isSameOrAfter(oe)?o.vanlockMessages.unlockAtStart:!a||a?.type!=="fleet2track"?o.vanlockMessages.notAvailable:E.isAfter(ne.clone().subtract(20,"minutes"))?o.vanlockMessages.lockAndEnd:o.vanlockMessages.ready},B=async()=>{try{const c=(await K.get(`${G}/api/reviews/pending`,{headers:{Authorization:`Bearer ${m}`}})).data;c.length>0&&(T(c[0]),C(!0))}catch(a){console.warn("Error fetching pending reviews:",a)}},P=async a=>{try{!a.vanId&&p?.vanId&&(a.vanId=p.vanId);const c=await fetch(`${G}/api/reviews/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(a)});if(c.ok)O.success("Review submitted successfully!"),T(null),C(!1);else{const L=await c.json();O.error(L.error||"Failed to submit review.")}}catch{console.warn("Failed to submit review. Please try again.")}},f=()=>N();r.useEffect(()=>{const a=()=>{if(window.innerWidth<768){const c=window.scrollY;g(c<100)}};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const y=new URLSearchParams(l.search).get("page");r.useEffect(()=>{const a=()=>{window.innerWidth>=768&&!y&&s(`/${n}/account?page=currentbooking`)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[y,n,s]);const q=a=>{s(`/${n}/account?page=${a}`)};r.useEffect(()=>{m&&(async()=>{try{const c=await fetch(`${G}/api/user-profile`,{headers:{Authorization:`Bearer ${m}`}});if(c.ok){const L=await c.json();M(L.user)}else console.error("Failed to fetch account data")}catch(c){console.error("Error fetching account data:",c)}})()},[m]),r.useEffect(()=>{(async()=>{try{const c=await fetch(`${G}/api/current`,{headers:{Authorization:`Bearer ${m}`}});if(c.ok){const L=await c.json();j(L)}else await c.json()}catch{j(null)}})(),B()},[y,m]),r.useEffect(()=>{y==="bookinghistory"&&(async()=>{try{const c=await fetch(`${G}/api/history`,{headers:{Authorization:`Bearer ${m}`}});if(c.ok){const L=await c.json();S(L)}else console.error("Failed to fetch booking history")}catch(c){console.error("Error fetching booking history:",c)}})()},[y,m]),r.useEffect(()=>{y==="pendingbookings"&&(async()=>{try{const c=await fetch(`${G}/api/pending`,{headers:{Authorization:`Bearer ${m}`}});if(console.log(c),c.ok){const L=await c.json();v(L)}else console.error("Failed to fetch pending bookings")}catch(c){console.error("Error fetching pending bookings:",c)}})()},[y,m]);const X=async a=>{try{const c=await fetch(`${G}/api/complete-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({bookingId:a})});if(!c.ok){const J=await c.json();O.error(J.error||"Failed to initiate payment.");return}const{sessionId:L}=await c.json(),Z=await kt,{error:E}=await Z.redirectToCheckout({sessionId:L});E&&(console.error("Stripe Redirect Error:",E),O.error("Failed to redirect to payment. Please try again."))}catch(c){console.warn("Error completing payment:",c)}},Q=()=>{switch(y){case"currentbooking":return e.jsx(ke,{bookingData:u});case"bookinghistory":return e.jsx(yt,{bookingHistory:I});case"accountsettings":return e.jsx(dt,{initialUserData:i});case"pendingbookings":return e.jsx(jt,{bookings:z,onPay:X});case"vanlockunlock":return e.jsx(vt,{bookingData:u});default:return e.jsx(ke,{bookingData:u})}};return e.jsxs("div",{className:"bg-gradient-to-b from-white to-white relative sm:h-[85vh] h-[75vh] sm:py-10 py-6 overflow-y-scroll",children:[e.jsxs("div",{className:"shadow-sm rounded-b-3xl relative",children:[e.jsxs(D.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 225",initial:{y:0},animate:{y:[0,-100,0]},transition:{repeat:1/0,duration:8},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#ff0707",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#660000",stopOpacity:1}})]})}),e.jsx("path",{fill:"url(#grad1)",d:"M0,64L30,85.3C60,107,120,149,180,144C240,139,300,85,360,85.3C420,85,480,139,540,160C600,181,660,171,720,149.3C780,128,840,96,900,85.3C960,75,1020,85,1080,101.3C1140,117,1200,139,1260,160C1320,181,1380,203,1410,213.3L1440,224L1440,0L1410,0C1380,0,1320,0,1260,0C1200,0,1140,0,1080,0C1020,0,960,0,900,0C840,0,780,0,720,0C660,0,600,0,540,0C480,0,420,0,360,0C300,0,240,0,180,0C120,0,60,0,30,0L0,0Z"})]}),e.jsx(w,{className:`flex flex-col items-center text-center ${x?"sm:absolute sm:top-20 w-full z-20  border-b border-gray-200":"absolute sm:top-20 w-full z-20 bg-white  border-b border-gray-200"}`,style:{transition:"all 0.3s ease"},children:e.jsxs(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:`${x?"flex flex-col items-center rounded-full  p-2":"flex items-center space-x-2"}`,children:[e.jsx(nt,{alt:"User Profile",sx:{width:x?80:60,height:x?80:60,color:"white",backgroundColor:"#ff0707",border:"3px solid white",boxShadow:x?"0px 4px 12px rgba(0, 0, 0, 0.15)":"0px 6px 20px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease"},className:"mb-4 sm:shadow-2xl"}),e.jsxs("div",{className:`${x?"text-center":"text-left -mt-4 "}`,children:[e.jsxs(d,{variant:"h6",className:`text-xl ${x?"text-[#ff0707] font-bold":"text-gray-800 font-semibold"}`,children:[i?.firstName," ",i?.lastName]}),e.jsx(d,{variant:"body2",className:"text-gray-600",children:i?.email})]})]})})]}),e.jsxs("div",{className:`${["large-desktop","extra-large-desktop"].includes(t.deviceType)?"hidden":`max-w-full ${x?"relative max-w-full z-40 bg-white  flex justify-center overflow-x-auto":"relative max-w-full z-40 bg-white shadow-md flex md:justify-center overflow-x-auto"}`}`,style:{transition:"all 0.3s ease",padding:x?"0.5rem":"0.3rem"},children:[e.jsx("div",{className:"absolute left-0 top-0 h-full w-16 bg-gradient-to-r from-white to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-16 bg-gradient-to-l from-white to-transparent pointer-events-none"}),e.jsx("div",{style:{display:"flex",whiteSpace:"nowrap",gap:"8px",maxWidth:"100%",justifyContent:"start",overflowX:"auto"},children:y?e.jsx("div",{style:{display:"flex",gap:"8px",padding:"0.3rem"},children:[{key:"currentbooking",icon:e.jsx(te,{size:20})},{key:"bookinghistory",icon:e.jsx(le,{size:20})},{key:"pendingbookings",icon:e.jsx(ce,{size:20})},{key:"accountsettings",icon:e.jsx(de,{size:20})},{key:"vanlockunlock",icon:e.jsx(me,{size:20})}].map(a=>e.jsxs(A,{onClick:()=>q(a.key),variant:y===a.key?"contained":"text",style:{fontSize:"10px",minWidth:"80px",whiteSpace:"nowrap",background:y===a.key?"linear-gradient(to right, #ff0707, #660000)":"transparent",color:y===a.key?"white":"#ff0707",transition:"background 0.3s ease",border:y===a.key?"none":"1px solid #ff0707",display:"flex",justifyContent:"center",alignItems:"center",gap:"4px"},children:[a.icon,e.jsx("span",{children:o.myAccount[a.key]})]},a.key))}):e.jsxs("div",{className:"grid grid-cols-2 xs:grid-cols-1 gap-4 ",children:[[{name:o.myAccount.currentbooking,icon:e.jsx(te,{size:40,className:"text-red-500 mb-2"}),page:"currentbooking"},{name:h(),icon:e.jsx(me,{size:40,className:b()?"text-gray-500 mb-2":"text-red-500 mb-2"}),page:"vanlockunlock",disabled:b()},{name:o.myAccount.bookinghistory,icon:e.jsx(le,{size:40,className:"text-red-500 mb-2"}),page:"bookinghistory"},{name:o.myAccount.pendingbookings,icon:e.jsx(ce,{size:40,className:"text-red-500 mb-2"}),page:"pendingbookings"},{name:o.myAccount.accountsettings,icon:e.jsx(de,{size:40,className:"text-red-500 mb-2"}),page:"accountsettings"}].map(a=>e.jsxs(ae,{onClick:()=>{a.disabled||q(a.page)},className:`flex flex-col items-center justify-center p-4 cursor-pointer rounded-xl 
                    ${a.disabled?"bg-gray-300 cursor-not-allowed opacity-50":"bg-gradient-to-br from-gray-400 to-gray-600 hover:scale-105 transform transition-all duration-300"}`,children:[a.icon,e.jsx(d,{variant:"body1",className:`text-xs font-semibold text-center ${a.disabled?"text-gray-500":"text-red-500"}`,sx:{whiteSpace:"wrap",textAlign:"center",fontSize:"18px"},children:a.name})]},a.page)),e.jsxs(ae,{onClick:f,className:"flex flex-col items-center justify-center p-6 cursor-pointer rounded-xl bg-gradient-to-br from-blue-900 to-blue-900 hover:scale-105 transform transition-all duration-300",children:[e.jsx(ot,{size:40,className:"text-blue-950 mb-2"}),e.jsx(d,{variant:"h6",className:"text-xs font-semibold text-blue-950 text-center",children:o.myAccount.logout})]})]})})]}),["large-desktop","extra-large-desktop"].includes(t.deviceType)&&e.jsxs("div",{className:"flex container mx-auto py-5",children:[e.jsx(w,{className:"w-1/3 bg-white p-8 rounded-lg shadow-lg space-y-4",children:[{name:o?.myAccount?.currentbooking,page:"currentbooking",icon:e.jsx(te,{size:20})},{name:h(),icon:e.jsx(me,{size:20}),page:"vanlockunlock",disabled:b()},{name:o?.myAccount?.bookinghistory,page:"bookinghistory",icon:e.jsx(le,{size:20})},{name:o?.myAccount?.pendingbookings,page:"pendingbookings",icon:e.jsx(ce,{size:20})},{name:o?.myAccount?.accountsettings,page:"accountsettings",icon:e.jsx(de,{size:20})}].map(a=>e.jsxs(A,{variant:y===a.page?"contained":"text",color:"secondary",disabled:a.disabled,className:`w-full text-left text-sm flex items-center ${a.disabled?"text-white":"text-red-500"}`,onClick:()=>q(a.page),sx:{borderRadius:"8px","&:hover":{backgroundColor:"#ff0707",color:"white"},fontSize:"10px",minWidth:"90px",whiteSpace:"nowrap",background:y===a.page?"linear-gradient(to right, #ff0707, #660000)":"transparent",color:y===a.page?"white":"#ff0707",transition:"background 0.3s ease",border:y===a.page?"none":"1px solid #ff0707",display:"flex",alignItems:"center",gap:"4px"},children:[a.icon,e.jsx("span",{className:"ml-2",children:a.name})," "]},a.page))}),e.jsx(w,{className:"flex-grow w-2/3 bg-white p-5 rounded-lg shadow-lg ml-6",children:e.jsx(je,{mode:"wait",children:e.jsx(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,ease:"easeInOut"},children:Q()},y)})})]}),["large-desktop","extra-large-desktop"].includes(t.deviceType)||["mobile","tablet","small-desktop"].includes(t.deviceType)&&y&&e.jsx("div",{className:"mx-4 mt-4",children:e.jsx(je,{mode:"wait",children:e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},children:Q()},y)})}),k&&p&&e.jsx(ct,{isOpen:k,onClose:()=>C(!1),booking:p,onSubmit:P})]})};export{Ct as default};
