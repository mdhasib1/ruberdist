import{r as m,d as h,j as r,F as p}from"./index-l_K3aXtX.js";import{T as g}from"./Typography-CZDPsgqr.js";import{T as f}from"./TextField-CCY5dsj2.js";import{B as k}from"./Button-BNd6gP94.js";import{C as x}from"./CircularProgress-CwSTxCM5.js";import"./index-BCtXaJ4G.js";import"./createSimplePaletteValueFilter-BtcuYd6h.js";import"./useTheme-BJ2eetf3.js";import"./useSlot-ixWl2-B5.js";import"./Select-D24LhUbi.js";import"./Menu-BKbYykOQ.js";import"./Portal-DJ62drf7.js";import"./Grow-DcTcdrsK.js";import"./useTheme-mzsciiAq.js";import"./List-DgI9Fo7q.js";import"./Paper-CyNIrwR6.js";import"./Modal-B3u_ui_M.js";import"./useControlled-LwTdmPAX.js";import"./createSvgIcon-DbYB0CI1.js";import"./isMuiElement-EJEjTxr9.js";const y="https://rubertogo.com",B=o=>{if(!o)return null;try{const t=o.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(s){return console.error("Failed to parse JWT:",s.message),null}},L=()=>{const[o,s]=m.useState(!1),[t,n]=m.useState({id:"",bankName:"",accountNumber:"",accountHolderName:"",branchName:"",swiftCode:""}),i=localStorage.getItem("accessToken"),c=B(i),d=c==null?void 0:c.id,l=h.create({baseURL:y,headers:{Authorization:`Bearer ${i}`}}),u=async()=>{var e;s(!0);try{const a=await l.get(`/api/bank-details/${d}`);n(a.data.bankDetails||{})}catch(a){console.error("Fetch Bank Details Error:",((e=a.response)==null?void 0:e.data)||a.message)}finally{s(!1)}},b=async()=>{var e;s(!0);try{if(t._id)await l.put(`/api/bank-details/${t._id}`,t),p.success("Bank details updated successfully.");else{const a=await l.post("/api/bank-details",{partnerId:d,...t});n(a.data.bankDetails),p.success("Bank details added successfully.")}}catch(a){console.error("Save Bank Details Error:",((e=a.response)==null?void 0:e.data)||a.message),p.error("Failed to save bank details.")}finally{s(!1)}};return m.useEffect(()=>{u()},[]),r.jsxs("div",{className:"p-6 container mx-auto bg-white rounded-xl shadow-lg h-screen",children:[r.jsx(g,{variant:"h4",className:"font-bold text-white bg-blue-500 mb-8 p-5",sx:{textAlign:"center",marginBottom:"2rem"},children:"Bank Details"}),r.jsxs("div",{className:"space-y-4",children:[["bankName","accountNumber","accountHolderName","branchName","swiftCode"].map(e=>r.jsx(f,{label:e.replace(/([A-Z])/g," $1"),variant:"outlined",fullWidth:!0,value:t[e]||"",onChange:a=>n({...t,[e]:a.target.value})},e)),r.jsx(k,{variant:"contained",color:"primary",onClick:b,disabled:o,children:o?r.jsx(x,{size:20,color:"inherit"}):"Save Details"})]})]})};export{L as default};
