import{a as h,r as i,u as g,b as c,j as s,k,m as y,q as j,w as b,a4 as v,L as $,B as f}from"./vendor-YnnEx5JS.js";const n="https://rubertogo.wedevguru.com",B=()=>{const{lang:d}=h(),[l,r]=i.useState([]),p=g();i.useEffect(()=>{u()},[]);const u=async()=>{try{const a=localStorage.getItem("accessToken"),e=await c.get(`${n}/api/notifications`,{headers:{Authorization:`Bearer ${a}`},withCredentials:!0});r(e.data)}catch(a){console.error("Failed to fetch notifications",a)}},o=async a=>{try{const e=localStorage.getItem("accessToken");await c.put(`${n}/api/notifications/${a}/read`,{},{headers:{Authorization:`Bearer ${e}`},withCredentials:!0}),r(m=>m.map(t=>t._id===a?{...t,read:!0}:t))}catch(e){console.error("Failed to mark notification as read",e)}},x=a=>{o(a),p(`/${d}/system/notification/${a}`)};return s.jsxs(k,{sx:{padding:"20px",maxWidth:"800px",margin:"auto"},children:[s.jsx(y,{variant:"h4",sx:{mb:2},children:"Notifications"}),s.jsx(j,{}),s.jsx(b,{children:l.map(a=>s.jsxs(v,{button:!0,onClick:()=>x(a._id),sx:{opacity:a.read?.5:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},padding:"16px",borderBottom:"1px solid #ddd"},children:[s.jsx($,{primary:a.title,secondary:a.message,sx:{color:a.read?"#888":"#000"}}),!a.read&&s.jsx(f,{variant:"outlined",color:"primary",onClick:e=>{e.stopPropagation(),o(a._id)},children:"Mark as Read"})]},a._id))})]})};export{B as default};
