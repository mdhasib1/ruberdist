import{r as i,j as e,c5 as M,c6 as v,bp as y,c7 as D,bM as f,k as l,c8 as W,aF as S,a2 as u,I as k,c9 as w,a4 as N,ca as B,cb as _,b as C}from"./vendor-CRYhOL6r.js";const P=()=>{const[o,L]=i.useState("en"),[r,I]=i.useState("homepage"),[n,c]=i.useState({}),[m,d]=i.useState(!1),[h,g]=i.useState("");i.useEffect(()=>{(async()=>{d(!0);try{const a=await C.get(`/api/site-content/${r}/${o}`);c(a.data.content||{})}catch(a){console.error("Error fetching content",a)}finally{d(!1)}})()},[o,r]);const p=(t,a)=>{c(s=>({...s,[t]:a}))},j=(t,a,s,x)=>{const b=[...n[t]];b[a]={...b[a],[s]:x},c(F=>({...F,[t]:b}))},A=t=>{const a=[...n[t]||[]];a.push({title:"",description:""}),c(s=>({...s,[t]:a}))},T=(t,a)=>{const s=[...n[t]];s.splice(a,1),c(x=>({...x,[t]:s}))},E=async()=>{d(!0);try{await C.post(`/api/site-content/${o}/${r}`,n),g("Content saved successfully")}catch(t){console.error("Error saving content",t),g("Error saving content")}finally{d(!1)}};return e.jsxs("div",{className:"p-8 bg-gray-100 min-h-screen",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:["Admin - Edit Site Content ",e.jsx(M,{className:"inline ml-2 text-indigo-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(v,{fullWidth:!0,children:[e.jsxs(y,{id:"language-select-label",children:[e.jsx(D,{className:"mr-2"})," Language"]}),e.jsxs(f,{labelId:"language-select-label",value:o,onChange:t=>L(t.target.value),children:[e.jsxs(l,{value:"en",children:[e.jsx("span",{className:"fi fi-gb mr-2"})," English"]}),e.jsxs(l,{value:"de",children:[e.jsx("span",{className:"fi fi-de mr-2"})," German"]}),e.jsxs(l,{value:"fr",children:[e.jsx("span",{className:"fi fi-fr mr-2"})," French"]}),e.jsxs(l,{value:"it",children:[e.jsx("span",{className:"fi fi-it mr-2"})," Italian"]})]})]}),e.jsxs(v,{fullWidth:!0,children:[e.jsxs(y,{id:"section-select-label",children:[e.jsx(W,{className:"mr-2"})," Section"]}),e.jsxs(f,{labelId:"section-select-label",value:r,onChange:t=>I(t.target.value),children:[e.jsx(l,{value:"homepage",children:"Homepage"}),e.jsx(l,{value:"about_us",children:"About Us"}),e.jsx(l,{value:"contact_us",children:"Contact Us"}),e.jsx(l,{value:"services",children:"Services"})]})]})]}),m?e.jsx("div",{className:"flex justify-center my-8",children:e.jsx(S,{})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[$[r].map(t=>e.jsx("div",{className:"mb-6",children:t.type==="text"?e.jsx(u,{label:t.label,variant:"outlined",fullWidth:!0,value:n[t.name]||"",onChange:a=>p(t.name,a.target.value)}):t.type==="textarea"?e.jsx(u,{label:t.label,variant:"outlined",multiline:!0,rows:4,fullWidth:!0,value:n[t.name]||"",onChange:a=>p(t.name,a.target.value)}):null},t.name)),r==="homepage"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Features"}),n.features?.map((t,a)=>e.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[e.jsx(u,{label:"Feature Title",variant:"outlined",fullWidth:!0,value:t.title||"",onChange:s=>j("features",a,"title",s.target.value)}),e.jsx(u,{label:"Feature Description",variant:"outlined",fullWidth:!0,value:t.description||"",onChange:s=>j("features",a,"description",s.target.value)}),e.jsx(k,{color:"secondary",onClick:()=>T("features",a),children:e.jsx(w,{})})]},a)),e.jsx(N,{variant:"contained",color:"primary",startIcon:e.jsx(B,{}),onClick:()=>A("features"),className:"bg-indigo-600 hover:bg-indigo-500 shadow-md mb-6",children:"Add Feature"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{variant:"contained",color:"primary",startIcon:e.jsx(_,{}),onClick:E,disabled:m,className:"bg-indigo-600 hover:bg-indigo-500 shadow-md",children:m?e.jsx(S,{size:20}):"Save"})}),h&&e.jsx("p",{className:"text-center text-green-600 mt-4",children:h})]})},$={homepage:[{name:"title",label:"Title",type:"text"},{name:"subtitle",label:"Subtitle",type:"text"},{name:"startDateLabel",label:"Start Date Label",type:"text"},{name:"startTimeLabel",label:"Start Time Label",type:"text"},{name:"endDateLabel",label:"End Date Label",type:"text"},{name:"endTimeLabel",label:"End Time Label",type:"text"},{name:"bookButtonLabel",label:"Book Button Label",type:"text"}],about_us:[{name:"title",label:"Title",type:"text"},{name:"subtitle",label:"Subtitle",type:"text"},{name:"description",label:"Description",type:"textarea"}],contact_us:[{name:"title",label:"Title",type:"text"},{name:"subtitle",label:"Subtitle",type:"text"},{name:"address",label:"Address",type:"text"},{name:"phone",label:"Phone",type:"text"},{name:"email",label:"Email",type:"text"}],services:[{name:"title",label:"Title",type:"text"},{name:"subtitle",label:"Subtitle",type:"text"},{name:"features",label:"Features",type:"textarea"}]};export{P as default};
