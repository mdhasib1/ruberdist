import{a as m,r as c,u as g,b as i,j as s,k,m as y,q as j,w,a4 as b,L as v,B as $}from"./vendor-YnnEx5JS.js";const n="https://www.rubertogo.wedevguru.com",B=()=>{const{lang:d}=m(),[l,r]=c.useState([]),p=g();c.useEffect(()=>{u()},[]);const u=async()=>{try{const e=localStorage.getItem("accessToken"),a=await i.get(`${n}/api/notifications`,{headers:{Authorization:`Bearer ${e}`},withCredentials:!0});r(a.data)}catch(e){console.error("Failed to fetch notifications",e)}},o=async e=>{try{const a=localStorage.getItem("accessToken");await i.put(`${n}/api/notifications/${e}/read`,{},{headers:{Authorization:`Bearer ${a}`},withCredentials:!0}),r(h=>h.map(t=>t._id===e?{...t,read:!0}:t))}catch(a){console.error("Failed to mark notification as read",a)}},x=e=>{o(e),p(`/${d}/notification/${e}`)};return s.jsxs(k,{sx:{padding:"20px",maxWidth:"800px",margin:"auto"},children:[s.jsx(y,{variant:"h4",sx:{mb:2},children:"Notifiche"}),s.jsx(j,{}),s.jsx(w,{children:l.map(e=>s.jsxs(b,{button:!0,onClick:()=>x(e._id),sx:{opacity:e.read?.5:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},padding:"16px",borderBottom:"1px solid #ddd"},children:[s.jsx(v,{primary:e.title,secondary:e.message,sx:{color:e.read?"#888":"#000"}}),!e.read&&s.jsx($,{variant:"outlined",color:"primary",onClick:a=>{a.stopPropagation(),o(e._id)},children:"Segna come letto"})]},e._id))})]})};export{B as default};
