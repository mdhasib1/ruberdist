import{u,r as i,a as g,d as c,j as a}from"./index-l_K3aXtX.js";import{B as f}from"./Box-B0WO_u7N.js";import{T as k}from"./Typography-CZDPsgqr.js";import{D as y}from"./Divider-CfRlQUeS.js";import{L as j}from"./List-DgI9Fo7q.js";import{L as B}from"./ListItem-d81_GwNe.js";import{L as T}from"./ListItemText-DvEwPdwr.js";import{B as $}from"./Button-BNd6gP94.js";import"./createSimplePaletteValueFilter-BtcuYd6h.js";import"./useTheme-BJ2eetf3.js";import"./index-BCtXaJ4G.js";import"./dividerClasses-D7PxQeec.js";import"./isMuiElement-EJEjTxr9.js";import"./CircularProgress-CwSTxCM5.js";import"./listItemTextClasses-myzqhlWt.js";import"./useSlot-ixWl2-B5.js";const m="https://rubertogo.com",M=()=>{const{lang:n}=u(),[d,s]=i.useState([]),p=g();i.useEffect(()=>{l()},[]);const l=async()=>{try{const r=localStorage.getItem("accessToken"),t=await c.get(`${m}/api/notifications`,{headers:{Authorization:`Bearer ${r}`},withCredentials:!0});s(t.data)}catch(r){console.error("Failed to fetch notifications",r)}},e=async r=>{try{const t=localStorage.getItem("accessToken");await c.put(`${m}/api/notifications/${r}/read`,{},{headers:{Authorization:`Bearer ${t}`},withCredentials:!0}),s(h=>h.map(o=>o._id===r?{...o,read:!0}:o))}catch(t){console.error("Failed to mark notification as read",t)}},x=r=>{e(r),p(`/${n}/system/notification/${r}`)};return a.jsxs(f,{sx:{padding:"20px",maxWidth:"800px",margin:"auto"},children:[a.jsx(k,{variant:"h4",sx:{mb:2},children:"Notifications"}),a.jsx(y,{}),a.jsx(j,{children:d.map(r=>a.jsxs(B,{button:!0,onClick:()=>x(r._id),sx:{opacity:r.read?.5:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},padding:"16px",borderBottom:"1px solid #ddd"},children:[a.jsx(T,{primary:r.title,secondary:r.message,sx:{color:r.read?"#888":"#000"}}),!r.read&&a.jsx($,{variant:"outlined",color:"primary",onClick:t=>{t.stopPropagation(),e(r._id)},children:"Mark as Read"})]},r._id))})]})};export{M as default};
