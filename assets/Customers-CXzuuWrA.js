import{r as e,u as a,a as i,j as l,g as t,f as r,bZ as o,aE as n,aQ as s,aR as c,a4 as d,cD as x,cC as h,cE as m,bf as p,m as u,a2 as g,I as j,c3 as b}from"./vendor-Zgq9WbFI.js";const y=u.create(r),v=()=>{const[v,f]=e.useState([]),[w,C]=e.useState(null),[N,S]=e.useState(!1),[k,I]=e.useState(!1),D=localStorage.getItem("accessToken"),[F,R]=e.useState(null),[W,E]=e.useState(!1),A=a(),{lang:B}=i();e.useEffect((()=>{(async()=>{try{const e=await fetch("https://rubertogo.com/api/all-users",{headers:{Authorization:`Bearer ${D}`}}),a=await e.json();f(a)}catch(e){console.error("Failed to fetch customers:",e)}})()}),[]);const _=e=>{R(e),E(!0)},P=()=>{R(null),E(!1)},z=e=>{C(e),S(!0)},L=e=>{C(e),I(!0)},O=()=>{S(!1),I(!1),C(null)},$=[{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:150},{field:"email",headerName:"Email",width:250},{field:"phone",headerName:"Phone",width:150},{field:"role",headerName:"Role",width:120},{field:"idDocumentFront",headerName:"ID Front",width:120,renderCell:e=>e.value?l.jsx(j,{color:"primary",onClick:()=>L(e.row),children:l.jsx(x,{})}):"N/A"},{field:"actions",headerName:"Actions",width:180,renderCell:e=>l.jsxs(r,{display:"flex",gap:1,children:[l.jsx(j,{color:"primary",onClick:()=>z(e.row),children:l.jsx(h,{})}),l.jsx(j,{color:"secondary",onClick:()=>f(v.filter((a=>a._id!==e.row._id))),children:l.jsx(b,{})}),l.jsx(d,{variant:"outlined",color:"primary",startIcon:l.jsx(m,{className:"text-red-500"}),onClick:()=>A(`/${B}/admin/${e.row._id}`)})]})}];return l.jsxs("div",{className:"container mx-auto p-4",children:[l.jsx(t,{variant:"h4",gutterBottom:!0,className:"text-white font-bold shadow-lg p-5 bg-red-600 text-center",children:"All Customers"}),l.jsx(r,{sx:{display:{xs:"none",md:"block"},height:500,width:"100%",boxShadow:0,bgcolor:"background.paper",borderRadius:2,overflow:"hidden"},children:l.jsx(o,{rows:v,columns:$,getRowId:e=>e._id,pageSize:5,rowsPerPageOptions:[5],disableSelectionOnClick:!0,sx:{"& .MuiDataGrid-columnHeaders":{bgcolor:"primary.main",color:"#000"},"& .MuiDataGrid-cell":{fontSize:"16px"}}})}),l.jsx(r,{sx:{display:{xs:"block",md:"none"},mt:4},children:l.jsx(n,{container:!0,spacing:2,children:v.map((e=>l.jsx(n,{item:!0,xs:12,children:l.jsx(s,{variant:"outlined",sx:{boxShadow:3},children:l.jsxs(c,{children:[l.jsxs(t,{variant:"h6",color:"primary",children:[e.firstName," ",e.lastName]}),l.jsxs(t,{variant:"body2",color:"textSecondary",children:["Email: ",e.email]}),l.jsxs(t,{variant:"body2",color:"textSecondary",children:["Phone: ",e.phone]}),l.jsxs(t,{variant:"body2",color:"textSecondary",children:["Role: ",e.role]}),l.jsxs(r,{display:"flex",gap:2,mt:2,children:[l.jsx(d,{variant:"contained",color:"primary",startIcon:l.jsx(x,{}),onClick:()=>L(e),children:"View"}),l.jsx(d,{variant:"outlined",color:"primary",startIcon:l.jsx(h,{}),onClick:()=>z(e),children:"Edit"}),l.jsx(d,{variant:"outlined",color:"primary",startIcon:l.jsx(m,{className:"text-red-500"}),onClick:()=>A(`/${B}/admin/${e._id}`)})]})]})})},e._id)))})}),l.jsx(p,{open:k,onClose:O,children:l.jsxs(y,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{maxWidth:800,mx:"auto",my:"8%",p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:3,height:"80vh",overflowY:"auto"},children:[l.jsx(t,{variant:"h5",fontWeight:"bold",color:"primary",textAlign:"center",mb:3,children:"Customer Details"}),w&&l.jsxs(r,{display:"flex",flexDirection:"column",gap:4,p:2,children:[l.jsx(r,{display:"grid",gap:3,gridTemplateColumns:"repeat(2, 1fr)",bgcolor:"grey.100",p:3,borderRadius:2,boxShadow:2,children:[{label:"First Name",value:null==w?void 0:w.firstName},{label:"Last Name",value:null==w?void 0:w.lastName},{label:"Email",value:null==w?void 0:w.email},{label:"Phone",value:null==w?void 0:w.phone},{label:"Role",value:null==w?void 0:w.role},{label:"address",value:null==w?void 0:w.address}].map(((e,a)=>l.jsxs(r,{children:[l.jsx(t,{variant:"body1",fontWeight:"bold",color:"textSecondary",children:e.label}),l.jsx(t,{variant:"body2",color:"textPrimary",children:e.value})]},a)))}),l.jsxs(r,{display:"flex",flexDirection:"column",gap:4,children:[l.jsx(r,{display:"flex",justifyContent:"center",gap:4,children:["ID Front","ID Back"].map(((e,a)=>l.jsxs(r,{textAlign:"center",children:[l.jsx(t,{variant:"caption",color:"textSecondary",children:e}),l.jsx(u.img,{src:0===a?w.idDocumentFront:w.idDocumentBack,alt:e,style:{width:"250px",height:"120px",objectFit:"cover",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",border:"1px solid #ddd"},whileHover:{scale:1.05},transition:{duration:.3},onClick:()=>_(0===a?w.idDocumentFront:w.idDocumentBack)})]},a)))}),l.jsx(r,{display:"flex",justifyContent:"center",gap:4,children:["License Front","License Back"].map(((e,a)=>l.jsxs(r,{textAlign:"center",children:[l.jsx(t,{variant:"caption",color:"textSecondary",children:e}),l.jsx(u.img,{src:0===a?w.licenseFront:w.licenseBack,alt:e,style:{width:"250px",height:"120px",objectFit:"cover",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",border:"1px solid #ddd"},whileHover:{scale:1.05},transition:{duration:.3},onClick:()=>_(0===a?w.licenseFront:w.licenseBack)})]},a)))})]}),l.jsx(d,{variant:"contained",color:"primary",onClick:O,sx:{mt:4,alignSelf:"center"},children:"Close"})]})]})}),l.jsx(p,{open:N,onClose:O,children:l.jsxs(r,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{maxWidth:800,mx:"auto",my:"10%",p:4,bgcolor:"background.paper",borderRadius:2,boxShadow:3},children:[l.jsx(t,{variant:"h5",fontWeight:"bold",color:"primary",textAlign:"center",mb:3,children:"Edit Customer"}),w&&l.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=v.map((e=>e._id===w._id?{...w}:e));f(a),O()},children:[l.jsx(g,{label:"First Name",value:w.firstName||"",onChange:e=>C({...w,firstName:e.target.value}),fullWidth:!0,margin:"normal"}),l.jsx(g,{label:"Last Name",value:w.lastName||"",onChange:e=>C({...w,lastName:e.target.value}),fullWidth:!0,margin:"normal"}),l.jsx(g,{label:"Email",type:"email",value:w.email||"",onChange:e=>C({...w,email:e.target.value}),fullWidth:!0,margin:"normal"}),l.jsx(g,{label:"Phone",type:"tel",value:w.phone||"",onChange:e=>C({...w,phone:e.target.value}),fullWidth:!0,margin:"normal"}),l.jsxs(r,{display:"flex",justifyContent:"center",gap:2,mt:3,children:[l.jsx(d,{variant:"outlined",color:"secondary",onClick:O,children:"Cancel"}),l.jsx(d,{variant:"contained",color:"primary",type:"submit",children:"Save"})]})]})]})}),l.jsx(p,{open:W,onClose:P,children:l.jsxs(y,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)"},children:[l.jsx(d,{onClick:P,sx:{position:"absolute",top:16,right:16,zIndex:2,bgcolor:"white",color:"black",minWidth:"40px",height:"40px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.5rem","&:hover":{bgcolor:"gray.300"}},children:"âœ•"}),F&&l.jsx("img",{src:F,alt:"Enlarged",style:{maxWidth:"90%",maxHeight:"90%",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"}})]})})]})};export{v as default};
