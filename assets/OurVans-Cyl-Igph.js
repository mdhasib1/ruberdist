import{r,j as e,bJ as m,aw as u,C as g}from"./vendor-Cfy4xQX5.js";import{a as p}from"./index-BrCGVfUY.js";import{M as j}from"./Modal-DIMe3dUc.js";import{V as b}from"./VanCard-C9axqwWk.js";import{u as v}from"./useVanStore-FBVDe8Ix.js";import"./Carousel-DDHnFoar.js";const k=()=>{const{vans:a,loading:s,fetchVans:n,page:l,totalPages:i}=v(),{translations:h}=p(),[o,x]=r.useState(null),c=r.useRef(null),f=r.useCallback(()=>{!s&&l<=i&&n()},[n,s,l,i]);return r.useEffect(()=>{a.length===0&&n()},[n,a.length]),r.useEffect(()=>{if(!c.current||s||l>i)return;const t=new IntersectionObserver(([d])=>{d.isIntersecting&&f()},{threshold:1});return t.observe(c.current),()=>t.disconnect()},[f,s,l,i]),e.jsxs("div",{className:"max-w-full mx-auto space-y-8 py-12 bg-white",children:[e.jsx("div",{className:"bg-white bg-opacity-10 backdrop-blur-lg p-5 rounded-xl",children:e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx("h1",{className:"text-2xl md:text-5xl text-center font-extrabold text-gray-600 tracking-wide",children:h.vansTitle}),e.jsx("div",{className:"absolute -bottom-4  transform -translate-x-1/2 w-80 h-1 bg-red-500 rounded-full animate-bounce"}),e.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 w-72 h-1 bg-red-400 rounded-full animate-pulse"})]})}),e.jsxs("div",{className:"container m-auto pb-10 p-5",children:[e.jsxs(m,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[s&&a.length===0&&Array.from({length:12}).map((t,d)=>e.jsxs(m,{item:!0,xs:12,sm:6,md:6,lg:4,xl:4,children:[e.jsx(u,{variant:"rectangular",height:250,width:"100%"}),e.jsx(u,{width:"80%"}),e.jsx(u,{width:"60%"})]},d)),a.map(t=>e.jsx(m,{item:!0,xs:12,sm:6,md:6,lg:4,xl:4,children:e.jsx(b,{van:t,onSelect:()=>x(t)})},t._id))]}),e.jsx("div",{ref:c,className:"h-10 w-full flex justify-center items-center",children:s&&e.jsx(g,{})}),o&&e.jsx(j,{isOpen:!!o,onClose:()=>x(null),van:o})]})]})};export{k as default};
