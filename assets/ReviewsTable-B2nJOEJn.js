import{r as i,j as t,d as u}from"./index-D-tacDo0.js";import{R as g}from"./Rating-Clp6eIQF.js";import{D as N}from"./DataGrid-Dh8Q6Dnq.js";import"./Portal-BmHO-mBc.js";import"./CircularProgress-C_nPCmSr.js";import"./createSimplePaletteValueFilter-BA-5fWDN.js";import"./createSvgIcon-DSUh4BZ1.js";import"./useControlled-B5g-9vmA.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-CRkjSq8j.js";import"./Select-CdTeA48B.js";import"./Menu-D8FtULnJ.js";import"./Grow-BlXXg7GE.js";import"./useSlot-C4Jq41_r.js";import"./useTheme-DTUOtr2d.js";import"./useTheme-BPaKzVUX.js";import"./List-lkVPBD74.js";import"./Paper-D8__vy1H.js";import"./Modal-DeRbA6Cj.js";import"./index-DqaVpj0-.js";import"./Close-8o8Uc7-g.js";import"./Badge-CkqnVvtt.js";import"./Tooltip-C4edUKB3.js";import"./Chip-D4n6IchS.js";import"./IconButton-CfFcDGl4.js";import"./ClickAwayListener-BlbJm6_R.js";import"./MenuItem-U1gzko4K.js";import"./listItemTextClasses-BBLLOjiz.js";import"./dividerClasses-CdWFDhxV.js";import"./Toolbar-C-N-dtXX.js";import"./ListItemText-D6_Kdstx.js";import"./Typography-DA9Er3Yb.js";import"./TextField-Ben9hf97.js";import"./isMuiElement-7oANgUe6.js";import"./InputAdornment-CGw_sbT-.js";import"./Button-DcaeVkm4.js";import"./Divider-trYpSRXj.js";import"./FormControlLabel-KCTcs0Do.js";import"./TableCell-FOiKC1_H.js";import"./Skeleton-BSPYxJHX.js";const f="https://rubertogo.com",se=()=>{const[l,d]=i.useState([]),[m,c]=i.useState(!0),[s,h]=i.useState(null);i.useEffect(()=>{(async()=>{try{const r=await u.get(`${f}/api/reviews/all`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log(r.data),d(r.data||[])}catch(r){console.error("Failed to fetch reviews:",r),h("Failed to load reviews. Please try again later.")}finally{c(!1)}})()},[]);const p=[{field:"vanImage",headerName:"Van Image",width:150,renderCell:e=>{var r,a,o,n;return t.jsx("div",{className:"flex items-center justify-center",children:(o=(a=(r=e.row)==null?void 0:r.vanId)==null?void 0:a.images)!=null&&o[0]?t.jsx("img",{src:e.row.vanId.images[0],alt:((n=e.row.vanId.name)==null?void 0:n.en)||"Van",className:"w-20 h-20 rounded-full object-cover"}):t.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:"N/A"})})}},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"},{field:"name",headerName:"Name",width:200,renderCell:e=>{var r;return t.jsx("div",{children:(r=e==null?void 0:e.row)!=null&&r.userId?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"font-semibold",children:e.row.userId.firstName||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.row.userId.lastName||"N/A"})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No User Info"})})}},{field:"rating",headerName:"Rating",width:150,renderCell:e=>t.jsx(g,{value:e.value,precision:.5,readOnly:!0})},{field:"comment",headerName:"Comment",width:300},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"}],x=l.map(e=>{var r,a;return{id:e._id,author_name:e.author_name||`${(r=e.userId)==null?void 0:r.firstName} ${(a=e.userId)==null?void 0:a.lastName}`,author_url:e.author_url||"",rating:e.rating,comment:e.text||e.comment,createdAt:e.createdAt||e.time,vanId:e.vanId}});return t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reviews"}),m?t.jsx("div",{className:"text-center text-gray-500",children:"Loading reviews..."}):s?t.jsx("div",{className:"text-center text-red-500",children:s}):t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(N,{rows:x,columns:p,pageSize:10,rowsPerPageOptions:[10],checkboxSelection:!1,disableSelectionOnClick:!0})})]})};export{se as default};
