import{r as i,j as t,d as u}from"./index-DrMvIKwq.js";import{R as g}from"./Rating-CG_vgnQ1.js";import{D as N}from"./DataGrid-odPpneuv.js";import"./Portal-BMjECl0g.js";import"./CircularProgress-B5agUqRt.js";import"./createSimplePaletteValueFilter-zjTMkHT-.js";import"./createSvgIcon-CgYohZ5P.js";import"./useControlled-Bio4-BJG.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-COvJ5x3S.js";import"./Select-DJdQC6kX.js";import"./Menu-ComLaOXz.js";import"./Grow-B1pBNw31.js";import"./useSlot-BWhg9WXJ.js";import"./useTheme-C3_UZ2QD.js";import"./useTheme-CepysXf6.js";import"./List-BLDT_Zsz.js";import"./Paper-C4BDKHkT.js";import"./Modal-CfkloFEy.js";import"./index-pDPmJGlT.js";import"./Close-CZtWXSiP.js";import"./Badge-Dv4pCkXf.js";import"./Tooltip-BJxLh1tU.js";import"./Chip-BGAMkzyn.js";import"./IconButton-BGQYt6kH.js";import"./ClickAwayListener-CKDzE_Pj.js";import"./MenuItem-8srXigvG.js";import"./listItemTextClasses--ZWm_3O6.js";import"./dividerClasses-CP17GPn_.js";import"./Toolbar-IXigYXsH.js";import"./ListItemText-CPFOLNaz.js";import"./Typography-BAti9wpa.js";import"./TextField-DvirranI.js";import"./isMuiElement-LlRumiQy.js";import"./InputAdornment-qRqOoZAt.js";import"./Button-xUQB_oWD.js";import"./Divider-DKVgf2v9.js";import"./FormControlLabel-B2fud-Wt.js";import"./TableCell-Cv6TnrlD.js";import"./Skeleton-BNpbg8au.js";const f="https://rubertogo.com",se=()=>{const[l,d]=i.useState([]),[m,c]=i.useState(!0),[s,h]=i.useState(null);i.useEffect(()=>{(async()=>{try{const r=await u.get(`${f}/api/reviews/all`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log(r.data),d(r.data||[])}catch(r){console.error("Failed to fetch reviews:",r),h("Failed to load reviews. Please try again later.")}finally{c(!1)}})()},[]);const p=[{field:"vanImage",headerName:"Van Image",width:150,renderCell:e=>{var r,a,o,n;return t.jsx("div",{className:"flex items-center justify-center",children:(o=(a=(r=e.row)==null?void 0:r.vanId)==null?void 0:a.images)!=null&&o[0]?t.jsx("img",{src:e.row.vanId.images[0],alt:((n=e.row.vanId.name)==null?void 0:n.en)||"Van",className:"w-20 h-20 rounded-full object-cover"}):t.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:"N/A"})})}},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"},{field:"name",headerName:"Name",width:200,renderCell:e=>{var r;return t.jsx("div",{children:(r=e==null?void 0:e.row)!=null&&r.userId?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"font-semibold",children:e.row.userId.firstName||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.row.userId.lastName||"N/A"})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No User Info"})})}},{field:"rating",headerName:"Rating",width:150,renderCell:e=>t.jsx(g,{value:e.value,precision:.5,readOnly:!0})},{field:"comment",headerName:"Comment",width:300},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"}],x=l.map(e=>{var r,a;return{id:e._id,author_name:e.author_name||`${(r=e.userId)==null?void 0:r.firstName} ${(a=e.userId)==null?void 0:a.lastName}`,author_url:e.author_url||"",rating:e.rating,comment:e.text||e.comment,createdAt:e.createdAt||e.time,vanId:e.vanId}});return t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reviews"}),m?t.jsx("div",{className:"text-center text-gray-500",children:"Loading reviews..."}):s?t.jsx("div",{className:"text-center text-red-500",children:s}):t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(N,{rows:x,columns:p,pageSize:10,rowsPerPageOptions:[10],checkboxSelection:!1,disableSelectionOnClick:!0})})]})};export{se as default};
