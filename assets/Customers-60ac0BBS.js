import{r as n,u as _,a as T,j as e,g as i,f as r,bZ as $,aE as F,aR as z,aS as H,a4 as l,cD as E,cC as D,cE as M,bf as p,m as g,a2 as h,I as u,c3 as L}from"./vendor-CKtLXbC-.js";const G="https://www.rubertogo.com",O=g.create(r),Y=()=>{const[c,m]=n.useState([]),[t,s]=n.useState(null),[R,j]=n.useState(!1),[W,b]=n.useState(!1),B=localStorage.getItem("accessToken"),[y,f]=n.useState(null),[A,v]=n.useState(!1),C=_(),{lang:w}=T();n.useEffect(()=>{(async()=>{try{const x=await(await fetch(`${G}/api/all-users`,{headers:{Authorization:`Bearer ${B}`}})).json();m(x)}catch(o){console.error("Failed to fetch customers:",o)}})()},[]);const S=a=>{f(a),v(!0)},N=()=>{f(null),v(!1)},k=a=>{s(a),j(!0)},I=a=>{s(a),b(!0)},d=()=>{j(!1),b(!1),s(null)},P=[{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:150},{field:"email",headerName:"Email",width:250},{field:"phone",headerName:"Phone",width:150},{field:"role",headerName:"Role",width:120},{field:"idDocumentFront",headerName:"ID Front",width:120,renderCell:a=>a.value?e.jsx(u,{color:"primary",onClick:()=>I(a.row),children:e.jsx(E,{})}):"N/A"},{field:"actions",headerName:"Actions",width:180,renderCell:a=>e.jsxs(r,{display:"flex",gap:1,children:[e.jsx(u,{color:"primary",onClick:()=>k(a.row),children:e.jsx(D,{})}),e.jsx(u,{color:"secondary",onClick:()=>m(c.filter(o=>o._id!==a.row._id)),children:e.jsx(L,{})}),e.jsx(l,{variant:"outlined",color:"primary",startIcon:e.jsx(M,{className:"text-red-500"}),onClick:()=>C(`/${w}/admin/${a.row._id}`)})]})}];return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx(i,{variant:"h4",gutterBottom:!0,className:"text-white font-bold shadow-lg p-5 bg-red-600 text-center",children:"All Customers"}),e.jsx(r,{sx:{display:{xs:"none",md:"block"},height:500,width:"100%",boxShadow:0,bgcolor:"background.paper",borderRadius:2,overflow:"hidden"},children:e.jsx($,{rows:c,columns:P,getRowId:a=>a._id,pageSize:5,rowsPerPageOptions:[5],disableSelectionOnClick:!0,sx:{"& .MuiDataGrid-columnHeaders":{bgcolor:"primary.main",color:"#000"},"& .MuiDataGrid-cell":{fontSize:"16px"}}})}),e.jsx(r,{sx:{display:{xs:"block",md:"none"},mt:4},children:e.jsx(F,{container:!0,spacing:2,children:c.map(a=>e.jsx(F,{item:!0,xs:12,children:e.jsx(z,{variant:"outlined",sx:{boxShadow:3},children:e.jsxs(H,{children:[e.jsxs(i,{variant:"h6",color:"primary",children:[a.firstName," ",a.lastName]}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Email: ",a.email]}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Phone: ",a.phone]}),e.jsxs(i,{variant:"body2",color:"textSecondary",children:["Role: ",a.role]}),e.jsxs(r,{display:"flex",gap:2,mt:2,children:[e.jsx(l,{variant:"contained",color:"primary",startIcon:e.jsx(E,{}),onClick:()=>I(a),children:"View"}),e.jsx(l,{variant:"outlined",color:"primary",startIcon:e.jsx(D,{}),onClick:()=>k(a),children:"Edit"}),e.jsx(l,{variant:"outlined",color:"primary",startIcon:e.jsx(M,{className:"text-red-500"}),onClick:()=>C(`/${w}/admin/${a._id}`)})]})]})})},a._id))})}),e.jsx(p,{open:W,onClose:d,children:e.jsxs(O,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{maxWidth:800,mx:"auto",my:"8%",p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:3,height:"80vh",overflowY:"auto"},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",color:"primary",textAlign:"center",mb:3,children:"Customer Details"}),t&&e.jsxs(r,{display:"flex",flexDirection:"column",gap:4,p:2,children:[e.jsx(r,{display:"grid",gap:3,gridTemplateColumns:"repeat(2, 1fr)",bgcolor:"grey.100",p:3,borderRadius:2,boxShadow:2,children:[{label:"First Name",value:t?.firstName},{label:"Last Name",value:t?.lastName},{label:"Email",value:t?.email},{label:"Phone",value:t?.phone},{label:"Role",value:t?.role},{label:"address",value:t?.address}].map((a,o)=>e.jsxs(r,{children:[e.jsx(i,{variant:"body1",fontWeight:"bold",color:"textSecondary",children:a.label}),e.jsx(i,{variant:"body2",color:"textPrimary",children:a.value})]},o))}),e.jsxs(r,{display:"flex",flexDirection:"column",gap:4,children:[e.jsx(r,{display:"flex",justifyContent:"center",gap:4,children:["ID Front","ID Back"].map((a,o)=>e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"caption",color:"textSecondary",children:a}),e.jsx(g.img,{src:o===0?t.idDocumentFront:t.idDocumentBack,alt:a,style:{width:"250px",height:"120px",objectFit:"cover",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",border:"1px solid #ddd"},whileHover:{scale:1.05},transition:{duration:.3},onClick:()=>S(o===0?t.idDocumentFront:t.idDocumentBack)})]},o))}),e.jsx(r,{display:"flex",justifyContent:"center",gap:4,children:["License Front","License Back"].map((a,o)=>e.jsxs(r,{textAlign:"center",children:[e.jsx(i,{variant:"caption",color:"textSecondary",children:a}),e.jsx(g.img,{src:o===0?t.licenseFront:t.licenseBack,alt:a,style:{width:"250px",height:"120px",objectFit:"cover",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",border:"1px solid #ddd"},whileHover:{scale:1.05},transition:{duration:.3},onClick:()=>S(o===0?t.licenseFront:t.licenseBack)})]},o))})]}),e.jsx(l,{variant:"contained",color:"primary",onClick:d,sx:{mt:4,alignSelf:"center"},children:"Close"})]})]})}),e.jsx(p,{open:R,onClose:d,children:e.jsxs(r,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{maxWidth:800,mx:"auto",my:"10%",p:4,bgcolor:"background.paper",borderRadius:2,boxShadow:3},children:[e.jsx(i,{variant:"h5",fontWeight:"bold",color:"primary",textAlign:"center",mb:3,children:"Edit Customer"}),t&&e.jsxs("form",{onSubmit:a=>{a.preventDefault();const o=c.map(x=>x._id===t._id?{...t}:x);m(o),d()},children:[e.jsx(h,{label:"First Name",value:t.firstName||"",onChange:a=>s({...t,firstName:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(h,{label:"Last Name",value:t.lastName||"",onChange:a=>s({...t,lastName:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(h,{label:"Email",type:"email",value:t.email||"",onChange:a=>s({...t,email:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(h,{label:"Phone",type:"tel",value:t.phone||"",onChange:a=>s({...t,phone:a.target.value}),fullWidth:!0,margin:"normal"}),e.jsxs(r,{display:"flex",justifyContent:"center",gap:2,mt:3,children:[e.jsx(l,{variant:"outlined",color:"secondary",onClick:d,children:"Cancel"}),e.jsx(l,{variant:"contained",color:"primary",type:"submit",children:"Save"})]})]})]})}),e.jsx(p,{open:A,onClose:N,children:e.jsxs(O,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:"easeInOut"},sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)"},children:[e.jsx(l,{onClick:N,sx:{position:"absolute",top:16,right:16,zIndex:2,bgcolor:"white",color:"black",minWidth:"40px",height:"40px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.5rem","&:hover":{bgcolor:"gray.300"}},children:"âœ•"}),y&&e.jsx("img",{src:y,alt:"Enlarged",style:{maxWidth:"90%",maxHeight:"90%",borderRadius:8,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"}})]})})]})};export{Y as default};
