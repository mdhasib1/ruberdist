import{r as m,d as h,j as r,F as p}from"./index-D-tacDo0.js";import{T as g}from"./Typography-DA9Er3Yb.js";import{T as f}from"./TextField-Ben9hf97.js";import{B as k}from"./Button-DcaeVkm4.js";import{C as x}from"./CircularProgress-C_nPCmSr.js";import"./index-DqaVpj0-.js";import"./createSimplePaletteValueFilter-BA-5fWDN.js";import"./useTheme-BPaKzVUX.js";import"./useSlot-C4Jq41_r.js";import"./Select-CdTeA48B.js";import"./Menu-D8FtULnJ.js";import"./Portal-BmHO-mBc.js";import"./Grow-BlXXg7GE.js";import"./useTheme-DTUOtr2d.js";import"./List-lkVPBD74.js";import"./Paper-D8__vy1H.js";import"./Modal-DeRbA6Cj.js";import"./useControlled-B5g-9vmA.js";import"./createSvgIcon-DSUh4BZ1.js";import"./isMuiElement-7oANgUe6.js";const y="https://rubertogo.com",B=o=>{if(!o)return null;try{const t=o.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(s){return console.error("Failed to parse JWT:",s.message),null}},L=()=>{const[o,s]=m.useState(!1),[t,n]=m.useState({id:"",bankName:"",accountNumber:"",accountHolderName:"",branchName:"",swiftCode:""}),i=localStorage.getItem("accessToken"),c=B(i),d=c==null?void 0:c.id,l=h.create({baseURL:y,headers:{Authorization:`Bearer ${i}`}}),u=async()=>{var e;s(!0);try{const a=await l.get(`/api/bank-details/${d}`);n(a.data.bankDetails||{})}catch(a){console.error("Fetch Bank Details Error:",((e=a.response)==null?void 0:e.data)||a.message)}finally{s(!1)}},b=async()=>{var e;s(!0);try{if(t._id)await l.put(`/api/bank-details/${t._id}`,t),p.success("Bank details updated successfully.");else{const a=await l.post("/api/bank-details",{partnerId:d,...t});n(a.data.bankDetails),p.success("Bank details added successfully.")}}catch(a){console.error("Save Bank Details Error:",((e=a.response)==null?void 0:e.data)||a.message),p.error("Failed to save bank details.")}finally{s(!1)}};return m.useEffect(()=>{u()},[]),r.jsxs("div",{className:"p-6 container mx-auto bg-white rounded-xl shadow-lg h-screen",children:[r.jsx(g,{variant:"h4",className:"font-bold text-white bg-blue-500 mb-8 p-5",sx:{textAlign:"center",marginBottom:"2rem"},children:"Bank Details"}),r.jsxs("div",{className:"space-y-4",children:[["bankName","accountNumber","accountHolderName","branchName","swiftCode"].map(e=>r.jsx(f,{label:e.replace(/([A-Z])/g," $1"),variant:"outlined",fullWidth:!0,value:t[e]||"",onChange:a=>n({...t,[e]:a.target.value})},e)),r.jsx(k,{variant:"contained",color:"primary",onClick:b,disabled:o,children:o?r.jsx(x,{size:20,color:"inherit"}):"Save Details"})]})]})};export{L as default};
