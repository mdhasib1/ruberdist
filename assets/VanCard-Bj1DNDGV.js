import{co as e,r as l,j as a,m as i,g as t,as as s,aA as n,a$ as r,cp as o,af as d,a4 as c,_ as m}from"./vendor-Zgq9WbFI.js";import{a as v}from"./index-D29cp_SG.js";const x=e(((e,l)=>({vans:[],loading:!1,error:null,page:1,totalPages:1,fetchVans:async()=>{const{loading:a,page:i,totalPages:t}=l();if(!(a||i>t)){e({loading:!0,error:null});try{const l=await fetch(`https://rubertogo.com/api/vans?page=${i}&limit=12`),a=await l.json();a&&Array.isArray(a.vans)&&e((e=>{const l=[...e.vans,...a.vans].reduce(((e,l)=>(e[l._id]=l,e)),{});return{vans:Object.values(l),totalPages:a.totalPages,page:e.page+1,loading:!1}}))}catch(s){console.error("Error fetching vans:",s),e({error:s.message,loading:!1})}}}}))),u=e=>{var l;const a=m().format("dddd"),i=null==(l=e.dailyPricing)?void 0:l.find((e=>e.day===a));return(null==i?void 0:i.pricePerHour)?`${i.pricePerHour} CHF`:"Non Disponibile"},g=e=>{var l;const a=m().format("dddd"),i=null==(l=e.dailyPricing)?void 0:l.find((e=>e.day===a));return(null==i?void 0:i.kilometers)?`${i.kilometers} km`:"Non Disponibile"},h=({van:e,onSelect:m})=>{var x,h,f,p,j,b,w,N,y,k;const{language:z,translations:P}=v(),[C,D]=l.useState(!0);return a.jsx(i.div,{className:"relative flex  flex-col  rounded-xl overflow-hidden  transition-transform duration-300 transform  hover:shadow-2xl bg-white shadow-xl",children:a.jsxs(i.div,{className:"w-full rounded-[15px] p-[20px] border border-gray-300 bg-white shadow-md relative",children:[a.jsx(i.div,{className:"absolute inset-0 bg-[#ff0707] rounded-[15px] [clip-path:polygon(0_56%,100%_32%,100%_100%,0%_100%)]"}),a.jsx(i.div,{className:"relative z-10",children:a.jsx(i.div,{className:"text-lg font-bold text-gray-800 relative",children:a.jsxs(t,{component:"h6",className:"font-extrabold text-gray-800 text-left flex flex-col items-start justify-start text-xl md:text-2xl",style:{marginBottom:"0.3rem"},children:[a.jsxs(i.div,{className:"flex items-center gap-3 text-2xl",children:[a.jsx("img",{src:null==e?void 0:e.images[0],className:"w-6",alt:null==(x=null==e?void 0:e.name)?void 0:x.en})," ",(null==e?void 0:e.name[z])||(null==(h=null==e?void 0:e.name)?void 0:h.en)," ",""]}),a.jsxs(t,{variant:"body2",className:"text-left flex items-center gap-2 text-xs",children:[a.jsx(s,{className:"text-blue-500"}),null==(f=null==e?void 0:e.location)?void 0:f.address]}),(null==e?void 0:e.averageRating)&&a.jsxs(i.div,{className:"flex justify-center items-center",children:[a.jsx(n,{name:`van-rating-${e._id}`,value:Number(e.averageRating),precision:.1,readOnly:!0,size:"small"}),a.jsxs(t,{variant:"body2",className:"ml-2 text-gray-600",children:["(",e.totalReviews," reviews)"]})]})]})})}),a.jsxs(i.div,{className:"mt-0 w-full h-[220px] relative z-10",children:[C&&a.jsx(i.div,{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:a.jsx(r,{})}),a.jsx(o,{component:"img",alt:null==(p=null==e?void 0:e.name)?void 0:p.en,image:null==e?void 0:e.images[0],title:null==(j=null==e?void 0:e.name)?void 0:j.en,className:"h-full w-full object-cover transition-transform duration-300 hover:scale-110",style:{padding:"1.5rem",objectFit:"contain",transform:"scaleX(-1)"},loading:"lazy",onLoad:()=>{D(!1)},sizes:"(max-width: 600px) 300px,\n           (max-width: 1200px) 600px,\n           900px"})]}),a.jsxs(i.div,{className:"relative z-20 ",children:[a.jsxs(i.div,{children:[a.jsxs(i.div,{className:"text-md uppercase text-white font-bold  text-right",children:["Tariffa Oraria: ",u(e)]}),a.jsxs(i.div,{className:"text-md uppercase text-white font-bold  text-right",children:[P.includes,": ",g(e)]})]}),a.jsx(i.div,{className:"grid grid-cols-2 gap-1 w-full mt-2",children:[{label:"Lunghezza interna",value:(null==(b=null==e?void 0:e.internalDimensions)?void 0:b.length)||"Non Disponibile"},{label:"Giornaliera",value:!0===(null==e?void 0:e.allowPackages)&&(null==(w=null==e?void 0:e.packagePrices)?void 0:w.length)>0?null==(k=null==(y=null==(N=e.packagePrices)?void 0:N.filter((e=>{var l;return 1===(null==(l=null==e?void 0:e.packageId)?void 0:l.duration)})))?void 0:y.map((e=>`${e.price} CHF`)))?void 0:k.join(", "):a.jsx(i.div,{className:"flex items-center justify-center",children:a.jsx(i.div,{className:"ml-2 text-white text-sm",children:"Non Disponibile"})})},{label:"Cauzione",value:`${(null==e?void 0:e.preAuthorizationAmount)||"Non Disponibile"} CHF`},{label:"Km illimitati",value:(null==e?void 0:e.unlimitedKilometersPrice)>0?a.jsxs(i.div,{className:"flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-4 h-4 text-white mr-1",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),(null==e?void 0:e.unlimitedKilometersPrice)+" CHF"]}):"Non Disponibile"}].map(((e,l)=>a.jsx(d,{title:e.label,placement:"top",children:a.jsxs(i.div,{className:"w-full p-2 flex flex-col shadow-lg text-white justify-center items-center rounded-md bg-white/25 hover:bg-white/40 transition-colors cursor-pointer text-center",style:{color:"#fff",fontSize:"0.7rem"},children:[e.label,a.jsx(i.div,{className:"mt-[2px] font-samibold text-xs text-white",style:{color:"#fff",fontSize:"0.8rem"},children:e.value})]})},l)))}),a.jsx(c,{fullWidth:!0,variant:"contained",size:"large",sx:{backgroundColor:"#2463eb",color:"#fff",borderRadius:"20px",fontWeight:"bold","&:hover":{backgroundColor:"#2463eb",color:"white",borderColor:"white"},marginTop:"1rem"},onClick:()=>m(e),children:P.bookNowButton})]})]})})};export{h as V,x as u};
