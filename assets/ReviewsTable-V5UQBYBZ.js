import{r as i,j as t,k as u}from"./index-DLpikvjc.js";import{R as g}from"./Rating-DLb2R8qg.js";import{D as N}from"./DataGrid-0EYBgjNF.js";import"./Portal-C-Oqgn3D.js";import"./ButtonBase-C_wHrl86.js";import"./createSvgIcon-DAAY2Ss0.js";import"./useControlled-DAqY8FYl.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-BCUionA9.js";import"./Select-YDvcYVIq.js";import"./Menu-BmUU4LJX.js";import"./Grow-BubuCfXA.js";import"./useSlot-C81N96pq.js";import"./useTheme-BiC74sbM.js";import"./useTheme-BaCcI6wb.js";import"./List-CP_tTsPm.js";import"./Paper-DzT7rg5Q.js";import"./Modal-CXdfSMMy.js";import"./index-CMMxByV_.js";import"./Close-B6mu1L3C.js";import"./Badge-VQgqQlIk.js";import"./Tooltip-Cxmz8oas.js";import"./Chip-CF_ffCUn.js";import"./IconButton-CQP4y5cZ.js";import"./ClickAwayListener-ChyV3r07.js";import"./MenuItem-Dk6ToQkn.js";import"./listItemTextClasses-c0_geO1e.js";import"./dividerClasses-CWGPkxTW.js";import"./Toolbar-4GwuCQeM.js";import"./ListItemText-BaK17cQI.js";import"./Typography-Bytm3ycu.js";import"./TextField-DxLbd0T7.js";import"./isMuiElement-Rh47zddv.js";import"./InputAdornment-Dr7QdbWB.js";import"./Button-Dd5SUgtW.js";import"./Divider-BZXxc7Ka.js";import"./FormControlLabel-BZ90GYya.js";import"./TableCell-Bsl3T8tX.js";import"./Skeleton-CuRxEDba.js";const f="https://rubertogo.com",ie=()=>{const[l,d]=i.useState([]),[m,c]=i.useState(!0),[s,h]=i.useState(null);i.useEffect(()=>{(async()=>{try{const r=await u.get(`${f}/api/reviews/all`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log(r.data),d(r.data||[])}catch(r){console.error("Failed to fetch reviews:",r),h("Failed to load reviews. Please try again later.")}finally{c(!1)}})()},[]);const p=[{field:"vanImage",headerName:"Van Image",width:150,renderCell:e=>{var r,a,o,n;return t.jsx("div",{className:"flex items-center justify-center",children:(o=(a=(r=e.row)==null?void 0:r.vanId)==null?void 0:a.images)!=null&&o[0]?t.jsx("img",{src:e.row.vanId.images[0],alt:((n=e.row.vanId.name)==null?void 0:n.en)||"Van",className:"w-20 h-20 rounded-full object-cover"}):t.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:"N/A"})})}},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"},{field:"name",headerName:"Name",width:200,renderCell:e=>{var r;return t.jsx("div",{children:(r=e==null?void 0:e.row)!=null&&r.userId?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"font-semibold",children:e.row.userId.firstName||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.row.userId.lastName||"N/A"})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No User Info"})})}},{field:"rating",headerName:"Rating",width:150,renderCell:e=>t.jsx(g,{value:e.value,precision:.5,readOnly:!0})},{field:"comment",headerName:"Comment",width:300},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"}],x=l.map(e=>{var r,a;return{id:e._id,author_name:e.author_name||`${(r=e.userId)==null?void 0:r.firstName} ${(a=e.userId)==null?void 0:a.lastName}`,author_url:e.author_url||"",rating:e.rating,comment:e.text||e.comment,createdAt:e.createdAt||e.time,vanId:e.vanId}});return t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reviews"}),m?t.jsx("div",{className:"text-center text-gray-500",children:"Loading reviews..."}):s?t.jsx("div",{className:"text-center text-red-500",children:s}):t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(N,{rows:x,columns:p,pageSize:10,rowsPerPageOptions:[10],checkboxSelection:!1,disableSelectionOnClick:!0})})]})};export{ie as default};
