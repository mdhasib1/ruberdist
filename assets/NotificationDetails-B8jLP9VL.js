import{a as e,r as t,j as a,b as r}from"./vendor-Zgq9WbFI.js";const s=()=>{const{id:s}=e(),[i,l]=t.useState(null),[n,o]=t.useState(!0),c=localStorage.getItem("accessToken");if(t.useEffect((()=>{(async()=>{try{const e=await r.get(`https://rubertogo.com/api/notifications/${s}`,{headers:{Authorization:`Bearer ${c}`},withCredentials:!0});l(e.data)}catch(e){console.error("Failed to fetch notification details",e)}finally{o(!1)}})()}),[s]),n)return a.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-75"})});if(!i)return a.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:a.jsx("p",{className:"text-red-500 text-lg",children:"Notifiche non trovate"})});const d=i.image?i.image:(()=>{const e=i.message.match(/(https?:\/\/rubertogo\.fra1\.digitaloceanspaces\.com\/images\/[^\s]+)/i);return e?e[0]:null})(),m=(()=>{let e=i.message;d&&(e=e.replace(new RegExp(`<img[^>]+src="${d}"[^>]*>`,"i"),"").replace(d,"").trim());const t=e.match(/<a href="([^"]+)".*?>(.*?)<\/a>/i);return t&&(e=e.replace(t[0],"").trim()),e})(),h=i.message.match(/<a href="([^"]+)".*?>(.*?)<\/a>/i),x=null==h?void 0:h[1],u=null==h?void 0:h[2];return a.jsxs("div",{className:"p-6 max-w-lg mx-auto bg-white h-[80vh] flex flex-col justify-center items-center rounded-lg",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:i.title}),a.jsx("p",{className:"text-gray-700 mb-4",children:m}),d&&a.jsx("div",{className:"mb-4",children:a.jsx("img",{src:d,alt:"Notification",className:"w-full h-auto rounded-md shadow-sm"})}),x&&a.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#007BFF",color:"white",textDecoration:"none",borderRadius:"5px",fontWeight:"bold"},children:u||"Paga ora"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Created At: ",new Date(i.createdAt).toLocaleString()]})]})};export{s as default};
