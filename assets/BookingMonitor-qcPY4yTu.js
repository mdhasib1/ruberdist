import{r as e,j as a,b as s}from"./vendor-Zgq9WbFI.js";const r=()=>{const[r,t]=e.useState([]),[n,l]=e.useState((new Date).toISOString().split("T")[0]),[o,d]=e.useState(!0);e.useEffect((()=>{(async()=>{d(!0);try{const e=await s.get("https://rubertogo.com/api/monitoring",{params:{date:n},headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});t(e.data)}catch(e){console.error("Error fetching monitoring data:",e)}finally{d(!1)}})()}),[n]);const i=Array.from({length:24},((e,a)=>`${a}:00`));return o?a.jsx("div",{className:"text-center mt-10",children:"Loading..."}):a.jsxs("div",{className:"p-6 bg-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Hourly Booking System"}),a.jsx("input",{type:"date",value:n,onChange:e=>l(e.target.value),className:"p-2 border rounded text-gray-700"})]}),a.jsx("div",{className:"overflow-auto",children:a.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-full text-sm",children:[a.jsx("thead",{className:"sticky top-0 bg-white shadow",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 border border-gray-300 bg-gray-200",children:"Van"}),i.map((e=>a.jsx("th",{className:"p-2 border border-gray-300 bg-gray-200 text-center",children:e},e)))]})}),a.jsx("tbody",{children:r.map((e=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-3 border border-gray-300 bg-gray-100",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:e.van.images[0],alt:e.van.name.en,className:"w-12 h-12 mr-2 rounded-lg"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-700",children:e.van.name.en}),a.jsx("div",{className:"text-xs text-gray-500",children:e.van.plateNumber})]})]})}),i.map(((s,r)=>{const t=e.hourlySlots[r]||[],n=t.length>0,l=n?"bg-green-300":"bg-gray-200",o=n?"hover:bg-green-400":"hover:bg-gray-300";return a.jsx("td",{className:`p-2 border border-gray-300 text-center ${l} ${o} cursor-pointer transition-all`,title:n?`Booked: ${t.map((e=>`${e.userId.firstName} ${e.userId.lastName}`)).join(", ")}`:"Available",onClick:()=>{n&&alert(t.map((e=>`Booking ID: ${e._id}\nCustomer: ${e.userId.firstName} ${e.userId.lastName}\nStatus: ${e.status}\n`)).join("\n"))},children:n?a.jsxs("div",{className:"flex flex-col items-center text-xs",children:[a.jsx("div",{className:"font-semibold",children:t[0].userId.firstName}),a.jsx("div",{className:"text-gray-600",children:t[0].status})]}):a.jsx("span",{className:"text-gray-500 text-xs",children:"Free"})},r)}))]},e.van._id)))})]})})]})};export{r as default};
