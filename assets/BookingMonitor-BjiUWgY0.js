import{r as n,j as e,b as j}from"./vendor-Bjh3-OGN.js";const f="https://www.rubertogo.com",y=()=>{const[m,g]=n.useState([]),[i,x]=n.useState(new Date().toISOString().split("T")[0]),[h,l]=n.useState(!0);n.useEffect(()=>{(async()=>{l(!0);try{const r=await j.get(`${f}/api/monitoring`,{params:{date:i},headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});g(r.data)}catch(r){console.error("Error fetching monitoring data:",r)}finally{l(!1)}})()},[i]);const c=Array.from({length:24},(t,r)=>`${r}:00`);return h?e.jsx("div",{className:"text-center mt-10",children:"Loading..."}):e.jsxs("div",{className:"p-6 bg-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Hourly Booking System"}),e.jsx("input",{type:"date",value:i,onChange:t=>x(t.target.value),className:"p-2 border rounded text-gray-700"})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 bg-white shadow",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border border-gray-300 bg-gray-200",children:"Van"}),c.map(t=>e.jsx("th",{className:"p-2 border border-gray-300 bg-gray-200 text-center",children:t},t))]})}),e.jsx("tbody",{children:m.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 border border-gray-300 bg-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:t.van.images[0],alt:t.van.name.en,className:"w-12 h-12 mr-2 rounded-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-700",children:t.van.name.en}),e.jsx("div",{className:"text-xs text-gray-500",children:t.van.plateNumber})]})]})}),c.map((r,d)=>{const a=t.hourlySlots[d]||[],o=a.length>0,u=o?"bg-green-300":"bg-gray-200",b=o?"hover:bg-green-400":"hover:bg-gray-300";return e.jsx("td",{className:`p-2 border border-gray-300 text-center ${u} ${b} cursor-pointer transition-all`,title:o?`Booked: ${a.map(s=>`${s.userId.firstName} ${s.userId.lastName}`).join(", ")}`:"Available",onClick:()=>{o&&alert(a.map(s=>`Booking ID: ${s._id}
Customer: ${s.userId.firstName} ${s.userId.lastName}
Status: ${s.status}
`).join(`
`))},children:o?e.jsxs("div",{className:"flex flex-col items-center text-xs",children:[e.jsx("div",{className:"font-semibold",children:a[0].userId.firstName}),e.jsx("div",{className:"text-gray-600",children:a[0].status})]}):e.jsx("span",{className:"text-gray-500 text-xs",children:"Free"})},d)})]},t.van._id))})]})})]})};export{y as default};
