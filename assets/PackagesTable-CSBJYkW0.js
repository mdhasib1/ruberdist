import{r as t,a as z,b as u,j as e,z as $,c7 as O,bq as j,bG as A,cR as L,bv as R,az as y,cL as w,cd as N,D as B,B as v,f as k}from"./vendor-DR3eGGC4.js";const h="https://www.rubertogo.com",H=()=>{const[n,d]=t.useState([]),[a,o]=t.useState(null),[C,m]=t.useState(!1),[P,l]=t.useState(!1),[g,p]=t.useState(null),{lang:D}=z(),[E,S]=t.useState(window.innerWidth<768);t.useEffect(()=>{M();const s=()=>S(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const M=async()=>{try{const s=await u.get(`${h}/api/packages`);d(s.data)}catch(s){console.error("Error fetching packages:",s)}},b=s=>{o(s),m(!0)},f=s=>{p(s),l(!0)},T=async()=>{try{await u.delete(`${h}/api/packages/${g._id}`),d(n.filter(s=>s._id!==g._id)),k.success("Package deleted successfully!")}catch(s){console.error("Error deleting package:",s)}finally{l(!1),p(null)}},r=()=>{m(!1),o(null)},_=async()=>{try{const i=(await u.put(`${h}/api/packages/${a._id}`,a)).data;d(n.map(c=>c._id===i._id?i:c)),r(),k.success("Package updated successfully!")}catch(s){console.error("Error updating package:",s)}},x=s=>{const{name:i,value:c}=s.target;o({...a,[i]:c})},F=()=>e.jsx("div",{className:"h-96 overflow-x-auto",children:e.jsx(B,{rows:n,columns:[{field:"title",headerName:"Title",width:200},{field:"description",headerName:"Description",width:300},{field:"duration",headerName:"Duration (days)",width:200},{field:"actions",headerName:"Actions",width:220,renderCell:s=>e.jsxs("div",{className:"space-x-2 flex justify-between ",children:[e.jsxs(v,{onClick:()=>b(s.row),variant:"contained",type:"button",sx:{backgroundColor:"blue",color:"white",display:"flex",gap:"8px"},color:"red",children:[e.jsx(w,{}),e.jsx("span",{children:"Edit"})]}),e.jsxs(v,{variant:"contained",type:"button",sx:{backgroundColor:"red",color:"white",display:"flex",gap:"8px"},color:"red",onClick:()=>f(s.row),children:[e.jsx(N,{}),e.jsx("span",{children:"Delete"})]})]})}],pageSize:5,rowsPerPageOptions:[5,10,20],checkboxSelection:!0,getRowId:s=>s._id,autoHeight:!0})}),I=()=>e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]})}),e.jsx("div",{className:"mt-4 space-y-1 text-gray-700",children:e.jsxs("div",{children:[e.jsx(y,{className:"inline mr-2"})," Duration: ",s.duration," days"]})}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>b(s),className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition duration-200 flex items-center justify-center",children:[e.jsx(w,{}),e.jsx("span",{className:"ml-2",children:"Edit"})]}),e.jsxs("button",{onClick:()=>f(s),className:"flex-1 bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition duration-200 flex items-center justify-center",children:[e.jsx(N,{}),e.jsx("span",{className:"ml-2",children:"Delete"})]})]})]},s._id))});return e.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-4 space-y-2 md:space-y-0",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Packages"}),e.jsx($,{to:`/${D}/admin/add-package`,className:"text-blue-500 hover:underline",children:e.jsxs("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg shadow hover:bg-green-600 transition duration-200 flex items-center space-x-2",children:[e.jsx(O,{}),e.jsx("span",{children:"Add New Package"})]})})]}),E?I():F(),a&&e.jsx(j,{open:C,onClose:r,children:e.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:e.jsxs("div",{className:"bg-white max-w-lg w-full rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center bg-red-600 px-6 py-4 border-b",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Edit Package"}),e.jsx("button",{onClick:r,className:"text-white rounded-full py-2 px-2 hover:text-gray-700",children:e.jsx(A,{className:"text-white hover:text-gray-700"})})]}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[e.jsx(L,{className:"mr-2"})," Title"]}),e.jsx("input",{type:"text",name:"title",value:a.title,onChange:x,className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[e.jsx(R,{className:"mr-2"})," Description"]}),e.jsx("textarea",{name:"description",value:a.description,onChange:x,rows:"3",className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[e.jsx(y,{className:"mr-2"})," Duration (days)"]}),e.jsx("input",{type:"number",name:"duration",value:a.duration,onChange:x,className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),e.jsxs("div",{className:"flex justify-end items-center gap-3 px-6 py-4 border-t",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 rounded-lg text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition duration-200",children:"Save Changes"})]})]})})}),e.jsx(j,{open:P,onClose:()=>l(!1),children:e.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:e.jsxs("div",{className:"bg-white max-w-sm mx-auto mt-20 p-6 rounded-lg shadow-lg text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Confirm Delete"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this package?"}),e.jsxs("div",{className:"flex justify-around",children:[e.jsx("button",{onClick:()=>l(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-200",children:"Cancel"}),e.jsx("button",{onClick:T,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200",children:"Confirm"})]})]})})})]})};export{H as default};
