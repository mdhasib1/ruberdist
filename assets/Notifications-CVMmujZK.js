import{a as u,r as i,u as g,b as c,j as e,k,m as y,q as j,w,a4 as b,L as $,B as f}from"./vendor-DPDX2MNh.js";const n="https://www.rubertogo.com",B=()=>{const{lang:d}=u(),[l,r]=i.useState([]),p=g();i.useEffect(()=>{x()},[]);const x=async()=>{try{const a=localStorage.getItem("accessToken"),s=await c.get(`${n}/api/notifications`,{headers:{Authorization:`Bearer ${a}`},withCredentials:!0});r(s.data)}catch(a){console.error("Failed to fetch notifications",a)}},o=async a=>{try{const s=localStorage.getItem("accessToken");await c.put(`${n}/api/notifications/${a}/read`,{},{headers:{Authorization:`Bearer ${s}`},withCredentials:!0}),r(h=>h.map(t=>t._id===a?{...t,read:!0}:t))}catch(s){console.error("Failed to mark notification as read",s)}},m=a=>{o(a),p(`/${d}/system/notification/${a}`)};return e.jsxs(k,{sx:{padding:"20px",maxWidth:"800px",margin:"auto"},children:[e.jsx(y,{variant:"h4",sx:{mb:2},children:"Notifications"}),e.jsx(j,{}),e.jsx(w,{children:l.map(a=>e.jsxs(b,{button:!0,onClick:()=>m(a._id),sx:{opacity:a.read?.5:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},padding:"16px",borderBottom:"1px solid #ddd"},children:[e.jsx($,{primary:a.title,secondary:a.message,sx:{color:a.read?"#888":"#000"}}),!a.read&&e.jsx(f,{variant:"outlined",color:"primary",onClick:s=>{s.stopPropagation(),o(a._id)},children:"Mark as Read"})]},a._id))})]})};export{B as default};
