import{a,r as t,u as o,b as r,j as e,f as s,g as i,D as n,p as c,Z as d,L as l,a4 as p}from"./vendor-Zgq9WbFI.js";const h="https://rubertogo.com",x=()=>{const{lang:x}=a(),[m,g]=t.useState([]),u=o();t.useEffect((()=>{f()}),[]);const f=async()=>{try{const a=localStorage.getItem("accessToken"),t=await r.get(`${h}/api/notifications`,{headers:{Authorization:`Bearer ${a}`},withCredentials:!0});g(t.data)}catch(a){console.error("Failed to fetch notifications",a)}},j=async a=>{try{const t=localStorage.getItem("accessToken");await r.put(`${h}/api/notifications/${a}/read`,{},{headers:{Authorization:`Bearer ${t}`},withCredentials:!0}),g((t=>t.map((t=>t._id===a?{...t,read:!0}:t))))}catch(t){console.error("Failed to mark notification as read",t)}};return e.jsxs(s,{sx:{padding:"20px",maxWidth:"800px",margin:"auto"},children:[e.jsx(i,{variant:"h4",sx:{mb:2},children:"Notifications"}),e.jsx(n,{}),e.jsx(c,{children:m.map((a=>e.jsxs(d,{button:!0,onClick:()=>{return t=a._id,j(t),void u(`/${x}/system/notification/${t}`);var t},sx:{opacity:a.read?.5:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},padding:"16px",borderBottom:"1px solid #ddd"},children:[e.jsx(l,{primary:a.title,secondary:a.message,sx:{color:a.read?"#888":"#000"}}),!a.read&&e.jsx(p,{variant:"outlined",color:"primary",onClick:t=>{t.stopPropagation(),j(a._id)},children:"Mark as Read"})]},a._id)))})]})};export{x as default};
