import{r as a,u as $,d as x,j as e,L as A,F as j}from"./index-l_K3aXtX.js";import{_ as O,V as z,ad as L,P as B,A as y,aa as w,a0 as N}from"./index-BXk-qLCm.js";import{M as v}from"./Modal-B3u_ui_M.js";import{B as k}from"./Button-BNd6gP94.js";import{D as R}from"./DataGrid-BD3vHCVv.js";import"./iconBase-JB1XClnC.js";import"./createSimplePaletteValueFilter-BtcuYd6h.js";import"./Portal-DJ62drf7.js";import"./CircularProgress-CwSTxCM5.js";import"./useSlot-ixWl2-B5.js";import"./useTheme-mzsciiAq.js";import"./useTheme-BJ2eetf3.js";import"./index-rYpT1TzP.js";import"./Select-D24LhUbi.js";import"./Menu-BKbYykOQ.js";import"./Grow-DcTcdrsK.js";import"./List-DgI9Fo7q.js";import"./Paper-CyNIrwR6.js";import"./useControlled-LwTdmPAX.js";import"./createSvgIcon-DbYB0CI1.js";import"./index-BCtXaJ4G.js";import"./Close-C3AZ6TUD.js";import"./Badge-DJL8KpYB.js";import"./Tooltip-C8YetgCC.js";import"./Chip-L2rSSoY7.js";import"./IconButton-kHPX5xhj.js";import"./ClickAwayListener-AffCjIIC.js";import"./MenuItem-BywNSZMn.js";import"./listItemTextClasses-myzqhlWt.js";import"./dividerClasses-D7PxQeec.js";import"./Toolbar-y_zv8MhA.js";import"./ListItemText-DvEwPdwr.js";import"./Typography-CZDPsgqr.js";import"./TextField-CCY5dsj2.js";import"./isMuiElement-EJEjTxr9.js";import"./InputAdornment-C9nxi5qz.js";import"./Divider-CfRlQUeS.js";import"./FormControlLabel-BmT3_Aeh.js";import"./TableCell-DYW1Yz_J.js";import"./Skeleton-CEGYlRwS.js";const p="https://rubertogo.com",Ee=()=>{const[r,c]=a.useState([]),[t,d]=a.useState(null),[C,u]=a.useState(!1),[P,i]=a.useState(!1),[h,g]=a.useState(null),{lang:D}=$(),[E,S]=a.useState(window.innerWidth<768);a.useEffect(()=>{M();const s=()=>S(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const M=async()=>{try{const s=await x.get(`${p}/api/packages`);c(s.data)}catch(s){console.error("Error fetching packages:",s)}},f=s=>{d(s),u(!0)},b=s=>{g(s),i(!0)},_=async()=>{try{await x.delete(`${p}/api/packages/${h._id}`),c(r.filter(s=>s._id!==h._id)),j.success("Package deleted successfully!")}catch(s){console.error("Error deleting package:",s)}finally{i(!1),g(null)}},n=()=>{u(!1),d(null)},F=async()=>{try{const l=(await x.put(`${p}/api/packages/${t._id}`,t)).data;c(r.map(o=>o._id===l._id?l:o)),n(),j.success("Package updated successfully!")}catch(s){console.error("Error updating package:",s)}},m=s=>{const{name:l,value:o}=s.target;d({...t,[l]:o})},T=()=>e.jsx("div",{className:"h-96 overflow-x-auto",children:e.jsx(R,{rows:r,columns:[{field:"title",headerName:"Title",width:200},{field:"description",headerName:"Description",width:300},{field:"duration",headerName:"Duration (days)",width:200},{field:"actions",headerName:"Actions",width:220,renderCell:s=>e.jsxs("div",{className:"space-x-2 flex justify-between ",children:[e.jsxs(k,{onClick:()=>f(s.row),variant:"contained",type:"button",sx:{backgroundColor:"blue",color:"white",display:"flex",gap:"8px"},color:"red",children:[e.jsx(w,{}),e.jsx("span",{children:"Edit"})]}),e.jsxs(k,{variant:"contained",type:"button",sx:{backgroundColor:"red",color:"white",display:"flex",gap:"8px"},color:"red",onClick:()=>b(s.row),children:[e.jsx(N,{}),e.jsx("span",{children:"Delete"})]})]})}],pageSize:5,rowsPerPageOptions:[5,10,20],checkboxSelection:!0,getRowId:s=>s._id,autoHeight:!0})}),I=()=>e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]})}),e.jsx("div",{className:"mt-4 space-y-1 text-gray-700",children:e.jsxs("div",{children:[e.jsx(y,{className:"inline mr-2"})," Duration: ",s.duration," days"]})}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[e.jsxs("button",{onClick:()=>f(s),className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition duration-200 flex items-center justify-center",children:[e.jsx(w,{}),e.jsx("span",{className:"ml-2",children:"Edit"})]}),e.jsxs("button",{onClick:()=>b(s),className:"flex-1 bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition duration-200 flex items-center justify-center",children:[e.jsx(N,{}),e.jsx("span",{className:"ml-2",children:"Delete"})]})]})]},s._id))});return e.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-4 space-y-2 md:space-y-0",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Packages"}),e.jsx(A,{to:`/${D}/admin/add-package`,className:"text-blue-500 hover:underline",children:e.jsxs("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg shadow hover:bg-green-600 transition duration-200 flex items-center space-x-2",children:[e.jsx(O,{}),e.jsx("span",{children:"Add New Package"})]})})]}),E?I():T(),t&&e.jsx(v,{open:C,onClose:n,children:e.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:e.jsxs("div",{className:"bg-white max-w-lg w-full rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center bg-red-600 px-6 py-4 border-b",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Edit Package"}),e.jsx("button",{onClick:n,className:"text-white rounded-full py-2 px-2 hover:text-gray-700",children:e.jsx(z,{className:"text-white hover:text-gray-700"})})]}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[e.jsx(L,{className:"mr-2"})," Title"]}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:m,className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[e.jsx(B,{className:"mr-2"})," Description"]}),e.jsx("textarea",{name:"description",value:t.description,onChange:m,rows:"3",className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[e.jsx(y,{className:"mr-2"})," Duration (days)"]}),e.jsx("input",{type:"number",name:"duration",value:t.duration,onChange:m,className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),e.jsxs("div",{className:"flex justify-end items-center gap-3 px-6 py-4 border-t",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-200 rounded-lg text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition duration-200",children:"Save Changes"})]})]})})}),e.jsx(v,{open:P,onClose:()=>i(!1),children:e.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:e.jsxs("div",{className:"bg-white max-w-sm mx-auto mt-20 p-6 rounded-lg shadow-lg text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Confirm Delete"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this package?"}),e.jsxs("div",{className:"flex justify-around",children:[e.jsx("button",{onClick:()=>i(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-200",children:"Cancel"}),e.jsx("button",{onClick:_,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200",children:"Confirm"})]})]})})})]})};export{Ee as default};
