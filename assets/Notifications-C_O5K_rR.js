import{a,r as t,u as o,b as e,j as r,f as i,g as s,D as n,p as c,Z as d,L as l,a4 as p}from"./vendor-Zgq9WbFI.js";const h="https://rubertogo.com",x=()=>{const{lang:x}=a(),[g,m]=t.useState([]),u=o();t.useEffect((()=>{f()}),[]);const f=async()=>{try{const a=localStorage.getItem("accessToken"),t=await e.get(`${h}/api/notifications`,{headers:{Authorization:`Bearer ${a}`},withCredentials:!0});m(t.data)}catch(a){console.error("Failed to fetch notifications",a)}},j=async a=>{try{const t=localStorage.getItem("accessToken");await e.put(`${h}/api/notifications/${a}/read`,{},{headers:{Authorization:`Bearer ${t}`},withCredentials:!0}),m((t=>t.map((t=>t._id===a?{...t,read:!0}:t))))}catch(t){console.error("Failed to mark notification as read",t)}};return r.jsxs(i,{sx:{padding:"20px",maxWidth:"800px",margin:"auto"},children:[r.jsx(s,{variant:"h4",sx:{mb:2},children:"Notifiche"}),r.jsx(n,{}),r.jsx(c,{children:g.map((a=>r.jsxs(d,{button:!0,onClick:()=>{return t=a._id,j(t),void u(`/${x}/notification/${t}`);var t},sx:{opacity:a.read?.5:1,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},padding:"16px",borderBottom:"1px solid #ddd"},children:[r.jsx(l,{primary:a.title,secondary:a.message,sx:{color:a.read?"#888":"#000"}}),!a.read&&r.jsx(p,{variant:"outlined",color:"primary",onClick:t=>{t.stopPropagation(),j(a._id)},children:"Segna come letto"})]},a._id)))})]})};export{x as default};
