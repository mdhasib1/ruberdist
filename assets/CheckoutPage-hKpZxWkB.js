import{j as e,k as N,aw as u,am as ae,r as o,b as D,aR as wr,m as M,C as oe,al as v,B as E,a as kr,ap as Pr,aS as k,aT as Dr,a9 as f,aU as j,aV as ve,I as b,aW as y,aX as W,aY as je,aZ as be,a_ as ye,a$ as P,b0 as te,b1 as Y,b2 as Ir,b3 as Cr,b4 as Fr,b5 as Sr,b6 as se,b7 as Ar,S as Lr,f as x,a5 as _,b8 as Br}from"./vendor-DuWeQkuf.js";import{a as Tr}from"./index--ZbGcTd3.js";import{L as Rr}from"./LoginModal-BvSYGdic.js";import{M as zr}from"./Modal-j5pEaren.js";import{O as Mr}from"./OTPModal-7e91wZSw.js";import Er from"./PrivacyPolicy-DNKiDWEa.js";import Or from"./TermsAndConditions-DKU351Ra.js";import"./Carousel-DIoJSduo.js";const $r=()=>e.jsxs(N,{className:"bg-white min-h-screen h-screen flex flex-col justify-center items-center",children:[e.jsxs(N,{className:"relative h-[200px] bg-cover flex justify-center items-center bg-center",style:{backgroundImage:"url('/hero.webp')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#ff0707] to-[#ff5050] opacity-90"}),e.jsxs(N,{className:"relative z-10 flex flex-col items-center justify-center h-full text-center text-white space-y-4 px-4",children:[e.jsx(u,{variant:"text",width:"60%",height:40}),e.jsx(u,{variant:"text",width:"40%",height:30})]})]}),e.jsx(N,{className:"container mx-auto py-10 px-4 sm:px-6 lg:px-8",children:e.jsxs(N,{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsxs(N,{className:"col-span-2 p-5 bg-gray-50 shadow-md rounded-lg space-y-6",children:[e.jsx(u,{variant:"text",width:"80%",height:30}),e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsxs(N,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsx(u,{variant:"rectangular",width:"100%",height:50})]}),e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsxs(N,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{variant:"rectangular",width:"100%",height:150}),e.jsx(u,{variant:"rectangular",width:"100%",height:150})]}),e.jsx(u,{variant:"text",width:"50%",height:30})]}),e.jsxs(N,{className:"sm:col-span-1 col-span-2 bg-white rounded-2xl p-8 border border-gray-200",children:[e.jsx(u,{variant:"rectangular",width:"100%",height:150}),e.jsx(u,{variant:"text",width:"80%",height:30}),e.jsx(u,{variant:"text",width:"60%",height:20}),e.jsx(u,{variant:"text",width:"90%",height:20}),e.jsxs(N,{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm space-y-2",children:[e.jsx(u,{variant:"text",width:"80%",height:20}),e.jsx(u,{variant:"text",width:"60%",height:20})]}),e.jsx(u,{variant:"rectangular",width:"100%",height:50})]})]})})]}),Kr=({isOpen:t,onClose:n,children:h})=>t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsx(ae.div,{className:"fixed inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ae.div,{className:"bg-white w-full max-w-4xl mx-4 rounded-lg shadow-lg  relative  h-[75vh] overflow-y-auto z-50",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:[e.jsx("button",{onClick:n,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",children:"âœ•"}),e.jsx("div",{className:"overflow-y-auto h-full",children:h})]})]}):null,qr=({isOpen:t,onClose:n,onSelectProduct:h})=>{const[p,O]=o.useState([]),[A,m]=o.useState([]),[$,L]=o.useState(!1),B="https://www.rubertogo.com";o.useEffect(()=>{t&&U()},[t]);const U=async()=>{L(!0);try{const l=await D.get(`${B}/api/products`);O(l.data)}catch(l){console.error("Error fetching products:",l)}finally{L(!1)}},J=l=>{m(I=>I.find(R=>R._id===l._id)?I.filter(R=>R._id!==l._id):[...I,l])},T=()=>{h(A),n()},Z=l=>e.jsxs("svg",{viewBox:"0 0 200 150",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("rect",{width:"200",height:"150",fill:"#f3f4f6",rx:"15",ry:"15"}),e.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"#374151",children:l})]});return e.jsx(wr,{open:t,onClose:n,children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:e.jsxs("div",{className:"bg-white  max-w-5xl rounded-lg shadow-lg overflow-hidden relative",children:[e.jsx("div",{className:"p-6 bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-center",children:e.jsx(M,{variant:"h5",className:"text-2xl font-bold",children:"Seleziona Prodotti Aggiuntivi"})}),$?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx(oe,{})}):e.jsx("div",{className:"p-6 space-y-6 h-[60vh] overflow-y-auto",children:p.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:p.map(l=>e.jsxs("div",{className:`border rounded-lg shadow-md transition-all flex flex-col justify-between items-center ${A.some(I=>I._id===l._id)?"bg-indigo-50 border-indigo-500":"bg-white border-gray-200"}`,style:{height:"350px",maxWidth:"100%",padding:"1rem"},onClick:()=>J(l),children:[e.jsx(v,{title:l.name,placement:"top",children:e.jsx("div",{className:"w-full h-40 flex items-center justify-center overflow-hidden rounded-lg mb-4 bg-gray-100 line-clamp-1",style:{flexShrink:0},children:l.image?e.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"}):Z(l.name)})}),e.jsx(M,{variant:"body1",className:"font-extrabold text-xl text-gray-800 truncate w-full text-center",children:l.name}),e.jsxs("span",{className:"text-2xl text-gray-500 text-center",children:[l.price," CHF"]}),e.jsx(M,{variant:"body2",className:"text-sm text-gray-600 mt-2 text-center",children:l.description||"No description available."})]},l._id))}):e.jsx(M,{variant:"body1",className:"text-center text-gray-600",children:"Nessun prodotto disponibile."})}),e.jsxs("div",{className:"p-6 bg-gray-100 flex justify-end space-x-4",children:[e.jsx(E,{variant:"outlined",color:"secondary",onClick:n,className:"rounded-lg",children:"Annulla"}),e.jsx(E,{variant:"contained",color:"primary",onClick:T,disabled:$||A.length===0,className:"rounded-lg px-6 py-2 shadow-md hover:shadow-lg transition-all",children:"Conferma Selezione"})]})]})})})},Hr=Br("pk_live_51PwWTGDCK8rR2FJAZlmM7KPakXDO09KCBJRjUT5QRFNRRTvlctb9KG8D9bxZ38RRsG6np5RYrJmVG2AeP22KXq7P00rQKtFDnq"),S="https://www.rubertogo.com",Vr=t=>{const n=_().format("dddd"),h=t.dailyPricing?.find(p=>p.day===n);return h?.pricePerHour?`${h.pricePerHour} CHF`:"Not available"},Wr=t=>{const n=_().format("dddd"),h=t.dailyPricing?.find(p=>p.day===n);return h?.kilometers?`${h.kilometers} km`:"Not available"},Yr=t=>{const n=_().format("dddd"),h=t.dailyPricing?.find(p=>p.day===n);return h?.extraPerKm?.toFixed(2)?`${h.extraPerKm.toFixed(2)} CHF `:"Not available"},tt=()=>{const[t,n]=o.useState({firstName:"",lastName:"",address:"",email:"",phone:"",idDocumentFront:null,idDocumentBack:null,licenseFront:null,licenseBack:null,isNotDriver:!1,referralCode:"",timeZone:"",driverInfo:{driverFirstName:"",driverLastName:"",driverAddress:"",driverEmail:"",driverPhone:"",driverLicenseFront:null,driverLicenseBack:null,driverIdDocumentFront:null,driverIdDocumentBack:null}}),[h,p]=o.useState(!1),[O,A]=o.useState(""),[m,$]=o.useState(null),[L,B]=o.useState(!1),{lang:U}=kr(),[J,T]=o.useState(!1),[Z,l]=o.useState(""),[I,R]=o.useState(""),Ne=o.useRef([]),[we,ke]=o.useState(null),K=localStorage.getItem("accessToken"),[ie,ne]=o.useState(!1),[C,Pe]=o.useState(null),{translations:s}=Tr(),[G,De]=o.useState(!1),[X,le]=o.useState(null),[Q,Ie]=o.useState(!1),[de,Ce]=o.useState(""),[q,Fe]=o.useState(null),[Se,ce]=o.useState(!1),[ee,Ae]=o.useState([]),[me,Le]=o.useState(!1),[_r,Be]=o.useState(null),[ue,Te]=o.useState(null),[H,Re]=o.useState(0),[F,ze]=o.useState(!1),Me=async()=>{if(F){x.error("A coupon has already been applied.");return}try{const r=await D.post(`${S}/api/coupons/apply`,{code:t.couponCode,totalHours:m.selectedSlots.length,totalAmount:xe().previousTotalPrice});r.status===200&&(x.success("Coupon applied successfully!"),Be(t.couponCode),Te(r.data.discountType),Re(r.data.discountValue),ze(!0))}catch(r){x.error(r.response?.data?.error||"Failed to apply coupon.")}},Ee=()=>ce(!0),Oe=()=>ce(!1),$e=r=>{Ae(r)},he=r=>{le(r)},Ke=()=>{le(null)};o.useEffect(()=>{n(r=>({...r,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}))},[]);const qe=async r=>{try{(await D.post(`${S}/api/valid-referral-code`,{referralCode:r},{headers:{Authorization:`Bearer ${K}`}})).status===200&&x.success("Referral code is valid.")}catch(a){console.error("Error validating referral code:",a),x.error("Invalid referral code.")}},He=r=>{const a=r.target.value;n(i=>({...i,referralCode:a})),a&&a!==de?qe(a):Fe(null)},Ve=r=>{const a=_().startOf("hour"),i=a.add(4,"hour"),c=r.pricePerHour*4;Pe({...r,name:r.name.en||"Unnamed Van",description:r.description.en||"No description available.",totalPrice:c,startDate:a.format("YYYY-MM-DD"),endDate:i.format("YYYY-MM-DD"),startTime:a.format("h:mm A"),endTime:i.format("h:mm A")}),ne(!0)};o.useEffect(()=>{K&&(async()=>{try{const a=await D.get(`${S}/api/user-profile`,{headers:{Authorization:`Bearer ${K}`}});if(a.status===200){const{referralCode:i,...c}=a.data.user;n(d=>({...d,...c})),Ce(i)}}catch(a){console.error("Error fetching user profile:",a),x.error("Failed to fetch user data. Please try again.")}})()},[K]),o.useEffect(()=>{const r=localStorage.getItem("bookingData");r&&$(JSON.parse(r))},[]);const V=r=>{const{name:a,value:i}=r.target;n(c=>({...c,[a]:i}))},We=r=>{const a=r.target.value;n(i=>({...i,email:a})),Ye(a)},Ye=o.useCallback(Pr.debounce(async r=>{try{(await D.post(`${S}/api/exist-account`,{email:r})).status===201?B(!0):B(!1)}catch(a){console.error("Error checking account existence:",a)}},500),[]),z=r=>{const{name:a,value:i}=r.target;n(c=>({...c,driverInfo:{...c.driverInfo,[a]:i}}))},_e=r=>{n(a=>({...a,isNotDriver:r.target.checked}))},Ue=async r=>{const a=new FormData;a.append("file",r);try{return(await D.post(`${S}/api/upload`,a,{headers:{"Content-Type":"multipart/form-data"}})).data.imageURL}catch(i){return console.error("Error uploading file:",i),x.error("Failed to upload file. Please try again."),null}},w=async(r,a,i=!1)=>{const c=r[0],d=await Ue(c);d&&n(i?g=>({...g,driverInfo:{...g.driverInfo,[a]:d}}):g=>({...g,[a]:d}))},{getRootProps:Je,getInputProps:Ze}=k({onDrop:r=>w(r,"idDocumentFront"),accept:"image/*"}),{getRootProps:Ge,getInputProps:Xe}=k({onDrop:r=>w(r,"idDocumentBack"),accept:"image/*"}),{getRootProps:Qe,getInputProps:er}=k({onDrop:r=>w(r,"licenseFront"),accept:"image/*"}),{getRootProps:rr,getInputProps:tr}=k({onDrop:r=>w(r,"licenseBack"),accept:"image/*"}),{getRootProps:sr,getInputProps:ar}=k({onDrop:r=>w(r,"driverIdDocumentFront",!0),accept:"image/*"}),{getRootProps:or,getInputProps:ir}=k({onDrop:r=>w(r,"driverIdDocumentBack",!0),accept:"image/*"}),{getRootProps:nr,getInputProps:lr}=k({onDrop:r=>w(r,"driverLicenseFront",!0),accept:"image/*"}),{getRootProps:dr,getInputProps:cr}=k({onDrop:r=>w(r,"driverLicenseBack",!0),accept:"image/*"}),mr=r=>{const a=new Date(r),i=String(a.getDate()).padStart(2,"0"),c=String(a.getMonth()+1).padStart(2,"0"),d=a.getFullYear();return`${i}/${c}/${d}`},ur=async r=>{r.preventDefault(),r.stopPropagation(),p(!0),A("");const a=["firstName","lastName","email","phone"];for(let d of a)if(!t[d]){x.error("Per favore, compila tutti i campi richiesti."),p(!1);return}if([t.idDocumentFront,t.idDocumentBack,t.licenseFront,t.licenseBack,...t.isNotDriver?[t.driverInfo.driverFirstName,t.driverInfo.driverLastName,t.driverInfo.driverAddress,t.driverInfo.driverEmail,t.driverInfo.driverPhone,t.driverInfo.driverIdDocumentFront,t.driverInfo.driverIdDocumentBack,t.driverInfo.driverLicenseFront,t.driverInfo.driverLicenseBack]:[]].some(d=>!d)){x.error("Per favore carica tutti i documenti richiesti."),p(!1);return}const c={...t,selectedSlots:m.selectedSlots.map(d=>({...d,date:mr(d.date)})),totalPrice:re,vanId:m.vanDetails._id,driverInfo:JSON.stringify(t.driverInfo)};Q&&t.referralCode&&t.referralCode!==de&&(c.referralCode=t.referralCode);try{p(!0);const{data:d}=await D.post(`${S}/api/create-booking`,c,{headers:{"Content-Type":"application/json"}});R(d.email),T(!0),ke(d.sessionId)}catch(d){console.error("Error during checkout:",d);const g=d.response?.data?.error||"Failed to initiate payment. Please try again.";x.error(g),A(g)}finally{p(!1)}},hr=async r=>{try{const a=await D.post(`${S}/api/verify-otp`,{email:I,otp:r}),{accessToken:i,refreshToken:c}=a.data;localStorage.setItem("accessToken",i),localStorage.setItem("refreshToken",c),x.success("OTP verified successfully!"),T(!1),l("");const d=await Hr,{error:g}=await d.redirectToCheckout({sessionId:we});g&&(console.error("Stripe Redirect Error:",g),x.error("Failed to redirect to payment. Please try again."))}catch(a){console.error("OTP Verification Failed:",a),x.error("Invalid or expired OTP.")}},xr=r=>{Le(r.target.checked)},xe=()=>{const r=m?.totalPrice||0,a=ee.reduce((g,Nr)=>g+Nr.price,0),i=me&&m?.vanDetails?.unlimitedKilometersPrice||0,c=r+a+i,d=F?c-(ue==="percentage"?c*H/100:H):c;return{previousTotalPrice:c,finalTotalPrice:d}},[pe,pr]=o.useState(null),[ge,gr]=o.useState(null),{previousTotalPrice:fe,finalTotalPrice:re}=xe(),fr=()=>{if(pe){const r=pe.getPlace();if(r&&r.geometry){const a=r.formatted_address;n(i=>({...i,address:a}))}else x.error("Please select a valid address.")}},vr=r=>{pr(r)},{isLoaded:jr}=Dr({googleMapsApiKey:"AIzaSyCJgOiSJeJlRdoFK_jTK-mNug5b22XPRn4",libraries:["places"]});if(!jr)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(oe,{})});const br=()=>{if(ge){const r=ge.getPlace();if(r&&r.geometry){const a=r.formatted_address;n(i=>({...i,driverInfo:{...i.driverInfo,driverAddress:a}}))}else x.error("Please select a valid address for the driver.")}},yr=r=>{gr(r)};return e.jsx(e.Fragment,{children:h?e.jsx($r,{}):e.jsxs(ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1},className:"max-w-full mx-auto ",children:[e.jsxs("div",{className:"relative h-[200px] sm:h-[250px] bg-cover flex justify-center items-center bg-center",style:{backgroundImage:"url('/hero.webp')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#ff0707] to-[#ff5050] opacity-90"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center text-white space-y-4 px-4",children:[e.jsx("span",{style:{alignItems:"center"},className:"text-3xl md:text-3xl font-bold",children:s.checkoutHeading}),e.jsx("span",{children:s.checkoutdescription})]})]}),e.jsxs("div",{className:"container mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[O&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("p",{className:"flex flex-col sm:flex-row items-center px-4 py-2 bg-red-100 border border-red-400 text-red-600 rounded-lg font-semibold",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mb-2 sm:mb-0 sm:mr-2 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636L5.636 18.364M5.636 5.636l12.728 12.728"})}),e.jsx("span",{className:"text-center sm:text-left",children:O}),m&&e.jsx(E,{sx:{marginTop:{xs:"1rem",sm:"0"},marginLeft:{sm:"1rem"}},variant:"outlined",color:"primary",onClick:()=>Ve(m.vanDetails),children:"Seleziona un nuovo orario"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs("form",{className:"space-y-6 p-5 bg-gray-50 shadow-md rounded-lg",children:[e.jsx(f,{label:e.jsxs("div",{className:"flex items-center",children:[s.checkoutemail,e.jsx(v,{title:"Email is required for booking confirmation",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),placeholder:s.checkoutemail,name:"email",type:"email",fullWidth:!0,variant:"outlined",value:t.email,onChange:We,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(ve,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{label:e.jsxs("div",{className:"flex items-center",children:[s.checkoutFirstName,e.jsx(v,{title:"First name is required for booking confirmation",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),placeholder:s.checkoutFirstName,name:"firstName",fullWidth:!0,variant:"outlined",value:t.firstName,onChange:V,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(W,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsx(f,{label:e.jsxs("div",{className:"flex items-center",children:[s.checkoutLastName,e.jsx(v,{title:"Last name is required for booking confirmation",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),placeholder:s.checkoutLastName,name:"lastName",fullWidth:!0,variant:"outlined",value:t.lastName,onChange:V,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(W,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:e.jsx(je,{onLoad:vr,onPlaceChanged:fr,children:e.jsx(f,{label:e.jsxs("div",{className:"flex items-center",children:[s.checkoutAddress,e.jsx(v,{title:"Address is required for booking confirmation",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),placeholder:s.checkoutAddress,name:"address",fullWidth:!0,variant:"outlined",value:t.address,onChange:V,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(be,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})})}),e.jsx(f,{label:e.jsxs("div",{className:"flex items-center",children:[s.checkoutphone,e.jsx(v,{title:"Phone number is required for booking confirmation",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),placeholder:s.checkoutphone,name:"phone",fullWidth:!0,variant:"outlined",value:t.phone,onChange:V,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(ye,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(P,{children:[s.checkoutIdFront,e.jsx(v,{title:"You must provide a valid ID document",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),e.jsxs("div",{...Je(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...Ze()}),t.idDocumentFront?e.jsx("img",{src:t.idDocumentFront,alt:"ID Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(P,{children:[s.checkoutIdBack,e.jsx(v,{title:"You must provide a valid ID document",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),e.jsxs("div",{...Ge(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...Xe()}),t.idDocumentBack?e.jsx("img",{src:t.idDocumentBack,alt:"ID Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]})]}),!t.isNotDriver&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(P,{children:[s.checkoutLicenseFront,e.jsx(v,{title:"You must provide a valid driver license",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),e.jsxs("div",{...Qe(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...er()}),t.licenseFront?e.jsx("img",{src:t.licenseFront,alt:"Driver License Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(P,{children:[s.checkoutLicenseBack,e.jsx(v,{title:"You must provide a valid driver license",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]}),e.jsxs("div",{...rr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...tr()}),t.licenseBack?e.jsx("img",{src:t.licenseBack,alt:"Driver License Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]})]})}),e.jsx(te,{control:e.jsx(Y,{checked:t.isNotDriver,onChange:_e,name:"isNotDriver",color:"primary"}),label:e.jsxs("div",{className:"flex items-center",children:[s.checkoutImnotdriver,e.jsx(v,{title:"Check this box if you are not the driver",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]})}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(te,{control:e.jsx(Y,{checked:Q,onChange:r=>Ie(r.target.checked),color:"primary"}),label:e.jsxs("div",{className:"flex items-center",children:[s.applyReferalCode,e.jsx(v,{title:"Enter a valid referral code to get a discount",children:e.jsx(b,{size:"small",className:"ml-1",children:e.jsx(y,{})})})]})}),Q&&e.jsx(f,{label:s.checkoutReferralCode,name:"referralCode",variant:"outlined",fullWidth:!0,value:t.referralCode,onChange:He,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(Ir,{className:"text-gray-500"})})},className:`transition duration-300 focus-within:shadow-md rounded-lg ${q===!0?"border-green-500":q===!1?"border-red-500":""}`,helperText:q===!0?"Referral code is valid!":q===!1?"Invalid referral code":""})]}),t.isNotDriver&&e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"h6",className:"font-bold mt-6",children:s.checkoutDriverInformationHeading}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{label:s.checkoutDriverFirstName,name:"driverFirstName",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverFirstName,onChange:z,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(W,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsx(f,{label:s.checkoutDriverLastName,name:"driverLastName",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverLastName,onChange:z,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(W,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(je,{onLoad:yr,onPlaceChanged:br,children:e.jsx(f,{label:s.checkoutDriverAddress,name:"driverAddress",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverAddress,onChange:z,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(be,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})}),e.jsx(f,{label:s.checkoutDriverEmail,name:"driverEmail",type:"email",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverEmail,onChange:z,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(ve,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})]}),e.jsx(f,{label:s.checkoutDriverPhone,name:"driverPhone",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverPhone,onChange:z,required:!0,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(ye,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(P,{children:s.checkoutDriverIdFront}),e.jsxs("div",{...nr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...lr()}),t.driverInfo.driverLicenseFront?e.jsx("img",{src:t.driverInfo.driverLicenseFront,alt:"Driver License Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(P,{children:[" ",s.checkoutDriverIdBack," "]}),e.jsxs("div",{...dr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...cr()}),t.driverInfo.driverLicenseBack?e.jsx("img",{src:t.driverInfo.driverLicenseBack,alt:"Driver License Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(P,{children:[" ",s.checkoutDriverLicenseFront," "]}),e.jsxs("div",{...sr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...ar()}),t.driverInfo.driverIdDocumentFront?e.jsx("img",{src:t.driverInfo.driverIdDocumentFront,alt:"Driver ID Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(P,{children:[" ",s.checkoutDriverLicenseBack," "]}),e.jsxs("div",{...or(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...ir()}),t.driverInfo.driverIdDocumentBack?e.jsx("img",{src:t.driverInfo.driverIdDocumentBack,alt:"Driver ID Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:s.draganddrop})]})]})]})]})]})}),e.jsx("div",{className:"sm:col-span-1 col-span-2",children:e.jsx("div",{className:"bg-white  rounded-2xl p-8 border border-gray-200",children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[m&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:m?.vanDetails?.images[0],alt:"Van",className:"w-full flex justify-center rounded-lg object-container ",lazy:"true"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:[e.jsx(Cr,{className:"inline-block text-green-800 mr-2"}),m.vanDetails?.name[U]||m.vanDetails?.name.en]}),e.jsxs("p",{className:"text-md text-gray-600",children:[e.jsx(Fr,{className:"inline-block text-green-800 mr-2"}),e.jsxs("span",{className:"font-semibold",children:[s.totalHours,":"]})," ",m.selectedSlots.length]}),e.jsxs("p",{className:"text-md text-gray-600",children:[e.jsx(Sr,{className:"inline-block  text-green-800 mr-2"}),e.jsxs("span",{className:"font-semibold",children:[s.hourPrice,":"]})," ",Vr(m.vanDetails)]})]}),e.jsxs("div",{className:"text-md text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx(se,{className:"inline-block text-green-800 mr-2"}),s.includes," ",Wr(m.vanDetails)]}),e.jsxs("p",{children:[e.jsx(se,{className:"inline-block text-green-800 mr-2"}),s.extraPerKm," ",Yr(m.vanDetails)]})]}),e.jsx("div",{className:"space-y-1",children:m.vanDetails.preAuthorizationAmount>0?e.jsxs("p",{className:"text-gray-600 text-md font-semibold",children:[e.jsx(se,{className:"inline-block text-green-800 mr-2"}),s.securityDiposit,":"," ",m.vanDetails.preAuthorizationAmount," ","CHF"]}):e.jsxs("p",{className:"text-red-600  text-md font-semibold",children:[e.jsx(Ar,{className:"inline-block mr-2"}),s.nosecurityDiposit]})})]}),m?.vanDetails?.unlimitedKilometersPrice>0&&e.jsx(te,{control:e.jsx(Y,{checked:me,onChange:xr,disableRipple:!0,icon:e.jsx("div",{className:"relative w-10 h-6 bg-gray-500 rounded-full shadow-inner transition duration-300",children:e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-md transition-transform duration-300 transform"})}),checkedIcon:e.jsx("div",{className:"relative w-10 h-6 bg-gradient-to-r from-green-400 to-blue-500 rounded-full shadow-lg transition duration-300",children:e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-md transition-transform duration-300 transform translate-x-4"})})}),label:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("span",{className:"text-md font-semibold text-gray-900",children:s.unlimitedKm}),e.jsxs("span",{className:"px-2 py-1 w-24 text-center text-lg font-bold text-white bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 rounded-lg shadow-md",children:[m?.vanDetails?.unlimitedKilometersPrice," ","CHF"]})]}),className:"text-lg font-semibold text-gray-900",sx:{width:"100%",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.8rem 0.8rem",border:"1px solid #e2e8f0",borderRadius:"10px",transition:"transform 0.2s ease, box-shadow 0.3s ease"}}),ee.length>0&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-2",children:s.additionalProducts}),ee.map(r=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:r.name}),e.jsxs("span",{children:[s.priceLabel,": ",r.price," CHF"]})]},r._id))]}),e.jsxs("div",{className:"flex flex-col space-y-4  p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{label:s.applyCoupon,variant:"outlined",fullWidth:!0,value:t.couponCode,onChange:r=>n({...t,couponCode:r.target.value}),disabled:F,className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsx(E,{variant:"contained",color:"primary",sx:{padding:"14px 16px"},onClick:Me,disabled:F||!t.couponCode,children:F?"Applied":"Apply"})]}),F&&e.jsxs("p",{className:"text-green-600 font-semibold",children:["âœ…"," ",ue==="percentage"?`${H}%`:`${H} CHF`," ","Applied"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-2xl font-semibold text-gray-800 border p-5",children:F?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"ml-2 text-red-300 line-through",children:[fe.toFixed(2)," CHF"]}),e.jsxs("span",{className:"ml-2 text-gray-600 font-bold",children:[re.toFixed(2)," CHF"]})]}):e.jsxs("span",{className:"ml-2 text-gray-600 font-bold",children:[fe.toFixed(2)," CHF"]})})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Y,{id:"termsCheckbox",checked:G,onChange:r=>De(r.target.checked),className:"w-5 h-5 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheckbox",className:"text-sm text-gray-700 leading-tight",children:[s.agreeToTerms," ",e.jsx("span",{onClick:()=>he("terms"),className:"text-blue-600 underline hover:text-blue-800 cursor-pointer font-semibold",children:s.termsLink})," ","&"," ",e.jsx("span",{onClick:()=>he("privacy"),className:"text-blue-600 underline hover:text-blue-800 cursor-pointer font-semibold",children:s.privacyLink})]})]}),e.jsx(E,{type:"button",variant:"contained",startIcon:e.jsx(Lr,{}),onClick:ur,disabled:!G||h,className:`w-full py-10 rounded-xl text-xl font-bold shadow-xl transition-transform ${G?"hover:scale-105 bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:h?e.jsx(oe,{size:24,color:"inherit"}):`${s.payNow} ${re.toFixed(2)} CHF`})]})})})]})]}),L&&e.jsx(Rr,{open:L,handleClose:()=>B(!1),email:t.email}),e.jsx(Mr,{open:J,handleClose:()=>T(!1),otp:Z,setOtp:l,onVerify:hr,otpRefs:Ne,otpLength:4}),ie&&C&&e.jsx(zr,{isOpen:ie,onClose:()=>ne(!1),van:C,totalPrice:C.totalPrice,startDate:C.startDate,endDate:C.endDate,startTime:C.startTime,endTime:C.endTime}),e.jsx(qr,{isOpen:Se,onClose:Oe,onSelectProduct:$e}),e.jsx("div",{className:"fixed top-64 right-0 mt-4 mr-4 z-50",children:e.jsxs("div",{className:"relative flex items-center group",children:[e.jsx("div",{className:"relative w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex justify-center items-center shadow-xl transition-transform transform group-hover:scale-110 group-hover:shadow-2xl",children:e.jsxs("button",{onClick:Ee,className:"w-full h-full flex justify-center items-center rounded-full focus:outline-none",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 4v16m8-8H4",className:"origin-center animate-pulse"})}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 opacity-50 blur-xl animate-pulse group-hover:blur-2xl"})]})}),e.jsx("div",{className:"absolute right-20 top-0 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold text-sm px-6 py-2 rounded-full shadow-lg transition-all duration-500 opacity-0 group-hover:opacity-100 group-hover:translate-x-4",children:e.jsx("span",{className:"block animate-slide-text",children:"Aggiungi Prodotti"})})]})}),e.jsxs(Kr,{isOpen:!!X,onClose:Ke,children:[X==="terms"&&e.jsx("div",{children:e.jsx(Or,{})}),X==="privacy"&&e.jsx("div",{children:e.jsx(Er,{})})]})]})})};export{tt as default};
