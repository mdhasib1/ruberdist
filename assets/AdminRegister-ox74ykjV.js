import{r as e,u as t,a,j as s,f as i,m as n,g as r,cj as l,aE as o,a2 as c,a4 as m,a$ as d,b as u}from"./vendor-Zgq9WbFI.js";const h="https://rubertogo.com",f=()=>{const[f,x]=e.useState({firstName:"",lastName:"",email:"",phone:"",address:"",timeZone:""}),[g,p]=e.useState(["","","",""]),[j,v]=e.useState(1),[y,b]=e.useState(""),[S,N]=e.useState(""),[W,C]=e.useState(!1),P=e.useRef([]);t();const{lang:R}=a();e.useEffect((()=>{x((e=>({...e,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})))}),[]);const w=e=>{const{name:t,value:a}=e.target;x({...f,[t]:a})},D=e=>{const t=e.clipboardData.getData("Text").slice(0,4);if(4===t.length){const e=t.split("");p(e),P.current[3].focus()}};return s.jsx("div",{className:"max-w-full flex min-h-screen items-center justify-center",children:s.jsx(i,{className:"h-[300px] items-center max-w-md m-auto",children:s.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[1===j&&s.jsxs(s.Fragment,{children:[s.jsx(r,{variant:"h4",align:"center",color:"primary",gutterBottom:!0,children:"Admin Registration"}),y&&s.jsx(l,{severity:"error",sx:{mb:2},children:y}),S&&s.jsx(l,{severity:"success",sx:{mb:2},children:S}),s.jsxs("form",{onSubmit:async e=>{var t;e.preventDefault(),b(""),N(""),C(!0);try{const e=await u.post(`${h}/api/register`,f);N(e.data.message),v(2)}catch(a){b((null==(t=a.response)?void 0:t.data.message)||"Registration failed")}finally{C(!1)}},children:[s.jsxs(o,{container:!0,spacing:2,children:[s.jsx(o,{item:!0,xs:12,sm:6,children:s.jsx(c,{label:"First Name",name:"firstName",fullWidth:!0,variant:"outlined",value:f.firstName,onChange:w,required:!0})}),s.jsx(o,{item:!0,xs:12,sm:6,children:s.jsx(c,{label:"Last Name",name:"lastName",fullWidth:!0,variant:"outlined",value:f.lastName,onChange:w,required:!0})}),s.jsx(o,{item:!0,xs:12,children:s.jsx(c,{label:"Email",name:"email",type:"email",fullWidth:!0,variant:"outlined",value:f.email,onChange:w,required:!0})}),s.jsx(o,{item:!0,xs:12,children:s.jsx(c,{label:"Phone",name:"phone",type:"tel",fullWidth:!0,variant:"outlined",value:f.phone,onChange:w})}),s.jsx(o,{item:!0,xs:12,children:s.jsx(c,{label:"Address",name:"address",fullWidth:!0,variant:"outlined",value:f.address,onChange:w})})]}),s.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:3,py:1.5,fontSize:"1rem",fontWeight:"bold"},startIcon:W&&s.jsx(d,{size:24}),disabled:W,children:W?"Registering...":"Register"})]})]}),2===j&&s.jsxs(s.Fragment,{children:[s.jsx(r,{variant:"h4",align:"center",color:"primary",gutterBottom:!0,children:"Verify OTP"}),y&&s.jsx(l,{severity:"error",sx:{mb:2},children:y}),S&&s.jsx(l,{severity:"success",sx:{mb:2},children:S}),s.jsxs("form",{onSubmit:async e=>{var t;e.preventDefault(),b(""),C(!0);const a=g.join("");try{const e=await u.post(`${h}/api/verify-otp`,{email:f.email,otp:a});console.log(e.data),N("Registration and OTP verification successful!"),p(["","","",""])}catch(s){b((null==(t=s.response)?void 0:t.data.message)||"OTP verification failed")}finally{C(!1)}},children:[s.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mt:2,children:g.map(((e,t)=>s.jsx(c,{variant:"outlined",inputProps:{maxLength:1,style:{textAlign:"center",fontSize:"1.5rem",width:"3rem",height:"3rem"}},value:e,onChange:e=>((e,t)=>{const{value:a}=e.target;if(1===a.length){const e=[...g];e[t]=a,p(e),t<g.length-1&&a&&P.current[t+1].focus()}else if(""===a){const e=[...g];e[t]="",p(e)}})(e,t),onKeyDown:e=>((e,t)=>{if("Backspace"===t.key)if(g[e]){const t=[...g];t[e]="",p(t)}else e>0&&P.current[e-1].focus()})(t,e),onPaste:0===t?D:void 0,required:!0,inputRef:e=>P.current[t]=e},t)))}),s.jsx(m,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:3,py:1.5,fontSize:"1rem",fontWeight:"bold"},startIcon:W&&s.jsx(d,{size:24}),disabled:W,children:W?"Verifying...":"Verify OTP"})]})]})]})})})};export{f as default};
