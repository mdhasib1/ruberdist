import{r as e,j as a,bZ as r,b as t,aA as s}from"./vendor-Zgq9WbFI.js";const l=()=>{const[l,n]=e.useState([]),[d,i]=e.useState(!0),[o,c]=e.useState(null);e.useEffect((()=>{(async()=>{try{const e=await t.get("https://rubertogo.com/api/reviews/all",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log(e.data),n(e.data||[])}catch(e){console.error("Failed to fetch reviews:",e),c("Failed to load reviews. Please try again later.")}finally{i(!1)}})()}),[]);const m=[{field:"vanImage",headerName:"Van Image",width:150,renderCell:e=>{var r,t,s,l;return a.jsx("div",{className:"flex items-center justify-center",children:(null==(s=null==(t=null==(r=e.row)?void 0:r.vanId)?void 0:t.images)?void 0:s[0])?a.jsx("img",{src:e.row.vanId.images[0],alt:(null==(l=e.row.vanId.name)?void 0:l.en)||"Van",className:"w-20 h-20 rounded-full object-cover"}):a.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:"N/A"})})}},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"},{field:"name",headerName:"Name",width:200,renderCell:e=>{var r;return a.jsx("div",{children:(null==(r=null==e?void 0:e.row)?void 0:r.userId)?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-semibold",children:e.row.userId.firstName||"N/A"}),a.jsx("p",{className:"text-sm text-gray-500",children:e.row.userId.lastName||"N/A"})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"No User Info"})})}},{field:"rating",headerName:"Rating",width:150,renderCell:e=>a.jsx(s,{value:e.value,precision:.5,readOnly:!0})},{field:"comment",headerName:"Comment",width:300},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"}],h=l.map((e=>{var a,r;return{id:e._id,author_name:e.author_name||`${null==(a=e.userId)?void 0:a.firstName} ${null==(r=e.userId)?void 0:r.lastName}`,author_url:e.author_url||"",rating:e.rating,comment:e.text||e.comment,createdAt:e.createdAt||e.time,vanId:e.vanId}}));return a.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reviews"}),d?a.jsx("div",{className:"text-center text-gray-500",children:"Loading reviews..."}):o?a.jsx("div",{className:"text-center text-red-500",children:o}):a.jsx("div",{style:{height:600,width:"100%"},children:a.jsx(r,{rows:h,columns:m,pageSize:10,rowsPerPageOptions:[10],checkboxSelection:!1,disableSelectionOnClick:!0})})]})};export{l as default};
