import{r as e,a as s,b as a,j as t,t as r,bY as n,bf as l,bv as i,cI as d,bk as c,aG as o,cC as x,c3 as u,bZ as m,a4 as h,aV as g}from"./vendor-Zgq9WbFI.js";const p="https://rubertogo.com",b=()=>{const[b,j]=e.useState([]),[f,y]=e.useState(null),[w,N]=e.useState(!1),[v,k]=e.useState(!1),[C,E]=e.useState(null),{lang:S}=s(),[D,_]=e.useState(window.innerWidth<768);e.useEffect((()=>{P();const e=()=>_(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const P=async()=>{try{const e=await a.get(`${p}/api/packages`);j(e.data)}catch(e){console.error("Error fetching packages:",e)}},$=e=>{y(e),N(!0)},z=e=>{E(e),k(!0)},A=()=>{N(!1),y(null)},I=e=>{const{name:s,value:a}=e.target;y({...f,[s]:a})};return t.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 rounded-lg shadow-md",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-4 space-y-2 md:space-y-0",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Packages"}),t.jsx(r,{to:`/${S}/admin/add-package`,className:"text-blue-500 hover:underline",children:t.jsxs("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg shadow hover:bg-green-600 transition duration-200 flex items-center space-x-2",children:[t.jsx(n,{}),t.jsx("span",{children:"Add New Package"})]})})]}),D?t.jsx("div",{className:"space-y-4",children:b.map((e=>t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})}),t.jsx("div",{className:"mt-4 space-y-1 text-gray-700",children:t.jsxs("div",{children:[t.jsx(o,{className:"inline mr-2"})," Duration: ",e.duration," days"]})}),t.jsxs("div",{className:"mt-4 flex space-x-2",children:[t.jsxs("button",{onClick:()=>$(e),className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition duration-200 flex items-center justify-center",children:[t.jsx(x,{}),t.jsx("span",{className:"ml-2",children:"Edit"})]}),t.jsxs("button",{onClick:()=>z(e),className:"flex-1 bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition duration-200 flex items-center justify-center",children:[t.jsx(u,{}),t.jsx("span",{className:"ml-2",children:"Delete"})]})]})]},e._id)))}):t.jsx("div",{className:"h-96 overflow-x-auto",children:t.jsx(m,{rows:b,columns:[{field:"title",headerName:"Title",width:200},{field:"description",headerName:"Description",width:300},{field:"duration",headerName:"Duration (days)",width:200},{field:"actions",headerName:"Actions",width:220,renderCell:e=>t.jsxs("div",{className:"space-x-2 flex justify-between ",children:[t.jsxs(h,{onClick:()=>$(e.row),variant:"contained",type:"button",sx:{backgroundColor:"blue",color:"white",display:"flex",gap:"8px"},color:"red",children:[t.jsx(x,{}),t.jsx("span",{children:"Edit"})]}),t.jsxs(h,{variant:"contained",type:"button",sx:{backgroundColor:"red",color:"white",display:"flex",gap:"8px"},color:"red",onClick:()=>z(e.row),children:[t.jsx(u,{}),t.jsx("span",{children:"Delete"})]})]})}],pageSize:5,rowsPerPageOptions:[5,10,20],checkboxSelection:!0,getRowId:e=>e._id,autoHeight:!0})}),f&&t.jsx(l,{open:w,onClose:A,children:t.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:t.jsxs("div",{className:"bg-white max-w-lg w-full rounded-lg shadow-lg",children:[t.jsxs("div",{className:"flex justify-between items-center bg-red-600 px-6 py-4 border-b",children:[t.jsx("h3",{className:"text-xl font-semibold text-white",children:"Edit Package"}),t.jsx("button",{onClick:A,className:"text-white rounded-full py-2 px-2 hover:text-gray-700",children:t.jsx(i,{className:"text-white hover:text-gray-700"})})]}),t.jsx("div",{className:"px-6 py-4",children:t.jsxs("form",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[t.jsx(d,{className:"mr-2"})," Title"]}),t.jsx("input",{type:"text",name:"title",value:f.title,onChange:I,className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[t.jsx(c,{className:"mr-2"})," Description"]}),t.jsx("textarea",{name:"description",value:f.description,onChange:I,rows:"3",className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center mb-2 font-semibold text-gray-700",children:[t.jsx(o,{className:"mr-2"})," Duration (days)"]}),t.jsx("input",{type:"number",name:"duration",value:f.duration,onChange:I,className:"w-full p-3 bg-gray-100 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),t.jsxs("div",{className:"flex justify-end items-center gap-3 px-6 py-4 border-t",children:[t.jsx("button",{onClick:A,className:"px-4 py-2 bg-gray-200 rounded-lg text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx("button",{type:"button",onClick:async()=>{try{const e=(await a.put(`${p}/api/packages/${f._id}`,f)).data;j(b.map((s=>s._id===e._id?e:s))),A(),g.success("Package updated successfully!")}catch(e){console.error("Error updating package:",e)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition duration-200",children:"Save Changes"})]})]})})}),t.jsx(l,{open:v,onClose:()=>k(!1),children:t.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:t.jsxs("div",{className:"bg-white max-w-sm mx-auto mt-20 p-6 rounded-lg shadow-lg text-center",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Confirm Delete"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this package?"}),t.jsxs("div",{className:"flex justify-around",children:[t.jsx("button",{onClick:()=>k(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-200",children:"Cancel"}),t.jsx("button",{onClick:async()=>{try{await a.delete(`${p}/api/packages/${C._id}`),j(b.filter((e=>e._id!==C._id))),g.success("Package deleted successfully!")}catch(e){console.error("Error deleting package:",e)}finally{k(!1),E(null)}},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200",children:"Confirm"})]})]})})})]})};export{b as default};
