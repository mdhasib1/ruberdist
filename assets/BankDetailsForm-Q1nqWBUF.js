import{r as p,k as h,j as r,U as g,V as m}from"./index-DLpikvjc.js";import{T as k}from"./Typography-Bytm3ycu.js";import{T as f}from"./TextField-DxLbd0T7.js";import{B as x}from"./Button-Dd5SUgtW.js";import"./index-CMMxByV_.js";import"./useTheme-BaCcI6wb.js";import"./useSlot-C81N96pq.js";import"./ButtonBase-C_wHrl86.js";import"./Select-YDvcYVIq.js";import"./Menu-BmUU4LJX.js";import"./Portal-C-Oqgn3D.js";import"./Grow-BubuCfXA.js";import"./useTheme-BiC74sbM.js";import"./List-CP_tTsPm.js";import"./Paper-DzT7rg5Q.js";import"./Modal-CXdfSMMy.js";import"./useControlled-DAqY8FYl.js";import"./createSvgIcon-DAAY2Ss0.js";import"./isMuiElement-Rh47zddv.js";const y="https://rubertogo.com",B=o=>{if(!o)return null;try{const t=o.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(s){return console.error("Failed to parse JWT:",s.message),null}},H=()=>{const[o,s]=p.useState(!1),[t,n]=p.useState({id:"",bankName:"",accountNumber:"",accountHolderName:"",branchName:"",swiftCode:""}),i=localStorage.getItem("accessToken"),c=B(i),d=c==null?void 0:c.id,l=h.create({baseURL:y,headers:{Authorization:`Bearer ${i}`}}),u=async()=>{var e;s(!0);try{const a=await l.get(`/api/bank-details/${d}`);n(a.data.bankDetails||{})}catch(a){console.error("Fetch Bank Details Error:",((e=a.response)==null?void 0:e.data)||a.message)}finally{s(!1)}},b=async()=>{var e;s(!0);try{if(t._id)await l.put(`/api/bank-details/${t._id}`,t),m.success("Bank details updated successfully.");else{const a=await l.post("/api/bank-details",{partnerId:d,...t});n(a.data.bankDetails),m.success("Bank details added successfully.")}}catch(a){console.error("Save Bank Details Error:",((e=a.response)==null?void 0:e.data)||a.message),m.error("Failed to save bank details.")}finally{s(!1)}};return p.useEffect(()=>{u()},[]),r.jsxs("div",{className:"p-6 container mx-auto bg-white rounded-xl shadow-lg h-screen",children:[r.jsx(k,{variant:"h4",className:"font-bold text-white bg-blue-500 mb-8 p-5",sx:{textAlign:"center",marginBottom:"2rem"},children:"Bank Details"}),r.jsxs("div",{className:"space-y-4",children:[["bankName","accountNumber","accountHolderName","branchName","swiftCode"].map(e=>r.jsx(f,{label:e.replace(/([A-Z])/g," $1"),variant:"outlined",fullWidth:!0,value:t[e]||"",onChange:a=>n({...t,[e]:a.target.value})},e)),r.jsx(x,{variant:"contained",color:"primary",onClick:b,disabled:o,children:o?r.jsx(g,{size:20,color:"inherit"}):"Save Details"})]})]})};export{H as default};
