import{r as i,j as t,d as u}from"./index-l_K3aXtX.js";import{R as g}from"./Rating-DS7wC93d.js";import{D as N}from"./DataGrid-BD3vHCVv.js";import"./Portal-DJ62drf7.js";import"./CircularProgress-CwSTxCM5.js";import"./createSimplePaletteValueFilter-BtcuYd6h.js";import"./createSvgIcon-DbYB0CI1.js";import"./useControlled-LwTdmPAX.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-rYpT1TzP.js";import"./Select-D24LhUbi.js";import"./Menu-BKbYykOQ.js";import"./Grow-DcTcdrsK.js";import"./useSlot-ixWl2-B5.js";import"./useTheme-mzsciiAq.js";import"./useTheme-BJ2eetf3.js";import"./List-DgI9Fo7q.js";import"./Paper-CyNIrwR6.js";import"./Modal-B3u_ui_M.js";import"./index-BCtXaJ4G.js";import"./Close-C3AZ6TUD.js";import"./Badge-DJL8KpYB.js";import"./Tooltip-C8YetgCC.js";import"./Chip-L2rSSoY7.js";import"./IconButton-kHPX5xhj.js";import"./ClickAwayListener-AffCjIIC.js";import"./MenuItem-BywNSZMn.js";import"./listItemTextClasses-myzqhlWt.js";import"./dividerClasses-D7PxQeec.js";import"./Toolbar-y_zv8MhA.js";import"./ListItemText-DvEwPdwr.js";import"./Typography-CZDPsgqr.js";import"./TextField-CCY5dsj2.js";import"./isMuiElement-EJEjTxr9.js";import"./InputAdornment-C9nxi5qz.js";import"./Button-BNd6gP94.js";import"./Divider-CfRlQUeS.js";import"./FormControlLabel-BmT3_Aeh.js";import"./TableCell-DYW1Yz_J.js";import"./Skeleton-CEGYlRwS.js";const f="https://rubertogo.com",se=()=>{const[l,d]=i.useState([]),[m,c]=i.useState(!0),[s,h]=i.useState(null);i.useEffect(()=>{(async()=>{try{const r=await u.get(`${f}/api/reviews/all`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log(r.data),d(r.data||[])}catch(r){console.error("Failed to fetch reviews:",r),h("Failed to load reviews. Please try again later.")}finally{c(!1)}})()},[]);const p=[{field:"vanImage",headerName:"Van Image",width:150,renderCell:e=>{var r,a,o,n;return t.jsx("div",{className:"flex items-center justify-center",children:(o=(a=(r=e.row)==null?void 0:r.vanId)==null?void 0:a.images)!=null&&o[0]?t.jsx("img",{src:e.row.vanId.images[0],alt:((n=e.row.vanId.name)==null?void 0:n.en)||"Van",className:"w-20 h-20 rounded-full object-cover"}):t.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:"N/A"})})}},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"},{field:"name",headerName:"Name",width:200,renderCell:e=>{var r;return t.jsx("div",{children:(r=e==null?void 0:e.row)!=null&&r.userId?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"font-semibold",children:e.row.userId.firstName||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.row.userId.lastName||"N/A"})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No User Info"})})}},{field:"rating",headerName:"Rating",width:150,renderCell:e=>t.jsx(g,{value:e.value,precision:.5,readOnly:!0})},{field:"comment",headerName:"Comment",width:300},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"}],x=l.map(e=>{var r,a;return{id:e._id,author_name:e.author_name||`${(r=e.userId)==null?void 0:r.firstName} ${(a=e.userId)==null?void 0:a.lastName}`,author_url:e.author_url||"",rating:e.rating,comment:e.text||e.comment,createdAt:e.createdAt||e.time,vanId:e.vanId}});return t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reviews"}),m?t.jsx("div",{className:"text-center text-gray-500",children:"Loading reviews..."}):s?t.jsx("div",{className:"text-center text-red-500",children:s}):t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(N,{rows:x,columns:p,pageSize:10,rowsPerPageOptions:[10],checkboxSelection:!1,disableSelectionOnClick:!0})})]})};export{se as default};
