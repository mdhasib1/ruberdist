import{r as i,j,c as B}from"./index-D-tacDo0.js";import{o as X,u as Se}from"./Portal-BmHO-mBc.js";import{g as fe,a as de,s as W,u as he,b as me,r as Ce}from"./createSimplePaletteValueFilter-BA-5fWDN.js";import{G as Te,u as ie}from"./Grow-BlXXg7GE.js";import{L as ke,i as De}from"./List-lkVPBD74.js";import{u as le}from"./useSlot-C4Jq41_r.js";import{P as Le}from"./Paper-D8__vy1H.js";import{g as Ie,o as Y,d as Oe,M as ze}from"./Modal-DeRbA6Cj.js";import{b as Fe,d as ge}from"./CircularProgress-C_nPCmSr.js";function V(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function ae(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function Pe(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.startsWith(e.keys.join(""))}function A(t,e,o,C,y,d){let h=!1,p=y(t,e,e?o:!1);for(;p;){if(p===t.firstChild){if(h)return!1;h=!0}const f=C?!1:p.disabled||p.getAttribute("aria-disabled")==="true";if(!p.hasAttribute("tabindex")||!Pe(p,d)||f)p=y(t,p,o);else return p.focus(),!0}return!1}const Ke=i.forwardRef(function(e,o){const{actions:C,autoFocus:y=!1,autoFocusItem:d=!1,children:h,className:p,disabledItemsFocusable:f=!1,disableListWrap:R=!1,onKeyDown:T,variant:L="selectedMenu",...z}=e,n=i.useRef(null),g=i.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Fe(()=>{y&&n.current.focus()},[y]),i.useImperativeHandle(C,()=>({adjustStyleForScrollbar:(r,{direction:s})=>{const u=!n.current.style.width;if(r.clientHeight<n.current.clientHeight&&u){const E=`${Ie(Y(r))}px`;n.current.style[s==="rtl"?"paddingLeft":"paddingRight"]=E,n.current.style.width=`calc(100% + ${E})`}return n.current}}),[]);const F=r=>{const s=n.current,u=r.key;if(r.ctrlKey||r.metaKey||r.altKey){T&&T(r);return}const w=X(s).activeElement;if(u==="ArrowDown")r.preventDefault(),A(s,w,R,f,V);else if(u==="ArrowUp")r.preventDefault(),A(s,w,R,f,ae);else if(u==="Home")r.preventDefault(),A(s,null,R,f,V);else if(u==="End")r.preventDefault(),A(s,null,R,f,ae);else if(u.length===1){const a=g.current,v=u.toLowerCase(),D=performance.now();a.keys.length>0&&(D-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&v!==a.keys[0]&&(a.repeating=!1)),a.lastTime=D,a.keys.push(v);const S=w&&!a.repeating&&Pe(w,a);a.previousKeyMatched&&(S||A(s,w,!1,f,V,a))?r.preventDefault():a.previousKeyMatched=!1}T&&T(r)},I=ge(n,o);let l=-1;i.Children.forEach(h,(r,s)=>{if(!i.isValidElement(r)){l===s&&(l+=1,l>=h.length&&(l=-1));return}r.props.disabled||(L==="selectedMenu"&&r.props.selected||l===-1)&&(l=s),l===s&&(r.props.disabled||r.props.muiSkipListHighlight||r.type.muiSkipListHighlight)&&(l+=1,l>=h.length&&(l=-1))});const x=i.Children.map(h,(r,s)=>{if(s===l){const u={};return d&&(u.autoFocus=!0),r.props.tabIndex===void 0&&L==="selectedMenu"&&(u.tabIndex=0),i.cloneElement(r,u)}return r});return j.jsx(ke,{role:"menu",ref:I,className:p,onKeyDown:F,tabIndex:y?0:-1,...z,children:x})});function He(t){return fe("MuiPopover",t)}de("MuiPopover",["root","paper"]);function ce(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.height/2:e==="bottom"&&(o=t.height),o}function ue(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.width/2:e==="right"&&(o=t.width),o}function pe(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function _(t){return typeof t=="function"?t():t}const je=t=>{const{classes:e}=t;return me({root:["root"],paper:["paper"]},He,e)},Ne=W(ze,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ye=W(Le,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ae=i.forwardRef(function(e,o){const C=he({props:e,name:"MuiPopover"}),{action:y,anchorEl:d,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:p,anchorReference:f="anchorEl",children:R,className:T,container:L,elevation:z=8,marginThreshold:n=16,open:g,PaperProps:F={},slots:I={},slotProps:l={},transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:r=Te,transitionDuration:s="auto",TransitionProps:{onEntering:u,...E}={},disableScrollLock:w=!1,...a}=C,v=(l==null?void 0:l.paper)??F,D=i.useRef(),S={...C,anchorOrigin:h,anchorReference:f,elevation:z,marginThreshold:n,externalPaperSlotProps:v,transformOrigin:x,TransitionComponent:r,transitionDuration:s,TransitionProps:E},N=je(S),U=i.useCallback(()=>{if(f==="anchorPosition")return p;const c=_(d),P=(c&&c.nodeType===1?c:X(D.current).body).getBoundingClientRect();return{top:P.top+ce(P,h.vertical),left:P.left+ue(P,h.horizontal)}},[d,h.horizontal,h.vertical,p,f]),$=i.useCallback(c=>({vertical:ce(c,x.vertical),horizontal:ue(c,x.horizontal)}),[x.horizontal,x.vertical]),G=i.useCallback(c=>{const m={width:c.offsetWidth,height:c.offsetHeight},P=$(m);if(f==="none")return{top:null,left:null,transformOrigin:pe(P)};const ee=U();let K=ee.top-P.vertical,H=ee.left-P.horizontal;const te=K+m.height,oe=H+m.width,re=Y(_(d)),ne=re.innerHeight-n,se=re.innerWidth-n;if(n!==null&&K<n){const M=K-n;K-=M,P.vertical+=M}else if(n!==null&&te>ne){const M=te-ne;K-=M,P.vertical+=M}if(n!==null&&H<n){const M=H-n;H-=M,P.horizontal+=M}else if(oe>se){const M=oe-se;H-=M,P.horizontal+=M}return{top:`${Math.round(K)}px`,left:`${Math.round(H)}px`,transformOrigin:pe(P)}},[d,f,U,$,n]),[b,O]=i.useState(g),k=i.useCallback(()=>{const c=D.current;if(!c)return;const m=G(c);m.top!==null&&c.style.setProperty("top",m.top),m.left!==null&&(c.style.left=m.left),c.style.transformOrigin=m.transformOrigin,O(!0)},[G]);i.useEffect(()=>(w&&window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)),[d,w,k]);const ve=(c,m)=>{u&&u(c,m),k()},be=()=>{O(!1)};i.useEffect(()=>{g&&k()}),i.useImperativeHandle(y,()=>g?{updatePosition:()=>{k()}}:null,[g,k]),i.useEffect(()=>{if(!g)return;const c=Oe(()=>{k()}),m=Y(d);return m.addEventListener("resize",c),()=>{c.clear(),m.removeEventListener("resize",c)}},[d,g,k]);let q=s;s==="auto"&&!r.muiSupportAuto&&(q=void 0);const we=L||(d?X(_(d)).body:void 0),J={slots:I,slotProps:{...l,paper:v}},[Me,Q]=le("paper",{elementType:ye,externalForwardedProps:J,additionalProps:{elevation:z,className:B(N.paper,v==null?void 0:v.className),style:b?v.style:{...v.style,opacity:0}},ownerState:S}),[Z,{slotProps:Re,...xe}]=le("root",{elementType:Ne,externalForwardedProps:J,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:we,open:g},ownerState:S,className:B(N.root,T)}),Ee=ge(D,Q.ref);return j.jsx(Z,{...xe,...!De(Z)&&{slotProps:Re,disableScrollLock:w},...a,ref:o,children:j.jsx(r,{appear:!0,in:g,onEntering:ve,onExited:be,timeout:q,...E,children:j.jsx(Me,{...Q,ref:Ee,children:R})})})});function We(t){return fe("MuiMenu",t)}de("MuiMenu",["root","paper","list"]);const Ue={vertical:"top",horizontal:"right"},$e={vertical:"top",horizontal:"left"},Ge=t=>{const{classes:e}=t;return me({root:["root"],paper:["paper"],list:["list"]},We,e)},Ve=W(Ae,{shouldForwardProp:t=>Ce(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),_e=W(ye,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Be=W(Ke,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),rt=i.forwardRef(function(e,o){const C=he({props:e,name:"MuiMenu"}),{autoFocus:y=!0,children:d,className:h,disableAutoFocusItem:p=!1,MenuListProps:f={},onClose:R,open:T,PaperProps:L={},PopoverClasses:z,transitionDuration:n="auto",TransitionProps:{onEntering:g,...F}={},variant:I="selectedMenu",slots:l={},slotProps:x={},...r}=C,s=Se(),u={...C,autoFocus:y,disableAutoFocusItem:p,MenuListProps:f,onEntering:g,PaperProps:L,transitionDuration:n,TransitionProps:F,variant:I},E=Ge(u),w=y&&!p&&T,a=i.useRef(null),v=(b,O)=>{a.current&&a.current.adjustStyleForScrollbar(b,{direction:s?"rtl":"ltr"}),g&&g(b,O)},D=b=>{b.key==="Tab"&&(b.preventDefault(),R&&R(b,"tabKeyDown"))};let S=-1;i.Children.map(d,(b,O)=>{i.isValidElement(b)&&(b.props.disabled||(I==="selectedMenu"&&b.props.selected||S===-1)&&(S=O))});const N=l.paper??_e,U=x.paper??L,$=ie({elementType:l.root,externalSlotProps:x.root,ownerState:u,className:[E.root,h]}),G=ie({elementType:N,externalSlotProps:U,ownerState:u,className:E.paper});return j.jsx(Ve,{onClose:R,anchorOrigin:{vertical:"bottom",horizontal:s?"right":"left"},transformOrigin:s?Ue:$e,slots:{paper:N,root:l.root},slotProps:{root:$,paper:G},open:T,ref:o,transitionDuration:n,TransitionProps:{onEntering:v,...F},ownerState:u,...r,classes:z,children:j.jsx(Be,{onKeyDown:D,actions:a,autoFocus:y&&(S===-1||p),autoFocusItem:w,variant:I,...f,className:B(E.list,f.className),children:d})})});export{rt as M,Ke as a};
