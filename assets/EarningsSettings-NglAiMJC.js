import{r as e,j as a,a$ as t,m as s,cj as r,a2 as n,a4 as i,ck as c,b as l}from"./vendor-Zgq9WbFI.js";const o="https://rubertogo.com",g=()=>{const[g,d]=e.useState(!1),[u,p]=e.useState(!1),[m,h]=e.useState(!1),[x,y]=e.useState(""),[f,v]=e.useState({adminpercentage:"",partnerpercentage:"",referralpercentage:"",userpercentage:""});e.useEffect((()=>{(async()=>{d(!0);try{const e=await l.get(`${o}/api/earnings-settings`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log("response",e),200===e.status?v(e.data.settings||{}):y("Failed to fetch earnings settings.")}catch(e){console.error("Error fetching earnings settings:",e),y("An error occurred while fetching earnings settings.")}finally{d(!1)}})()}),[]);const j=e=>{const{name:a,value:t}=e.target;v((e=>({...e,[a]:t})))};return g?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx(t,{})}):a.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Earnings Settings"}),m&&a.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(r,{severity:"success",className:"mb-4",children:"Earnings settings updated successfully!"})}),x&&a.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(r,{severity:"error",className:"mb-4",children:x})}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(!0),h(!1),y("");try{const e=await l.put(`${o}/api/earnings-settings`,f,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log("Settings update response:",e),200===e.status?(h(!0),y("")):y(e.data.message||"Failed to update earnings settings.")}catch(a){console.error("Error updating earnings settings:",a),y("An error occurred while updating earnings settings.")}finally{p(!1)}},className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(n,{label:"Admin Percentage",name:"adminpercentage",type:"number",value:f.adminpercentage,onChange:j,fullWidth:!0,required:!0,variant:"outlined"}),a.jsx(n,{label:"Partner Percentage",name:"partnerpercentage",type:"number",value:f.partnerpercentage,onChange:j,fullWidth:!0,required:!0,variant:"outlined"}),a.jsx(n,{label:"Referral Percentage",name:"referralpercentage",type:"number",value:f.referralpercentage,onChange:j,fullWidth:!0,required:!0,variant:"outlined"}),a.jsx(n,{label:"User Percentage",name:"userpercentage",type:"number",value:f.userpercentage,onChange:j,fullWidth:!0,required:!0,variant:"outlined"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(s.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center",children:a.jsx(i,{type:"submit",variant:"contained",color:"primary",startIcon:u?a.jsx(t,{size:20}):a.jsx(c,{}),disabled:u,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:u?"Saving...":"Save"})})})]})]})};export{g as default};
