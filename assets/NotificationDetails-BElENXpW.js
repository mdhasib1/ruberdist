import{a as g,r,j as e,b as u}from"./vendor-DvtMUfbb.js";const p="https://www.rubertogo.com",j=()=>{const{id:o}=g(),[a,l]=r.useState(null),[d,m]=r.useState(!0),h=localStorage.getItem("accessToken");if(r.useEffect(()=>{(async()=>{try{const s=await u.get(`${p}/api/notifications/${o}`,{headers:{Authorization:`Bearer ${h}`},withCredentials:!0});l(s.data)}catch(s){console.error("Failed to fetch notification details",s)}finally{m(!1)}})()},[o]),d)return e.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-75"})});if(!a)return e.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:e.jsx("p",{className:"text-red-500 text-lg",children:"Notifiche non trovate"})});const i=a.image?a.image:(()=>{const t=a.message.match(/(https?:\/\/rubertogo\.fra1\.digitaloceanspaces\.com\/images\/[^\s]+)/i);return t?t[0]:null})(),f=(()=>{let t=a.message;i&&(t=t.replace(new RegExp(`<img[^>]+src="${i}"[^>]*>`,"i"),"").replace(i,"").trim());const s=t.match(/<a href="([^"]+)".*?>(.*?)<\/a>/i);return s&&(t=t.replace(s[0],"").trim()),t})(),n=a.message.match(/<a href="([^"]+)".*?>(.*?)<\/a>/i),c=n?.[1],x=n?.[2];return e.jsxs("div",{className:"p-6 max-w-lg mx-auto bg-white h-[80vh] flex flex-col justify-center items-center rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:a.title}),e.jsx("p",{className:"text-gray-700 mb-4",children:f}),i&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:i,alt:"Notification",className:"w-full h-auto rounded-md shadow-sm"})}),c&&e.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#007BFF",color:"white",textDecoration:"none",borderRadius:"5px",fontWeight:"bold"},children:x||"Paga ora"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created At: ",new Date(a.createdAt).toLocaleString()]})]})};export{j as default};
