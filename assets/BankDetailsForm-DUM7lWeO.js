import{r as m,d as h,j as r,B as p}from"./index-B_XR-bXS.js";import{T as g}from"./Typography-CuI5uYqX.js";import{T as f}from"./TextField-8lldrJnn.js";import{B as k}from"./Button-gI_ekC-0.js";import{C as x}from"./CircularProgress-CnUP9nIX.js";import"./index-xHaaV7qh.js";import"./createSimplePaletteValueFilter-BqFbd0Em.js";import"./useTheme-CokdzniT.js";import"./useSlot-CiWiNTR6.js";import"./Select-CzenUNWX.js";import"./Menu-B2ZH_G3y.js";import"./Portal-DeAW2irb.js";import"./Grow-Diug3Yir.js";import"./useTheme-B7QzK74H.js";import"./List-DlYRtUZN.js";import"./Paper-Dn5NJgTn.js";import"./Modal-Cde_47yd.js";import"./useControlled-C95e4nO2.js";import"./createSvgIcon-c53c8Spr.js";import"./isMuiElement-BsuoJcZr.js";const y="https://rubertogo.com",B=o=>{if(!o)return null;try{const t=o.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(s){return console.error("Failed to parse JWT:",s.message),null}},L=()=>{const[o,s]=m.useState(!1),[t,n]=m.useState({id:"",bankName:"",accountNumber:"",accountHolderName:"",branchName:"",swiftCode:""}),i=localStorage.getItem("accessToken"),c=B(i),d=c==null?void 0:c.id,l=h.create({baseURL:y,headers:{Authorization:`Bearer ${i}`}}),u=async()=>{var a;s(!0);try{const e=await l.get(`/api/bank-details/${d}`);n(e.data.bankDetails||{})}catch(e){console.error("Fetch Bank Details Error:",((a=e.response)==null?void 0:a.data)||e.message)}finally{s(!1)}},b=async()=>{var a;s(!0);try{if(t._id)await l.put(`/api/bank-details/${t._id}`,t),p.success("Bank details updated successfully.");else{const e=await l.post("/api/bank-details",{partnerId:d,...t});n(e.data.bankDetails),p.success("Bank details added successfully.")}}catch(e){console.error("Save Bank Details Error:",((a=e.response)==null?void 0:a.data)||e.message),p.error("Failed to save bank details.")}finally{s(!1)}};return m.useEffect(()=>{u()},[]),r.jsxs("div",{className:"p-6 container mx-auto bg-white rounded-xl shadow-lg h-screen",children:[r.jsx(g,{variant:"h4",className:"font-bold text-white bg-blue-500 mb-8 p-5",sx:{textAlign:"center",marginBottom:"2rem"},children:"Bank Details"}),r.jsxs("div",{className:"space-y-4",children:[["bankName","accountNumber","accountHolderName","branchName","swiftCode"].map(a=>r.jsx(f,{label:a.replace(/([A-Z])/g," $1"),variant:"outlined",fullWidth:!0,value:t[a]||"",onChange:e=>n({...t,[a]:e.target.value})},a)),r.jsx(k,{variant:"contained",color:"primary",onClick:b,disabled:o,children:o?r.jsx(x,{size:20,color:"inherit"}):"Save Details"})]})]})};export{L as default};
