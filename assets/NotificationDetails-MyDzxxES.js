import{u as g,r as o,j as e,d as u}from"./index-DrMvIKwq.js";const p="https://rubertogo.com",j=()=>{const{id:n}=g(),[a,l]=o.useState(null),[d,m]=o.useState(!0),f=localStorage.getItem("accessToken");if(o.useEffect(()=>{(async()=>{try{const r=await u.get(`${p}/api/notifications/${n}`,{headers:{Authorization:`Bearer ${f}`},withCredentials:!0});l(r.data)}catch(r){console.error("Failed to fetch notification details",r)}finally{m(!1)}})()},[n]),d)return e.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-opacity-75"})});if(!a)return e.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:e.jsx("p",{className:"text-red-500 text-lg",children:"Notifiche non trovate"})});const i=a.image?a.image:(()=>{const t=a.message.match(/(https?:\/\/rubertogo\.fra1\.digitaloceanspaces\.com\/images\/[^\s]+)/i);return t?t[0]:null})(),h=(()=>{let t=a.message;i&&(t=t.replace(new RegExp(`<img[^>]+src="${i}"[^>]*>`,"i"),"").replace(i,"").trim());const r=t.match(/<a href="([^"]+)".*?>(.*?)<\/a>/i);return r&&(t=t.replace(r[0],"").trim()),t})(),s=a.message.match(/<a href="([^"]+)".*?>(.*?)<\/a>/i),c=s==null?void 0:s[1],x=s==null?void 0:s[2];return e.jsxs("div",{className:"p-6 max-w-lg mx-auto bg-white h-[80vh] flex flex-col justify-center items-center rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:a.title}),e.jsx("p",{className:"text-gray-700 mb-4",children:h}),i&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:i,alt:"Notification",className:"w-full h-auto rounded-md shadow-sm"})}),c&&e.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#007BFF",color:"white",textDecoration:"none",borderRadius:"5px",fontWeight:"bold"},children:x||"Paga ora"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created At: ",new Date(a.createdAt).toLocaleString()]})]})};export{j as default};
