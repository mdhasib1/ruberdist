import{r as i,j as t,d as u}from"./index-B_XR-bXS.js";import{R as g}from"./Rating-D1iMNPz-.js";import{D as N}from"./DataGrid-Ct_PFr1h.js";import"./Portal-DeAW2irb.js";import"./CircularProgress-CnUP9nIX.js";import"./createSimplePaletteValueFilter-BqFbd0Em.js";import"./createSvgIcon-c53c8Spr.js";import"./useControlled-C95e4nO2.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-CFLSrtzH.js";import"./Select-CzenUNWX.js";import"./Menu-B2ZH_G3y.js";import"./Grow-Diug3Yir.js";import"./useSlot-CiWiNTR6.js";import"./useTheme-B7QzK74H.js";import"./useTheme-CokdzniT.js";import"./List-DlYRtUZN.js";import"./Paper-Dn5NJgTn.js";import"./Modal-Cde_47yd.js";import"./index-xHaaV7qh.js";import"./Close-DVHmFJ28.js";import"./Badge-CMNcq3cf.js";import"./Tooltip-UHsXGHdB.js";import"./Chip-BGceHIn5.js";import"./IconButton-CRfIEONe.js";import"./ClickAwayListener-CAfaVHQX.js";import"./MenuItem-CEXwN4a1.js";import"./listItemTextClasses-BcaquZBc.js";import"./dividerClasses-CwV_91XF.js";import"./Toolbar-NKz1KbID.js";import"./ListItemText-BUoNRxXQ.js";import"./Typography-CuI5uYqX.js";import"./TextField-8lldrJnn.js";import"./isMuiElement-BsuoJcZr.js";import"./InputAdornment-BL0rk6jw.js";import"./Button-gI_ekC-0.js";import"./Divider-DFPo3cV6.js";import"./FormControlLabel-qgAvBeEs.js";import"./TableCell-B5lIhqZQ.js";import"./Skeleton-91_cUmTM.js";const f="https://rubertogo.com",se=()=>{const[l,d]=i.useState([]),[m,c]=i.useState(!0),[s,h]=i.useState(null);i.useEffect(()=>{(async()=>{try{const r=await u.get(`${f}/api/reviews/all`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log(r.data),d(r.data||[])}catch(r){console.error("Failed to fetch reviews:",r),h("Failed to load reviews. Please try again later.")}finally{c(!1)}})()},[]);const p=[{field:"vanImage",headerName:"Van Image",width:150,renderCell:e=>{var r,a,o,n;return t.jsx("div",{className:"flex items-center justify-center",children:(o=(a=(r=e.row)==null?void 0:r.vanId)==null?void 0:a.images)!=null&&o[0]?t.jsx("img",{src:e.row.vanId.images[0],alt:((n=e.row.vanId.name)==null?void 0:n.en)||"Van",className:"w-20 h-20 rounded-full object-cover"}):t.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:"N/A"})})}},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"},{field:"name",headerName:"Name",width:200,renderCell:e=>{var r;return t.jsx("div",{children:(r=e==null?void 0:e.row)!=null&&r.userId?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"font-semibold",children:e.row.userId.firstName||"N/A"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.row.userId.lastName||"N/A"})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No User Info"})})}},{field:"rating",headerName:"Rating",width:150,renderCell:e=>t.jsx(g,{value:e.value,precision:.5,readOnly:!0})},{field:"comment",headerName:"Comment",width:300},{field:"vanDetails",headerName:"Van",width:250,renderCell:e=>e.row.vanId?t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.vanId.name.en}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Plate: ",e.row.vanId.plateNumber]})]}):"N/A"}],x=l.map(e=>{var r,a;return{id:e._id,author_name:e.author_name||`${(r=e.userId)==null?void 0:r.firstName} ${(a=e.userId)==null?void 0:a.lastName}`,author_url:e.author_url||"",rating:e.rating,comment:e.text||e.comment,createdAt:e.createdAt||e.time,vanId:e.vanId}});return t.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reviews"}),m?t.jsx("div",{className:"text-center text-gray-500",children:"Loading reviews..."}):s?t.jsx("div",{className:"text-center text-red-500",children:s}):t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(N,{rows:x,columns:p,pageSize:10,rowsPerPageOptions:[10],checkboxSelection:!1,disableSelectionOnClick:!0})})]})};export{se as default};
