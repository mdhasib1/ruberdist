import{r as a,j as e,d as h}from"./index-B_XR-bXS.js";import{a6 as N}from"./index-DpxsO8Tb.js";import{C as f}from"./CircularProgress-CnUP9nIX.js";import{h as o}from"./proxy-ghLGn7f2.js";import{A as x}from"./Alert-Cfa11-q5.js";import{T as c}from"./TextField-8lldrJnn.js";import{B as E}from"./Button-gI_ekC-0.js";import"./iconBase-BOVTrjLU.js";import"./createSimplePaletteValueFilter-BqFbd0Em.js";import"./useSlot-CiWiNTR6.js";import"./createSvgIcon-c53c8Spr.js";import"./Close-DVHmFJ28.js";import"./IconButton-CRfIEONe.js";import"./Paper-Dn5NJgTn.js";import"./useTheme-B7QzK74H.js";import"./useTheme-CokdzniT.js";import"./Select-CzenUNWX.js";import"./Menu-B2ZH_G3y.js";import"./Portal-DeAW2irb.js";import"./Grow-Diug3Yir.js";import"./List-DlYRtUZN.js";import"./Modal-Cde_47yd.js";import"./useControlled-C95e4nO2.js";import"./index-xHaaV7qh.js";import"./isMuiElement-BsuoJcZr.js";const y="https://rubertogo.com",Y=()=>{const[v,g]=a.useState(!1),[l,p]=a.useState(!1),[b,m]=a.useState(!1),[u,r]=a.useState(""),[s,d]=a.useState({adminpercentage:"",partnerpercentage:"",referralpercentage:"",userpercentage:""});a.useEffect(()=>{(async()=>{g(!0);try{const t=await h.get(`${y}/api/earnings-settings`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log("response",t),t.status===200?d(t.data.settings||{}):r("Failed to fetch earnings settings.")}catch(t){console.error("Error fetching earnings settings:",t),r("An error occurred while fetching earnings settings.")}finally{g(!1)}})()},[]);const n=i=>{const{name:t,value:S}=i.target;d(w=>({...w,[t]:S}))},j=async i=>{i.preventDefault(),p(!0),m(!1),r("");try{const t=await h.put(`${y}/api/earnings-settings`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});console.log("Settings update response:",t),t.status===200?(m(!0),r("")):r(t.data.message||"Failed to update earnings settings.")}catch(t){console.error("Error updating earnings settings:",t),r("An error occurred while updating earnings settings.")}finally{p(!1)}};return v?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(f,{})}):e.jsxs(o.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Earnings Settings"}),b&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(x,{severity:"success",className:"mb-4",children:"Earnings settings updated successfully!"})}),u&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(x,{severity:"error",className:"mb-4",children:u})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Admin Percentage",name:"adminpercentage",type:"number",value:s.adminpercentage,onChange:n,fullWidth:!0,required:!0,variant:"outlined"}),e.jsx(c,{label:"Partner Percentage",name:"partnerpercentage",type:"number",value:s.partnerpercentage,onChange:n,fullWidth:!0,required:!0,variant:"outlined"}),e.jsx(c,{label:"Referral Percentage",name:"referralpercentage",type:"number",value:s.referralpercentage,onChange:n,fullWidth:!0,required:!0,variant:"outlined"}),e.jsx(c,{label:"User Percentage",name:"userpercentage",type:"number",value:s.userpercentage,onChange:n,fullWidth:!0,required:!0,variant:"outlined"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center",children:e.jsx(E,{type:"submit",variant:"contained",color:"primary",startIcon:l?e.jsx(f,{size:20}):e.jsx(N,{}),disabled:l,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:l?"Saving...":"Save"})})})]})]})};export{Y as default};
