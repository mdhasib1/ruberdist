import{r as e,j as t,bf as n,f as r,g as a,a2 as s,a4 as l,b8 as o,aV as c}from"./vendor-Zgq9WbFI.js";import{a as i}from"./index-D29cp_SG.js";const u=({open:u,handleClose:d,otpLength:f=4,onVerify:m,onResendOtp:p})=>{const[x,h]=e.useState(Array(f).fill("")),g=e.useRef([]),[v,y]=e.useState(!1),[j,b]=e.useState(600),w=e.useRef(null),{translations:C}=i(),P=()=>{y(!1),b(600),w.current&&clearInterval(w.current),w.current=setInterval((()=>{b((e=>e<=1?(clearInterval(w.current),y(!0),0):e-1))}),1e3)},I=e=>{var t;e.preventDefault();const n=e.clipboardData.getData("Text").slice(0,f);if(/^\d+$/.test(n)){const e=Array.from(n).slice(0,f);h(e);const r=e.length-1;null==(t=g.current[r])||t.focus()}};return e.useEffect((()=>(u&&P(),()=>{w.current&&clearInterval(w.current)})),[u]),t.jsx(n,{open:u,onClose:d,"aria-labelledby":"login-modal",children:t.jsxs(r,{className:"flex relative flex-col items-center p-10  bg-white rounded-lg shadow-lg max-w-2xl w-full",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[t.jsxs(a,{align:"center",variant:"h6",gutterBottom:!0,children:["`",C.loginModalTitle,"`"]}),t.jsx(r,{display:"flex",justifyContent:"center",gap:1,mb:2,children:x.map(((e,n)=>t.jsx(s,{inputRef:e=>g.current[n]=e,type:"text",variant:"outlined",value:e,onChange:e=>((e,t)=>{var n;const{value:r}=e.target;if(/^\d$/.test(r)){const e=[...x];e[t]=r,h(e),t<f-1&&(null==(n=g.current[t+1])||n.focus())}else if(""===r){const e=[...x];e[t]="",h(e)}})(e,n),onKeyDown:e=>((e,t)=>{var n;if("Backspace"===e.key)if(x[t]){const e=[...x];e[t]="",h(e)}else t>0&&(null==(n=g.current[t-1])||n.focus())})(e,n),onPaste:0===n?I:void 0,inputProps:{maxLength:1,inputMode:"numeric",style:{textAlign:"center",fontSize:"1.5rem",width:"2rem",height:"2rem"}}},n)))}),t.jsx(a,{align:"center",variant:"body2",color:"textSecondary",children:v?"OTP has expired. Please resend.":`Time remaining: ${(e=>{const t=e%60;return`${Math.floor(e/60)}:${t<10?"0":""}${t}`})(j)}`}),v&&t.jsx(l,{onClick:()=>{p(),P()},variant:"text",color:"secondary",className:"mt-2",children:C.resentCode}),t.jsx(l,{onClick:async()=>{const e=x.join("");if(e.length<f||x.some((e=>""===e)))c.error("Please complete all OTP fields.");else try{await m(e)}catch(t){console.error("Invalid OTP:",t)}},variant:"contained",color:"primary",className:"w-full mt-4",startIcon:t.jsx(o,{}),children:C.submitOtp})]})})};export{u as O};
