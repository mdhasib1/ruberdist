import{j as e,r as i,d as F,u as Fr,h as Sr,B as x}from"./index-B_XR-bXS.js";import{u as Ar,A as ke}from"./esm-BBh7wN-B.js";import{O as Lr,l as Br}from"./OTPModal-B1MqVWDw.js";import{d as J}from"./dayjs.min-DJi5V76p.js";import{l as Tr,L as Rr}from"./LoginModal-BnQ-Ijnx.js";import{u as D}from"./index-5_7-F2Z1.js";import{O as Ie,P as N,Q as _,R as De,S as Ce,t as zr,A as Mr,T as Er,U as ae,V as Or}from"./index-DpxsO8Tb.js";import{I as $r}from"./index-DG1V1zS4.js";import{T as Kr}from"./index-DKAZLuk5.js";import{M as qr}from"./Modal-C6DOZo7f.js";import Hr from"./PrivacyPolicy-BkNnxbkE.js";import Vr from"./TermsAndConditions-FsbApY2B.js";import{B as P}from"./Box-CfZ4J_TA.js";import{S as u}from"./Skeleton-91_cUmTM.js";import{h as ie}from"./proxy-ghLGn7f2.js";import{M as Wr}from"./Modal-Cde_47yd.js";import{T as O}from"./Typography-CuI5uYqX.js";import{C as ne}from"./CircularProgress-CnUP9nIX.js";import{T as j}from"./Tooltip-UHsXGHdB.js";import{B as $}from"./Button-gI_ekC-0.js";import{T as v,I as C}from"./TextField-8lldrJnn.js";import{I as b}from"./InputAdornment-BL0rk6jw.js";import{I as w}from"./IconButton-CRfIEONe.js";import{F as oe,C as U}from"./FormControlLabel-qgAvBeEs.js";import"./index-DKCGU2h-.js";import"./iconBase-BOVTrjLU.js";import"./index-CFLSrtzH.js";import"./index-D06Jhu5U.js";import"./Carousel-BWLugbGD.js";import"./index-Rnf9BJUB.js";import"./createSimplePaletteValueFilter-BqFbd0Em.js";import"./useTheme-CokdzniT.js";import"./index-xHaaV7qh.js";import"./Portal-DeAW2irb.js";import"./useSlot-CiWiNTR6.js";import"./useTheme-B7QzK74H.js";import"./useControlled-C95e4nO2.js";import"./Grow-Diug3Yir.js";import"./Select-CzenUNWX.js";import"./Menu-B2ZH_G3y.js";import"./List-DlYRtUZN.js";import"./Paper-Dn5NJgTn.js";import"./createSvgIcon-c53c8Spr.js";import"./isMuiElement-BsuoJcZr.js";const Yr=()=>e.jsxs(P,{className:"bg-white min-h-screen h-screen flex flex-col justify-center items-center",children:[e.jsxs(P,{className:"relative h-[200px] bg-cover flex justify-center items-center bg-center",style:{backgroundImage:"url('/hero.webp')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#ff0707] to-[#ff5050] opacity-90"}),e.jsxs(P,{className:"relative z-10 flex flex-col items-center justify-center h-full text-center text-white space-y-4 px-4",children:[e.jsx(u,{variant:"text",width:"60%",height:40}),e.jsx(u,{variant:"text",width:"40%",height:30})]})]}),e.jsx(P,{className:"container mx-auto py-10 px-4 sm:px-6 lg:px-8",children:e.jsxs(P,{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsxs(P,{className:"col-span-2 p-5 bg-gray-50 shadow-md rounded-lg space-y-6",children:[e.jsx(u,{variant:"text",width:"80%",height:30}),e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsxs(P,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsx(u,{variant:"rectangular",width:"100%",height:50})]}),e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsx(u,{variant:"rectangular",width:"100%",height:50}),e.jsxs(P,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{variant:"rectangular",width:"100%",height:150}),e.jsx(u,{variant:"rectangular",width:"100%",height:150})]}),e.jsx(u,{variant:"text",width:"50%",height:30})]}),e.jsxs(P,{className:"sm:col-span-1 col-span-2 bg-white rounded-2xl p-8 border border-gray-200",children:[e.jsx(u,{variant:"rectangular",width:"100%",height:150}),e.jsx(u,{variant:"text",width:"80%",height:30}),e.jsx(u,{variant:"text",width:"60%",height:20}),e.jsx(u,{variant:"text",width:"90%",height:20}),e.jsxs(P,{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm space-y-2",children:[e.jsx(u,{variant:"text",width:"80%",height:20}),e.jsx(u,{variant:"text",width:"60%",height:20})]}),e.jsx(u,{variant:"rectangular",width:"100%",height:50})]})]})})]}),_r=({isOpen:t,onClose:l,children:c})=>t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsx(ie.div,{className:"fixed inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l}),e.jsxs(ie.div,{className:"bg-white w-full max-w-4xl mx-4 rounded-lg shadow-lg  relative  h-[75vh] overflow-y-auto z-50",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:[e.jsx("button",{onClick:l,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",children:"✕"}),e.jsx("div",{className:"overflow-y-auto h-full",children:c})]})]}):null,Ur=({isOpen:t,onClose:l,onSelectProduct:c})=>{const[h,y]=i.useState([]),[k,n]=i.useState([]),[K,T]=i.useState(!1),R="https://rubertogo.com";i.useEffect(()=>{t&&G()},[t]);const G=async()=>{T(!0);try{const d=await F.get(`${R}/api/products`);y(d.data)}catch(d){console.error("Error fetching products:",d)}finally{T(!1)}},Z=d=>{n(S=>S.find(M=>M._id===d._id)?S.filter(M=>M._id!==d._id):[...S,d])},z=()=>{c(k),l()},Q=d=>e.jsxs("svg",{viewBox:"0 0 200 150",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("rect",{width:"200",height:"150",fill:"#f3f4f6",rx:"15",ry:"15"}),e.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"#374151",children:d})]});return e.jsx(Wr,{open:t,onClose:l,children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:e.jsxs("div",{className:"bg-white  max-w-5xl rounded-lg shadow-lg overflow-hidden relative",children:[e.jsx("div",{className:"p-6 bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-center",children:e.jsx(O,{variant:"h5",className:"text-2xl font-bold",children:"Seleziona Prodotti Aggiuntivi"})}),K?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx(ne,{})}):e.jsx("div",{className:"p-6 space-y-6 h-[60vh] overflow-y-auto",children:h.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:h.map(d=>e.jsxs("div",{className:`border rounded-lg shadow-md transition-all flex flex-col justify-between items-center ${k.some(S=>S._id===d._id)?"bg-indigo-50 border-indigo-500":"bg-white border-gray-200"}`,style:{height:"350px",maxWidth:"100%",padding:"1rem"},onClick:()=>Z(d),children:[e.jsx(j,{title:d.name,placement:"top",children:e.jsx("div",{className:"w-full h-40 flex items-center justify-center overflow-hidden rounded-lg mb-4 bg-gray-100 line-clamp-1",style:{flexShrink:0},children:d.image?e.jsx("img",{src:d.image,alt:d.name,className:"w-full h-full object-cover"}):Q(d.name)})}),e.jsx(O,{variant:"body1",className:"font-extrabold text-xl text-gray-800 truncate w-full text-center",children:d.name}),e.jsxs("span",{className:"text-2xl text-gray-500 text-center",children:[d.price," CHF"]}),e.jsx(O,{variant:"body2",className:"text-sm text-gray-600 mt-2 text-center",children:d.description||"No description available."})]},d._id))}):e.jsx(O,{variant:"body1",className:"text-center text-gray-600",children:"Nessun prodotto disponibile."})}),e.jsxs("div",{className:"p-6 bg-gray-100 flex justify-end space-x-4",children:[e.jsx($,{variant:"outlined",color:"secondary",onClick:l,className:"rounded-lg",children:"Annulla"}),e.jsx($,{variant:"contained",color:"primary",onClick:z,disabled:K||k.length===0,className:"rounded-lg px-6 py-2 shadow-md hover:shadow-lg transition-all",children:"Conferma Selezione"})]})]})})})},Jr=Br("pk_live_51PwWTGDCK8rR2FJAZlmM7KPakXDO09KCBJRjUT5QRFNRRTvlctb9KG8D9bxZ38RRsG6np5RYrJmVG2AeP22KXq7P00rQKtFDnq"),B="https://rubertogo.com",Gr=t=>{var h;const l=J().format("dddd"),c=(h=t.dailyPricing)==null?void 0:h.find(y=>y.day===l);return c!=null&&c.pricePerHour?`${c.pricePerHour} CHF`:"Not available"},Zr=t=>{var h;const l=J().format("dddd"),c=(h=t.dailyPricing)==null?void 0:h.find(y=>y.day===l);return c!=null&&c.kilometers?`${c.kilometers} km`:"Not available"},Qr=t=>{var h,y;const l=J().format("dddd"),c=(h=t.dailyPricing)==null?void 0:h.find(k=>k.day===l);return(y=c==null?void 0:c.extraPerKm)!=null&&y.toFixed(2)?`${c.extraPerKm.toFixed(2)} CHF `:"Not available"},Vt=()=>{var ye,Ne,be,we,Pe;const[t,l]=i.useState({firstName:"",lastName:"",address:"",email:"",phone:"",idDocumentFront:null,idDocumentBack:null,licenseFront:null,licenseBack:null,isNotDriver:!1,referralCode:"",timeZone:"",driverInfo:{driverFirstName:"",driverLastName:"",driverAddress:"",driverEmail:"",driverPhone:"",driverLicenseFront:null,driverLicenseBack:null,driverIdDocumentFront:null,driverIdDocumentBack:null}}),[c,h]=i.useState(!1),[y,k]=i.useState(""),[n,K]=i.useState(null),[T,R]=i.useState(!1),{lang:G}=Fr(),[Z,z]=i.useState(!1),[Q,d]=i.useState(""),[S,M]=i.useState(""),Fe=i.useRef([]),[Se,Ae]=i.useState(null),q=localStorage.getItem("accessToken"),[le,de]=i.useState(!1),[A,Le]=i.useState(null),{translations:a}=Sr(),[X,Be]=i.useState(!1),[ee,ce]=i.useState(null),[re,Te]=i.useState(!1),[me,Re]=i.useState(""),[H,ze]=i.useState(null),[Me,ue]=i.useState(!1),[te,Ee]=i.useState([]),[he,Oe]=i.useState(!1),[Xr,$e]=i.useState(null),[xe,Ke]=i.useState(null),[V,qe]=i.useState(0),[L,He]=i.useState(!1),Ve=async()=>{var r,s;if(L){x.error("A coupon has already been applied.");return}try{const o=await F.post(`${B}/api/coupons/apply`,{code:t.couponCode,totalHours:n.selectedSlots.length,totalAmount:ge().previousTotalPrice});o.status===200&&(x.success("Coupon applied successfully!"),$e(t.couponCode),Ke(o.data.discountType),qe(o.data.discountValue),He(!0))}catch(o){x.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.error)||"Failed to apply coupon.")}},We=()=>ue(!0),Ye=()=>ue(!1),_e=r=>{Ee(r)},pe=r=>{ce(r)},Ue=()=>{ce(null)};i.useEffect(()=>{l(r=>({...r,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}))},[]);const Je=async r=>{try{(await F.post(`${B}/api/valid-referral-code`,{referralCode:r},{headers:{Authorization:`Bearer ${q}`}})).status===200&&x.success("Referral code is valid.")}catch(s){console.error("Error validating referral code:",s),x.error("Invalid referral code.")}},Ge=r=>{const s=r.target.value;l(o=>({...o,referralCode:s})),s&&s!==me?Je(s):ze(null)},Ze=r=>{const s=J().startOf("hour"),o=s.add(4,"hour"),m=r.pricePerHour*4;Le({...r,name:r.name.en||"Unnamed Van",description:r.description.en||"No description available.",totalPrice:m,startDate:s.format("YYYY-MM-DD"),endDate:o.format("YYYY-MM-DD"),startTime:s.format("h:mm A"),endTime:o.format("h:mm A")}),de(!0)};i.useEffect(()=>{q&&(async()=>{try{const s=await F.get(`${B}/api/user-profile`,{headers:{Authorization:`Bearer ${q}`}});if(s.status===200){const{referralCode:o,...m}=s.data.user;l(p=>({...p,...m})),Re(o)}}catch(s){console.error("Error fetching user profile:",s),x.error("Failed to fetch user data. Please try again.")}})()},[q]),i.useEffect(()=>{const r=localStorage.getItem("bookingData");r&&K(JSON.parse(r))},[]);const W=r=>{const{name:s,value:o}=r.target;l(m=>({...m,[s]:o}))},Qe=r=>{const s=r.target.value;l(o=>({...o,email:s})),Xe(s)},Xe=i.useCallback(Tr.debounce(async r=>{try{(await F.post(`${B}/api/exist-account`,{email:r})).status===201?R(!0):R(!1)}catch(s){console.error("Error checking account existence:",s)}},500),[]),E=r=>{const{name:s,value:o}=r.target;l(m=>({...m,driverInfo:{...m.driverInfo,[s]:o}}))},er=r=>{l(s=>({...s,isNotDriver:r.target.checked}))},rr=async r=>{const s=new FormData;s.append("file",r);try{return(await F.post(`${B}/api/upload`,s,{headers:{"Content-Type":"multipart/form-data"}})).data.imageURL}catch(o){return console.error("Error uploading file:",o),x.error("Failed to upload file. Please try again."),null}},I=async(r,s,o=!1)=>{const m=r[0],p=await rr(m);p&&l(o?f=>({...f,driverInfo:{...f.driverInfo,[s]:p}}):f=>({...f,[s]:p}))},{getRootProps:tr,getInputProps:sr}=D({onDrop:r=>I(r,"idDocumentFront"),accept:"image/*"}),{getRootProps:ar,getInputProps:or}=D({onDrop:r=>I(r,"idDocumentBack"),accept:"image/*"}),{getRootProps:ir,getInputProps:nr}=D({onDrop:r=>I(r,"licenseFront"),accept:"image/*"}),{getRootProps:lr,getInputProps:dr}=D({onDrop:r=>I(r,"licenseBack"),accept:"image/*"}),{getRootProps:cr,getInputProps:mr}=D({onDrop:r=>I(r,"driverIdDocumentFront",!0),accept:"image/*"}),{getRootProps:ur,getInputProps:hr}=D({onDrop:r=>I(r,"driverIdDocumentBack",!0),accept:"image/*"}),{getRootProps:xr,getInputProps:pr}=D({onDrop:r=>I(r,"driverLicenseFront",!0),accept:"image/*"}),{getRootProps:gr,getInputProps:fr}=D({onDrop:r=>I(r,"driverLicenseBack",!0),accept:"image/*"}),vr=r=>{const s=new Date(r),o=String(s.getDate()).padStart(2,"0"),m=String(s.getMonth()+1).padStart(2,"0"),p=s.getFullYear();return`${o}/${m}/${p}`},jr=async r=>{var p,f;r.preventDefault(),r.stopPropagation(),h(!0),k("");const s=["firstName","lastName","email","phone"];for(let g of s)if(!t[g]){x.error("Per favore, compila tutti i campi richiesti."),h(!1);return}if([t.idDocumentFront,t.idDocumentBack,t.licenseFront,t.licenseBack,...t.isNotDriver?[t.driverInfo.driverFirstName,t.driverInfo.driverLastName,t.driverInfo.driverAddress,t.driverInfo.driverEmail,t.driverInfo.driverPhone,t.driverInfo.driverIdDocumentFront,t.driverInfo.driverIdDocumentBack,t.driverInfo.driverLicenseFront,t.driverInfo.driverLicenseBack]:[]].some(g=>!g)){x.error("Per favore carica tutti i documenti richiesti."),h(!1);return}const m={...t,selectedSlots:n.selectedSlots.map(g=>({...g,date:vr(g.date)})),totalPrice:se,vanId:n.vanDetails._id,driverInfo:JSON.stringify(t.driverInfo)};re&&t.referralCode&&t.referralCode!==me&&(m.referralCode=t.referralCode);try{h(!0);const{data:g}=await F.post(`${B}/api/create-booking`,m,{headers:{"Content-Type":"application/json"}});M(g.email),z(!0),Ae(g.sessionId)}catch(g){console.error("Error during checkout:",g);const Y=((f=(p=g.response)==null?void 0:p.data)==null?void 0:f.error)||"Failed to initiate payment. Please try again.";x.error(Y),k(Y)}finally{h(!1)}},yr=async r=>{try{const s=await F.post(`${B}/api/verify-otp`,{email:S,otp:r}),{accessToken:o,refreshToken:m}=s.data;localStorage.setItem("accessToken",o),localStorage.setItem("refreshToken",m),x.success("OTP verified successfully!"),z(!1),d("");const p=await Jr,{error:f}=await p.redirectToCheckout({sessionId:Se});f&&(console.error("Stripe Redirect Error:",f),x.error("Failed to redirect to payment. Please try again."))}catch(s){console.error("OTP Verification Failed:",s),x.error("Invalid or expired OTP.")}},Nr=r=>{Oe(r.target.checked)},ge=()=>{var f;const r=(n==null?void 0:n.totalPrice)||0,s=te.reduce((g,Y)=>g+Y.price,0),o=he&&((f=n==null?void 0:n.vanDetails)==null?void 0:f.unlimitedKilometersPrice)||0,m=r+s+o,p=L?m-(xe==="percentage"?m*V/100:V):m;return{previousTotalPrice:m,finalTotalPrice:p}},[fe,br]=i.useState(null),[ve,wr]=i.useState(null),{previousTotalPrice:je,finalTotalPrice:se}=ge(),Pr=()=>{if(fe){const r=fe.getPlace();if(r&&r.geometry){const s=r.formatted_address;l(o=>({...o,address:s}))}else x.error("Please select a valid address.")}},kr=r=>{br(r)},{isLoaded:Ir}=Ar({googleMapsApiKey:"AIzaSyCJgOiSJeJlRdoFK_jTK-mNug5b22XPRn4",libraries:["places"]});if(!Ir)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(ne,{})});const Dr=()=>{if(ve){const r=ve.getPlace();if(r&&r.geometry){const s=r.formatted_address;l(o=>({...o,driverInfo:{...o.driverInfo,driverAddress:s}}))}else x.error("Please select a valid address for the driver.")}},Cr=r=>{wr(r)};return e.jsx(e.Fragment,{children:c?e.jsx(Yr,{}):e.jsxs(ie.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1},className:"max-w-full mx-auto ",children:[e.jsxs("div",{className:"relative h-[200px] sm:h-[250px] bg-cover flex justify-center items-center bg-center",style:{backgroundImage:"url('/hero.webp')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#ff0707] to-[#ff5050] opacity-90"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center text-white space-y-4 px-4",children:[e.jsx("span",{style:{alignItems:"center"},className:"text-3xl md:text-3xl font-bold",children:a.checkoutHeading}),e.jsx("span",{children:a.checkoutdescription})]})]}),e.jsxs("div",{className:"container mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[y&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("p",{className:"flex flex-col sm:flex-row items-center px-4 py-2 bg-red-100 border border-red-400 text-red-600 rounded-lg font-semibold",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mb-2 sm:mb-0 sm:mr-2 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636L5.636 18.364M5.636 5.636l12.728 12.728"})}),e.jsx("span",{className:"text-center sm:text-left",children:y}),n&&e.jsx($,{sx:{marginTop:{xs:"1rem",sm:"0"},marginLeft:{sm:"1rem"}},variant:"outlined",color:"primary",onClick:()=>Ze(n.vanDetails),children:"Seleziona un nuovo orario"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs("form",{className:"space-y-6 p-5 bg-gray-50 shadow-md rounded-lg",children:[e.jsx(v,{label:e.jsxs("div",{className:"flex items-center",children:[a.checkoutemail,e.jsx(j,{title:"Email is required for booking confirmation",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),placeholder:a.checkoutemail,name:"email",type:"email",fullWidth:!0,variant:"outlined",value:t.email,onChange:Qe,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(Ie,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(v,{label:e.jsxs("div",{className:"flex items-center",children:[a.checkoutFirstName,e.jsx(j,{title:"First name is required for booking confirmation",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),placeholder:a.checkoutFirstName,name:"firstName",fullWidth:!0,variant:"outlined",value:t.firstName,onChange:W,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(_,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsx(v,{label:e.jsxs("div",{className:"flex items-center",children:[a.checkoutLastName,e.jsx(j,{title:"Last name is required for booking confirmation",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),placeholder:a.checkoutLastName,name:"lastName",fullWidth:!0,variant:"outlined",value:t.lastName,onChange:W,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(_,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:e.jsx(ke,{onLoad:kr,onPlaceChanged:Pr,children:e.jsx(v,{label:e.jsxs("div",{className:"flex items-center",children:[a.checkoutAddress,e.jsx(j,{title:"Address is required for booking confirmation",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),placeholder:a.checkoutAddress,name:"address",fullWidth:!0,variant:"outlined",value:t.address,onChange:W,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(De,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})})}),e.jsx(v,{label:e.jsxs("div",{className:"flex items-center",children:[a.checkoutphone,e.jsx(j,{title:"Phone number is required for booking confirmation",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),placeholder:a.checkoutphone,name:"phone",fullWidth:!0,variant:"outlined",value:t.phone,onChange:W,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(Ce,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(C,{children:[a.checkoutIdFront,e.jsx(j,{title:"You must provide a valid ID document",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),e.jsxs("div",{...tr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...sr()}),t.idDocumentFront?e.jsx("img",{src:t.idDocumentFront,alt:"ID Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(C,{children:[a.checkoutIdBack,e.jsx(j,{title:"You must provide a valid ID document",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),e.jsxs("div",{...ar(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...or()}),t.idDocumentBack?e.jsx("img",{src:t.idDocumentBack,alt:"ID Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]})]}),!t.isNotDriver&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(C,{children:[a.checkoutLicenseFront,e.jsx(j,{title:"You must provide a valid driver license",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),e.jsxs("div",{...ir(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...nr()}),t.licenseFront?e.jsx("img",{src:t.licenseFront,alt:"Driver License Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(C,{children:[a.checkoutLicenseBack,e.jsx(j,{title:"You must provide a valid driver license",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]}),e.jsxs("div",{...lr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...dr()}),t.licenseBack?e.jsx("img",{src:t.licenseBack,alt:"Driver License Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]})]})}),e.jsx(oe,{control:e.jsx(U,{checked:t.isNotDriver,onChange:er,name:"isNotDriver",color:"primary"}),label:e.jsxs("div",{className:"flex items-center",children:[a.checkoutImnotdriver,e.jsx(j,{title:"Check this box if you are not the driver",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]})}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(oe,{control:e.jsx(U,{checked:re,onChange:r=>Te(r.target.checked),color:"primary"}),label:e.jsxs("div",{className:"flex items-center",children:[a.applyReferalCode,e.jsx(j,{title:"Enter a valid referral code to get a discount",children:e.jsx(w,{size:"small",className:"ml-1",children:e.jsx(N,{})})})]})}),re&&e.jsx(v,{label:a.checkoutReferralCode,name:"referralCode",variant:"outlined",fullWidth:!0,value:t.referralCode,onChange:Ge,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx($r,{className:"text-gray-500"})})},className:`transition duration-300 focus-within:shadow-md rounded-lg ${H===!0?"border-green-500":H===!1?"border-red-500":""}`,helperText:H===!0?"Referral code is valid!":H===!1?"Invalid referral code":""})]}),t.isNotDriver&&e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"h6",className:"font-bold mt-6",children:a.checkoutDriverInformationHeading}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(v,{label:a.checkoutDriverFirstName,name:"driverFirstName",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverFirstName,onChange:E,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(_,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsx(v,{label:a.checkoutDriverLastName,name:"driverLastName",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverLastName,onChange:E,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(_,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ke,{onLoad:Cr,onPlaceChanged:Dr,children:e.jsx(v,{label:a.checkoutDriverAddress,name:"driverAddress",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverAddress,onChange:E,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(De,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})}),e.jsx(v,{label:a.checkoutDriverEmail,name:"driverEmail",type:"email",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverEmail,onChange:E,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(Ie,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"})]}),e.jsx(v,{label:a.checkoutDriverPhone,name:"driverPhone",fullWidth:!0,variant:"outlined",value:t.driverInfo.driverPhone,onChange:E,required:!0,InputProps:{startAdornment:e.jsx(b,{position:"start",children:e.jsx(Ce,{className:"text-gray-500"})})},className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(C,{children:a.checkoutDriverIdFront}),e.jsxs("div",{...xr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...pr()}),t.driverInfo.driverLicenseFront?e.jsx("img",{src:t.driverInfo.driverLicenseFront,alt:"Driver License Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(C,{children:[" ",a.checkoutDriverIdBack," "]}),e.jsxs("div",{...gr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...fr()}),t.driverInfo.driverLicenseBack?e.jsx("img",{src:t.driverInfo.driverLicenseBack,alt:"Driver License Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(C,{children:[" ",a.checkoutDriverLicenseFront," "]}),e.jsxs("div",{...cr(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...mr()}),t.driverInfo.driverIdDocumentFront?e.jsx("img",{src:t.driverInfo.driverIdDocumentFront,alt:"Driver ID Front Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]}),e.jsxs("div",{children:[e.jsxs(C,{children:[" ",a.checkoutDriverLicenseBack," "]}),e.jsxs("div",{...ur(),className:"p-4 border-dashed border-2 border-gray-300 mt-2 rounded-lg hover:shadow-lg transition-all",children:[e.jsx("input",{...hr()}),t.driverInfo.driverIdDocumentBack?e.jsx("img",{src:t.driverInfo.driverIdDocumentBack,alt:"Driver ID Back Preview",className:"w-full h-40 object-cover mt-2 rounded-md",lazy:"true"}):e.jsx("p",{className:"text-gray-500",children:a.draganddrop})]})]})]})]})]})}),e.jsx("div",{className:"sm:col-span-1 col-span-2",children:e.jsx("div",{className:"bg-white  rounded-2xl p-8 border border-gray-200",children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[n&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:(ye=n==null?void 0:n.vanDetails)==null?void 0:ye.images[0],alt:"Van",className:"w-full flex justify-center rounded-lg object-container ",lazy:"true"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:[e.jsx(zr,{className:"inline-block text-green-800 mr-2"}),((Ne=n.vanDetails)==null?void 0:Ne.name[G])||((be=n.vanDetails)==null?void 0:be.name.en)]}),e.jsxs("p",{className:"text-md text-gray-600",children:[e.jsx(Mr,{className:"inline-block text-green-800 mr-2"}),e.jsxs("span",{className:"font-semibold",children:[a.totalHours,":"]})," ",n.selectedSlots.length]}),e.jsxs("p",{className:"text-md text-gray-600",children:[e.jsx(Er,{className:"inline-block  text-green-800 mr-2"}),e.jsxs("span",{className:"font-semibold",children:[a.hourPrice,":"]})," ",Gr(n.vanDetails)]})]}),e.jsxs("div",{className:"text-md text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx(ae,{className:"inline-block text-green-800 mr-2"}),a.includes," ",Zr(n.vanDetails)]}),e.jsxs("p",{children:[e.jsx(ae,{className:"inline-block text-green-800 mr-2"}),a.extraPerKm," ",Qr(n.vanDetails)]})]}),e.jsx("div",{className:"space-y-1",children:n.vanDetails.preAuthorizationAmount>0?e.jsxs("p",{className:"text-gray-600 text-md font-semibold",children:[e.jsx(ae,{className:"inline-block text-green-800 mr-2"}),a.securityDiposit,":"," ",n.vanDetails.preAuthorizationAmount," ","CHF"]}):e.jsxs("p",{className:"text-red-600  text-md font-semibold",children:[e.jsx(Or,{className:"inline-block mr-2"}),a.nosecurityDiposit]})})]}),((we=n==null?void 0:n.vanDetails)==null?void 0:we.unlimitedKilometersPrice)>0&&e.jsx(oe,{control:e.jsx(U,{checked:he,onChange:Nr,disableRipple:!0,icon:e.jsx("div",{className:"relative w-10 h-6 bg-gray-500 rounded-full shadow-inner transition duration-300",children:e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-md transition-transform duration-300 transform"})}),checkedIcon:e.jsx("div",{className:"relative w-10 h-6 bg-gradient-to-r from-green-400 to-blue-500 rounded-full shadow-lg transition duration-300",children:e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-md transition-transform duration-300 transform translate-x-4"})})}),label:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("span",{className:"text-md font-semibold text-gray-900",children:a.unlimitedKm}),e.jsxs("span",{className:"px-2 py-1 w-24 text-center text-lg font-bold text-white bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 rounded-lg shadow-md",children:[(Pe=n==null?void 0:n.vanDetails)==null?void 0:Pe.unlimitedKilometersPrice," ","CHF"]})]}),className:"text-lg font-semibold text-gray-900",sx:{width:"100%",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.8rem 0.8rem",border:"1px solid #e2e8f0",borderRadius:"10px",transition:"transform 0.2s ease, box-shadow 0.3s ease"}}),te.length>0&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-2",children:a.additionalProducts}),te.map(r=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:r.name}),e.jsxs("span",{children:[a.priceLabel,": ",r.price," CHF"]})]},r._id))]}),e.jsxs("div",{className:"flex flex-col space-y-4  p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{label:a.applyCoupon,variant:"outlined",fullWidth:!0,value:t.couponCode,onChange:r=>l({...t,couponCode:r.target.value}),disabled:L,className:"transition duration-300 focus-within:shadow-md rounded-lg"}),e.jsx($,{variant:"contained",color:"primary",sx:{padding:"14px 16px"},onClick:Ve,disabled:L||!t.couponCode,children:L?"Applied":"Apply"})]}),L&&e.jsxs("p",{className:"text-green-600 font-semibold",children:["✅"," ",xe==="percentage"?`${V}%`:`${V} CHF`," ","Applied"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-2xl font-semibold text-gray-800 border p-5",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"ml-2 text-red-300 line-through",children:[je.toFixed(2)," CHF"]}),e.jsxs("span",{className:"ml-2 text-gray-600 font-bold",children:[se.toFixed(2)," CHF"]})]}):e.jsxs("span",{className:"ml-2 text-gray-600 font-bold",children:[je.toFixed(2)," CHF"]})})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(U,{id:"termsCheckbox",checked:X,onChange:r=>Be(r.target.checked),className:"w-5 h-5 rounded focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"termsCheckbox",className:"text-sm text-gray-700 leading-tight",children:[a.agreeToTerms," ",e.jsx("span",{onClick:()=>pe("terms"),className:"text-blue-600 underline hover:text-blue-800 cursor-pointer font-semibold",children:a.termsLink})," ","&"," ",e.jsx("span",{onClick:()=>pe("privacy"),className:"text-blue-600 underline hover:text-blue-800 cursor-pointer font-semibold",children:a.privacyLink})]})]}),e.jsx($,{type:"button",variant:"contained",startIcon:e.jsx(Kr,{}),onClick:jr,disabled:!X||c,className:`w-full py-10 rounded-xl text-xl font-bold shadow-xl transition-transform ${X?"hover:scale-105 bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:c?e.jsx(ne,{size:24,color:"inherit"}):`${a.payNow} ${se.toFixed(2)} CHF`})]})})})]})]}),T&&e.jsx(Rr,{open:T,handleClose:()=>R(!1),email:t.email}),e.jsx(Lr,{open:Z,handleClose:()=>z(!1),otp:Q,setOtp:d,onVerify:yr,otpRefs:Fe,otpLength:4}),le&&A&&e.jsx(qr,{isOpen:le,onClose:()=>de(!1),van:A,totalPrice:A.totalPrice,startDate:A.startDate,endDate:A.endDate,startTime:A.startTime,endTime:A.endTime}),e.jsx(Ur,{isOpen:Me,onClose:Ye,onSelectProduct:_e}),e.jsx("div",{className:"fixed top-64 right-0 mt-4 mr-4 z-50",children:e.jsxs("div",{className:"relative flex items-center group",children:[e.jsx("div",{className:"relative w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex justify-center items-center shadow-xl transition-transform transform group-hover:scale-110 group-hover:shadow-2xl",children:e.jsxs("button",{onClick:We,className:"w-full h-full flex justify-center items-center rounded-full focus:outline-none",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 4v16m8-8H4",className:"origin-center animate-pulse"})}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 opacity-50 blur-xl animate-pulse group-hover:blur-2xl"})]})}),e.jsx("div",{className:"absolute right-20 top-0 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold text-sm px-6 py-2 rounded-full shadow-lg transition-all duration-500 opacity-0 group-hover:opacity-100 group-hover:translate-x-4",children:e.jsx("span",{className:"block animate-slide-text",children:"Aggiungi Prodotti"})})]})}),e.jsxs(_r,{isOpen:!!ee,onClose:Ue,children:[ee==="terms"&&e.jsx("div",{children:e.jsx(Vr,{})}),ee==="privacy"&&e.jsx("div",{children:e.jsx(Hr,{})})]})]})})};export{Vt as default};
