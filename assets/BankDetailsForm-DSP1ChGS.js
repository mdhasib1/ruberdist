import{r as a,b as e,j as t,g as s,a2 as r,a4 as n,a$ as l,aV as o}from"./vendor-Zgq9WbFI.js";const i=()=>{const[i,c]=a.useState(!1),[d,u]=a.useState({id:"",bankName:"",accountNumber:"",accountHolderName:"",branchName:"",swiftCode:""}),m=localStorage.getItem("accessToken"),p=(a=>{if(!a)return null;try{const e=a.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(e).split("").map((a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(t)}catch(e){return console.error("Failed to parse JWT:",e.message),null}})(m),b=null==p?void 0:p.id,h=e.create({baseURL:"https://rubertogo.com",headers:{Authorization:`Bearer ${m}`}});return a.useEffect((()=>{(async()=>{var a;c(!0);try{const a=await h.get(`/api/bank-details/${b}`);u(a.data.bankDetails||{})}catch(e){console.error("Fetch Bank Details Error:",(null==(a=e.response)?void 0:a.data)||e.message)}finally{c(!1)}})()}),[]),t.jsxs("div",{className:"p-6 container mx-auto bg-white rounded-xl shadow-lg h-screen",children:[t.jsx(s,{variant:"h4",className:"font-bold text-white bg-blue-500 mb-8 p-5",sx:{textAlign:"center",marginBottom:"2rem"},children:"Bank Details"}),t.jsxs("div",{className:"space-y-4",children:[["bankName","accountNumber","accountHolderName","branchName","swiftCode"].map((a=>t.jsx(r,{label:a.replace(/([A-Z])/g," $1"),variant:"outlined",fullWidth:!0,value:d[a]||"",onChange:e=>u({...d,[a]:e.target.value})},a))),t.jsx(n,{variant:"contained",color:"primary",onClick:async()=>{var a;c(!0);try{if(d._id)await h.put(`/api/bank-details/${d._id}`,d),o.success("Bank details updated successfully.");else{const a=await h.post("/api/bank-details",{partnerId:b,...d});u(a.data.bankDetails),o.success("Bank details added successfully.")}}catch(e){console.error("Save Bank Details Error:",(null==(a=e.response)?void 0:a.data)||e.message),o.error("Failed to save bank details.")}finally{c(!1)}},disabled:i,children:i?t.jsx(l,{size:20,color:"inherit"}):"Save Details"})]})]})};export{i as default};
